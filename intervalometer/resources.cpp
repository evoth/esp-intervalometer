#include "resources.h"

const char index_html[] PROGMEM = R"rawliteral(
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESP8266 Intervalometer</title>
    <script type="module">var de=Object.defineProperty;var pe=(t,e,n)=>e in t?de(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>(pe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function h(){}function ue(t){return t()}function ne(){return Object.create(null)}function N(t){t.forEach(ue)}function ie(t){return typeof t=="function"}function B(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function me(t){return Object.keys(t).length===0}function _e(t,...e){if(t==null){for(const r of e)r(void 0);return h}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function M(t,e,n){t.$$.on_destroy.push(_e(e,n))}function z(t,e,n){return t.set(n),e}function p(t,e){t.appendChild(e)}function b(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode&&t.parentNode.removeChild(t)}function _(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function C(){return S(" ")}function he(){return S("")}function I(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function le(t){return t===""?null:+t}function ge(t){return Array.from(t.childNodes)}function K(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e){t.value=e??""}function D(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let ee;function q(t){ee=t}const L=[],re=[];let T=[];const oe=[],ye=Promise.resolve();let X=!1;function be(){X||(X=!0,ye.then(fe))}function Y(t){T.push(t)}const W=new Set;let v=0;function fe(){if(v!==0)return;const t=ee;do{try{for(;v<L.length;){const e=L[v];v++,q(e),ke(e.$$)}}catch(e){throw L.length=0,v=0,e}for(q(null),L.length=0,v=0;re.length;)re.pop()();for(let e=0;e<T.length;e+=1){const n=T[e];W.has(n)||(W.add(n),n())}T.length=0}while(L.length);for(;oe.length;)oe.pop()();X=!1,W.clear(),q(t)}function ke(t){if(t.fragment!==null){t.update(),N(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Y)}}function we(t){const e=[],n=[];T.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),T=e}const G=new Set;let E;function Ce(){E={r:0,c:[],p:E}}function $e(){E.r||N(E.c),E=E.p}function x(t,e){t&&t.i&&(G.delete(t),t.i(e))}function j(t,e,n,r){if(t&&t.o){if(G.has(t))return;G.add(t),E.c.push(()=>{G.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Z(t){t&&t.c()}function F(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),Y(()=>{const s=t.$$.on_mount.map(ue).filter(ie);t.$$.on_destroy?t.$$.on_destroy.push(...s):N(s),t.$$.on_mount=[]}),o.forEach(Y)}function H(t,e){const n=t.$$;n.fragment!==null&&(we(n.after_update),N(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Se(t,e){t.$$.dirty[0]===-1&&(L.push(t),be(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,r,o,s,i=null,a=[-1]){const f=ee;q(t);const c=t.$$={fragment:null,ctx:[],props:s,update:h,not_equal:o,bound:ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:ne(),dirty:a,skip_bound:!1,root:e.target||f.$$.root};i&&i(c.root);let d=!1;if(c.ctx=n?n(t,e.props||{},(l,m,...u)=>{const k=u.length?u[0]:m;return c.ctx&&o(c.ctx[l],c.ctx[l]=k)&&(!c.skip_bound&&c.bound[l]&&c.bound[l](k),d&&Se(t,l)),m}):[],c.update(),d=!0,N(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const l=ge(e.target);c.fragment&&c.fragment.l(l),l.forEach(g)}else c.fragment&&c.fragment.c();e.intro&&x(t.$$.fragment),F(t,e.target,e.anchor),fe()}q(f)}class V{constructor(){Q(this,"$$");Q(this,"$$set")}$destroy(){H(this,1),this.$destroy=h}$on(e,n){if(!ie(n))return h;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!me(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pe);function xe(t){let e;return{c(){e=_("style"),e.textContent=`:root {
      --gray-5: var(--white);
      --gray-15: var(--lighter);
      --gray-35: var(--light);
      --gray-50: var(--medium);
      --gray-65: var(--dark);
      --gray-85: var(--darker);
      --gray-95: var(--black);
      --green-5: var(--light-green);
      --green-95: var(--dark-green);
      --red-5: var(--light-red);
      --red-95: var(--dark-red);
    }`},m(n,r){b(n,e,r)},d(n){n&&g(e)}}}function Ee(t){let e;return{c(){e=_("style"),e.textContent=`:root {
      --gray-5: var(--black);
      --gray-15: var(--darker);
      --gray-35: var(--dark);
      --gray-50: var(--medium);
      --gray-65: var(--light);
      --gray-85: var(--lighter);
      --gray-95: var(--white);
      --green-5: var(--dark-green);
      --green-95: var(--light-green);
      --red-5: var(--dark-red);
      --red-95: var(--light-red);
    }`},m(n,r){b(n,e,r)},d(n){n&&g(e)}}}function Ie(t){let e,n,r,o,s;function i(c,d){return c[0]=="light"?Ee:xe}let a=i(t),f=a(t);return{c(){e=_("button"),e.innerHTML='<img src="/icon.svg" alt="Crescent icon"/>',n=C(),f.c(),r=he(),w(e,"title","Switch theme"),w(e,"class","svelte-qbew1c")},m(c,d){b(c,e,d),b(c,n,d),f.m(c,d),b(c,r,d),o||(s=I(e,"click",t[1]),o=!0)},p(c,[d]){a!==(a=i(c))&&(f.d(1),f=a(c),f&&(f.c(),f.m(r.parentNode,r)))},i:h,o:h,d(c){c&&(g(e),g(n),g(r)),f.d(c),o=!1,s()}}}function Ne(t,e,n){let r=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");return[r,()=>{n(0,r=r=="light"?"dark":"light"),localStorage.setItem("theme",r)}]}class ve extends V{constructor(e){super(),U(this,e,Ne,Ie,B,{})}}const O=[];function te(t,e=h){let n;const r=new Set;function o(a){if(B(t,a)&&(t=a,n)){const f=!O.length;for(const c of r)c[1](),O.push(c,t);if(f){for(let c=0;c<O.length;c+=2)O[c][0](O[c+1]);O.length=0}}}function s(a){o(a(t))}function i(a,f=h){const c=[a,f];return r.add(c),r.size===1&&(n=e(o,s)||h),a(t),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:o,update:s,subscribe:i}}const A=te(!1),se=te("192.168.4.7"),ae=te("http://192.168.4.1");function Oe(t){let e;return{c(){e=_("p"),e.textContent="Disconnected",w(e,"class","warning")},m(n,r){b(n,e,r)},p:h,d(n){n&&g(e)}}}function Le(t){let e,n,r,o;return{c(){e=_("p"),n=S("Disconnected ("),r=S(t[1]),o=S(")"),w(e,"class","warning")},m(s,i){b(s,e,i),p(e,n),p(e,r),p(e,o)},p(s,i){i&2&&K(r,s[1])},d(s){s&&g(e)}}}function Te(t){let e,n,r;return{c(){e=_("p"),n=S("Connected to "),r=S(t[4]),w(e,"class","success")},m(o,s){b(o,e,s),p(e,n),p(e,r)},p(o,s){s&16&&K(r,o[4])},d(o){o&&g(e)}}}function je(t){let e;return{c(){e=_("p"),e.textContent="Connecting..."},m(n,r){b(n,e,r)},p:h,d(n){n&&g(e)}}}function Ae(t){let e,n,r,o,s,i,a,f,c;function d(u,k){return u[2]?je:u[3]?Te:u[1]!=""?Le:Oe}let l=d(t),m=l(t);return{c(){e=_("div"),n=_("h2"),n.textContent="Connect camera",r=C(),o=_("input"),s=C(),i=_("button"),i.textContent="Connect",a=C(),m.c(),w(o,"placeholder","Camera IP address"),w(e,"class","section")},m(u,k){b(u,e,k),p(e,n),p(e,r),p(e,o),J(o,t[0]),p(e,s),p(e,i),p(e,a),m.m(e,null),f||(c=[I(o,"input",t[6]),I(i,"click",t[5])],f=!0)},p(u,[k]){k&1&&o.value!==u[0]&&J(o,u[0]),l===(l=d(u))&&m?m.p(u,k):(m.d(1),m=l(u),m&&(m.c(),m.m(e,null)))},i:h,o:h,d(u){u&&g(e),m.d(),f=!1,N(c)}}}function Me(t,e,n){let r,o,s;M(t,A,l=>n(3,r=l)),M(t,se,l=>n(4,o=l)),M(t,ae,l=>n(7,s=l));let i=o,a="",f=!1;const c=async()=>{z(se,o=i,o),n(2,f=!0);try{const l=await fetch(`${s}/connect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cameraIP:o})});l.ok?z(A,r=!0,r):(n(1,a=`${l.status} error, ${await l.text()}`),z(A,r=!1,r))}catch{n(1,a="No response from ESP"),z(A,r=!1,r)}n(2,f=!1)};function d(){i=this.value,n(0,i)}return[i,a,f,r,o,c,d]}class qe extends V{constructor(e){super(),U(this,e,Me,Ae,B,{})}}function Be(t){let e,n,r;return{c(){e=_("button"),e.textContent="Start"},m(o,s){b(o,e,s),n||(r=I(e,"click",t[5]),n=!0)},p:h,d(o){o&&g(e),n=!1,r()}}}function Re(t){let e,n,r;return{c(){e=_("button"),e.textContent="Stop"},m(o,s){b(o,e,s),n||(r=I(e,"click",t[6]),n=!0)},p:h,d(o){o&&g(e),n=!1,r()}}}function ze(t){let e,n;return{c(){e=_("p"),n=S(t[1]),w(e,"class","success")},m(r,o){b(r,e,o),p(e,n)},p(r,o){o&2&&K(n,r[1])},d(r){r&&g(e)}}}function De(t){let e,n;return{c(){e=_("p"),n=S(t[1]),w(e,"class","warning")},m(r,o){b(r,e,o),p(e,n)},p(r,o){o&2&&K(n,r[1])},d(r){r&&g(e)}}}function Ge(t){let e;return{c(){e=_("p"),e.textContent="Loading..."},m(n,r){b(n,e,r)},p:h,d(n){n&&g(e)}}}function Je(t){let e,n,r,o,s,i,a,f,c,d;function l(y,P){return y[3]?Re:Be}let m=l(t),u=m(t);function k(y,P){return y[4]?Ge:y[2]?De:ze}let R=k(t),$=R(t);return{c(){e=_("div"),n=_("h2"),n.textContent="Intervalometer",r=C(),o=_("input"),s=C(),u.c(),i=C(),a=_("button"),a.textContent="Refresh status",f=C(),$.c(),w(o,"type","number"),w(o,"placeholder","Interval in seconds"),w(e,"class","section")},m(y,P){b(y,e,P),p(e,n),p(e,r),p(e,o),J(o,t[0]),p(e,s),u.m(e,null),p(e,i),p(e,a),p(e,f),$.m(e,null),c||(d=[I(o,"input",t[8]),I(a,"click",t[7])],c=!0)},p(y,[P]){P&1&&le(o.value)!==y[0]&&J(o,y[0]),m===(m=l(y))&&u?u.p(y,P):(u.d(1),u=m(y),u&&(u.c(),u.m(e,i))),R===(R=k(y))&&$?$.p(y,P):($.d(1),$=R(y),$&&($.c(),$.m(e,null)))},i:h,o:h,d(y){y&&g(e),u.d(),$.d(),c=!1,N(d)}}}function Fe(t,e,n){let r;M(t,ae,u=>n(9,r=u));let o=35,s="",i=!1,a=!1,f=!1;const c=async()=>{n(4,f=!0);try{const u=await fetch(`${r}/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({intervalSec:o})});u.ok?(n(1,s=await u.text()),n(3,a=!0),n(2,i=!1)):(n(1,s=`${u.status} error, ${await u.text()}`),n(2,i=!0))}catch{n(1,s="No response from ESP"),n(2,i=!0)}n(4,f=!1)},d=async()=>{n(4,f=!0);try{const u=await fetch(`${r}/stop`,{method:"GET"});u.ok?(n(1,s=await u.text()),n(3,a=!1),n(2,i=!1)):(n(1,s=`${u.status} error, ${await u.text()}`),n(2,i=!0))}catch{n(1,s="No response from ESP"),n(2,i=!0)}n(4,f=!1)},l=async()=>{n(4,f=!0);try{const u=await fetch(`${r}/getStatus`,{method:"GET"});if(u.ok){const k=await u.json();n(1,s=`Number of shots: ${k.numShots}
Status code: ${k.errorCode}
Status message: ${k.errorMsg}`),n(2,i=!1)}else n(1,s=`${u.status} error, ${await u.text()}`),n(2,i=!0)}catch{n(1,s="No response from ESP"),n(2,i=!0)}n(4,f=!1)};function m(){o=le(this.value),n(0,o)}return[o,s,i,a,f,c,d,l,m]}class He extends V{constructor(e){super(),U(this,e,Fe,Je,B,{})}}function ce(t){let e,n;return e=new He({}),{c(){Z(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},i(r){n||(x(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function Ke(t){let e,n,r,o,s,i,a,f,c;s=new ve({}),a=new qe({});let d=t[0]&&ce();return{c(){e=_("main"),n=_("div"),r=_("h1"),r.textContent="ESP8266 Intervalometer",o=C(),Z(s.$$.fragment),i=C(),Z(a.$$.fragment),f=C(),d&&d.c(),D(n,"display","flex"),D(n,"flex-direction","row"),D(n,"justify-content","space-between"),D(n,"column-gap","8px")},m(l,m){b(l,e,m),p(e,n),p(n,r),p(n,o),F(s,n,null),p(e,i),F(a,e,null),p(e,f),d&&d.m(e,null),c=!0},p(l,[m]){l[0]?d?m&1&&x(d,1):(d=ce(),d.c(),x(d,1),d.m(e,null)):d&&(Ce(),j(d,1,1,()=>{d=null}),$e())},i(l){c||(x(s.$$.fragment,l),x(a.$$.fragment,l),x(d),c=!0)},o(l){j(s.$$.fragment,l),j(a.$$.fragment,l),j(d),c=!1},d(l){l&&g(e),H(s),H(a),d&&d.d()}}}function Ue(t,e,n){let r;return M(t,A,o=>n(0,r=o)),[r]}class Ve extends V{constructor(e){super(),U(this,e,Ue,Ke,B,{})}}new Ve({target:document.getElementById("app")});</script>
    <style>:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;font-size:16px;box-sizing:border-box;color:var(--gray-5);background-color:var(--gray-95)}*,*:before,*:after{box-sizing:inherit}body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:400}ol,ul{list-style:none}img{max-width:100%;height:auto}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex}main{display:flex;flex-direction:column;row-gap:32px}.section{border-style:solid;border-width:2px;border-color:var(--gray-50);border-radius:16px;padding:16px;display:flex;flex-direction:column;row-gap:16px}#app{width:100%;max-width:480px;margin:0 auto;padding:2rem}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;color:var(--gray-95);background-color:var(--gray-5);cursor:pointer;transition:background-color .2s}button:hover{background-color:var(--gray-35)}input{border-width:2px;border-color:transparent;border-style:solid;border-radius:8px;padding:.6em;outline:none;font-size:1em;font-family:inherit;color:var(--gray-5);background-color:var(--gray-85)}input:hover{border-color:var(--gray-65)}input:focus{border-color:var(--gray-50)}.success{color:var(--green-5)}.warning{color:var(--red-5)}p{white-space:pre-line}:root{--black:#121212;--white:#e6e6e6;--dark:#4c4c4c;--light:#a5a5a5;--darker:#2d2d2d;--lighter:#c5c5c5;--medium:#888888;--light-red:#ff8484;--dark-red:#b70000;--light-green:#87ff85;--dark-green:#028100}button.svelte-qbew1c{background-color:transparent;padding:8px;min-width:48px}button.svelte-qbew1c:hover{background-color:var(--gray-65)}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
)rawliteral";

const char icon_svg[] PROGMEM = R"rawliteral(
<svg class="iconify iconify--logos" width="32" height="32" aria-hidden="true" preserveAspectRatio="xMidYMid" role="img" version="1.1" viewBox="0 0 256.96 257" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient id="radialGradient9277" cx="128.48" cy="128.5" r="96.375" gradientUnits="userSpaceOnUse"><stop stop-color="#e6e6e6" offset="0"/><stop stop-color="#c6c6c6" offset=".67716"/><stop stop-color="#a5a5a5" offset="1"/></radialGradient><clipPath id="clipPath10832"><circle cx="128.48" cy="128.5" r="128.5" fill="none" style="paint-order:normal"/></clipPath></defs><g clip-path="url(#clipPath10832)"><rect x="-.01819" width="257" height="257" fill="#121212" style="paint-order:normal"/><circle cx="128.48" cy="128.5" r="96.375" fill="url(#radialGradient9277)" style="paint-order:normal"/><circle cx="96.357" cy="160.62" r="96.375" fill="#121212" style="paint-order:normal"/></g></svg>
)rawliteral";