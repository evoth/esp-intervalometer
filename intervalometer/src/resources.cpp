#include "resources.h"

const char indexHtml[] PROGMEM = R"rawliteral(
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESP8266 Intervalometer</title>
    <script type="module">var xe=Object.defineProperty;var et=(t,e,n)=>e in t?xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ge=(t,e,n)=>(et(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function S(){}const tt=t=>t;function nt(t,e){for(const n in e)t[n]=e[n];return t}function ze(t){return t()}function Ie(){return Object.create(null)}function H(t){t.forEach(ze)}function ke(t){return typeof t=="function"}function W(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function rt(t){return Object.keys(t).length===0}function st(t,...e){if(t==null){for(const r of e)r(void 0);return S}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function M(t,e,n){t.$$.on_destroy.push(st(e,n))}function We(t,e,n,r){if(t){const s=Ke(t,e,n,r);return t[0](s)}}function Ke(t,e,n,r){return t[1]&&r?nt(n.ctx.slice(),t[1](r(e))):n.ctx}function He(t,e,n,r){if(t[2]&&r){const s=t[2](r(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],l=Math.max(e.dirty.length,s.length);for(let i=0;i<l;i+=1)o[i]=e.dirty[i]|s[i];return o}return e.dirty|s}return e.dirty}function Ve(t,e,n,r,s,o){if(s){const l=Ke(e,n,r,o);t.p(l,s)}}function Ge(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Ee(t){return t??""}function R(t,e,n){return t.set(n),e}const Qe=typeof window<"u";let ot=Qe?()=>window.performance.now():()=>Date.now(),Ce=Qe?t=>requestAnimationFrame(t):S;const ne=new Set;function Xe(t){ne.forEach(e=>{e.c(t)||(ne.delete(e),e.f())}),ne.size!==0&&Ce(Xe)}function it(t){let e;return ne.size===0&&Ce(Xe),{promise:new Promise(n=>{ne.add(e={c:t,f:n})}),abort(){ne.delete(e)}}}function C(t,e){t.appendChild(e)}function Ye(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function lt(t){const e=k("style");return e.textContent="/* empty */",ut(Ye(t),e),e.sheet}function ut(t,e){return C(t.head||t,e),e.sheet}function g(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function k(t){return document.createElement(t)}function Pe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function v(t){return document.createTextNode(t)}function I(){return v(" ")}function oe(){return v("")}function F(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function re(t){return t===""?null:+t}function ct(t){return Array.from(t.childNodes)}function z(t,e){e=""+e,t.data!==e&&(t.data=e)}function T(t,e){t.value=e??""}function Z(t,e,n){t.classList.toggle(e,!!n)}function ft(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}const _e=new Map;let be=0;function at(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function dt(t,e){const n={stylesheet:lt(e),rules:{}};return _e.set(t,n),n}function Oe(t,e,n,r,s,o,l,i=0){const a=16.666/r;let u=`{
`;for(let _=0;_<=1;_+=a){const h=e+(n-e)*o(_);u+=_*100+`%{${l(h,1-h)}}
`}const m=u+`100% {${l(n,1-n)}}
}`,d=`__svelte_${at(m)}_${i}`,f=Ye(t),{stylesheet:c,rules:p}=_e.get(f)||dt(f,t);p[d]||(p[d]=!0,c.insertRule(`@keyframes ${d} ${m}`,c.cssRules.length));const $=t.style.animation||"";return t.style.animation=`${$?`${$}, `:""}${d} ${r}ms linear ${s}ms 1 both`,be+=1,d}function pt(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),s=n.length-r.length;s&&(t.style.animation=r.join(", "),be-=s,be||mt())}function mt(){Ce(()=>{be||(_e.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&b(e)}),_e.clear())})}let we;function le(t){we=t}const te=[],Le=[];let se=[];const Me=[],_t=Promise.resolve();let ye=!1;function bt(){ye||(ye=!0,_t.then(Ze))}function ue(t){se.push(t)}const he=new Set;let x=0;function Ze(){if(x!==0)return;const t=we;do{try{for(;x<te.length;){const e=te[x];x++,le(e),gt(e.$$)}}catch(e){throw te.length=0,x=0,e}for(le(null),te.length=0,x=0;Le.length;)Le.pop()();for(let e=0;e<se.length;e+=1){const n=se[e];he.has(n)||(he.add(n),n())}se.length=0}while(te.length);for(;Me.length;)Me.pop()();ye=!1,he.clear(),le(t)}function gt(t){if(t.fragment!==null){t.update(),H(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ue)}}function ht(t){const e=[],n=[];se.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),se=e}let ie;function $t(){return ie||(ie=Promise.resolve(),ie.then(()=>{ie=null})),ie}function $e(t,e,n){t.dispatchEvent(ft(`${e?"intro":"outro"}${n}`))}const pe=new Set;let q;function Se(){q={r:0,c:[],p:q}}function ve(){q.r||H(q.c),q=q.p}function N(t,e){t&&t.i&&(pe.delete(t),t.i(e))}function P(t,e,n,r){if(t&&t.o){if(pe.has(t))return;pe.add(t),q.c.push(()=>{pe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const yt={duration:0};function Fe(t,e,n,r){let o=e(t,n,{direction:"both"}),l=r?0:1,i=null,a=null,u=null,m;function d(){u&&pt(t,u)}function f(p,$){const _=p.b-l;return $*=Math.abs(_),{a:l,b:p.b,d:_,duration:$,start:p.start,end:p.start+$,group:p.group}}function c(p){const{delay:$=0,duration:_=300,easing:h=tt,tick:O=S,css:X}=o||yt,L={start:ot()+$,b:p};p||(L.group=q,q.r+=1),"inert"in t&&(p?m!==void 0&&(t.inert=m):(m=t.inert,t.inert=!0)),i||a?a=L:(X&&(d(),u=Oe(t,l,p,_,$,h,X)),p&&O(0,1),i=f(L,_),ue(()=>$e(t,p,"start")),it(Q=>{if(a&&Q>a.start&&(i=f(a,_),a=null,$e(t,i.b,"start"),X&&(d(),u=Oe(t,l,i.b,i.duration,0,h,o.css))),i){if(Q>=i.end)O(l=i.b,1-l),$e(t,i.b,"end"),a||(i.b?d():--i.group.r||H(i.group.c)),i=null;else if(Q>=i.start){const Y=Q-i.start;l=i.a+i.d*h(Y/i.duration),O(l,1-l)}}return!!(i||a)}))}return{run(p){ke(o)?$t().then(()=>{o=o({direction:p?"in":"out"}),c(p)}):c(p)},end(){d(),i=a=null}}}function A(t){t&&t.c()}function U(t,e,n){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),ue(()=>{const o=t.$$.on_mount.map(ze).filter(ke);t.$$.on_destroy?t.$$.on_destroy.push(...o):H(o),t.$$.on_mount=[]}),s.forEach(ue)}function J(t,e){const n=t.$$;n.fragment!==null&&(ht(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kt(t,e){t.$$.dirty[0]===-1&&(te.push(t),bt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(t,e,n,r,s,o,l=null,i=[-1]){const a=we;le(t);const u=t.$$={fragment:null,ctx:[],props:o,update:S,not_equal:s,bound:Ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Ie(),dirty:i,skip_bound:!1,root:e.target||a.$$.root};l&&l(u.root);let m=!1;if(u.ctx=n?n(t,e.props||{},(d,f,...c)=>{const p=c.length?c[0]:f;return u.ctx&&s(u.ctx[d],u.ctx[d]=p)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](p),m&&kt(t,d)),f}):[],u.update(),m=!0,H(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const d=ct(e.target);u.fragment&&u.fragment.l(d),d.forEach(b)}else u.fragment&&u.fragment.c();e.intro&&N(t.$$.fragment),U(t,e.target,e.anchor),Ze()}le(a)}class G{constructor(){ge(this,"$$");ge(this,"$$set")}$destroy(){J(this,1),this.$destroy=S}$on(e,n){if(!ke(n))return S;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!rt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ct="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ct);function wt(t){let e,n,r;return{c(){e=k("button"),e.innerHTML='<img src="/icon.svg" alt="Crescent icon"/>',y(e,"title","Switch theme"),y(e,"class","svelte-1oalwmk")},m(s,o){g(s,e,o),n||(r=F(e,"click",t[0]),n=!0)},p:S,i:S,o:S,d(s){s&&b(e),n=!1,r()}}}function St(t,e,n){let{theme:r=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}=e;const s=()=>{const l=window.document.documentElement.classList;r=="dark"?l.add("dark"):l.remove("dark")},o=()=>{n(1,r=r=="light"?"dark":"light"),localStorage.setItem("theme",r),s()};return s(),t.$$set=l=>{"theme"in l&&n(1,r=l.theme)},[o,r]}class vt extends G{constructor(e){super(),V(this,e,St,wt,W,{theme:1})}}const ee=[];function fe(t,e=S){let n;const r=new Set;function s(i){if(W(t,i)&&(t=i,n)){const a=!ee.length;for(const u of r)u[1](),ee.push(u,t);if(a){for(let u=0;u<ee.length;u+=2)ee[u][0](ee[u+1]);ee.length=0}}}function o(i){s(i(t))}function l(i,a=S){const u=[i,a];return r.add(u),r.size===1&&(n=e(s,o)||S),i(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:l}}const me=fe(!1),De=fe("192.168.4.1"),j=fe({statusCode:0,statusMsg:"Page loaded.",sec:0,ms:0,cameraConnected:!1,intervalSec:35,isRunning:!1,cameraIP:"192.168.4.7",numShots:0,timeUntilNext:0,bulbMode:!1,bulbSec:30,timeUntilRelease:0,duration:0,timeUntilCompletion:0,shutterIsPressed:!1}),D=fe(!1),ce=fe();function Nt(t){const e=t-1;return e*e*e+1}function Re(t,{delay:e=0,duration:n=400,easing:r=Nt,axis:s="y"}={}){const o=getComputedStyle(t),l=+o.opacity,i=s==="y"?"height":"width",a=parseFloat(o[i]),u=s==="y"?["top","bottom"]:["left","right"],m=u.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),d=parseFloat(o[`padding${m[0]}`]),f=parseFloat(o[`padding${m[1]}`]),c=parseFloat(o[`margin${m[0]}`]),p=parseFloat(o[`margin${m[1]}`]),$=parseFloat(o[`border${m[0]}Width`]),_=parseFloat(o[`border${m[1]}Width`]);return{delay:e,duration:n,easing:r,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*l};${i}: ${h*a}px;padding-${u[0]}: ${h*d}px;padding-${u[1]}: ${h*f}px;margin-${u[0]}: ${h*c}px;margin-${u[1]}: ${h*p}px;border-${u[0]}-width: ${h*$}px;border-${u[1]}-width: ${h*_}px;`}}const It=t=>({}),Ue=t=>({});function Je(t){let e,n,r,s;const o=t[4].default,l=We(o,t,t[3],null);return{c(){e=k("div"),l&&l.c(),y(e,"id",n=`${t[0]}-body`),y(e,"class","body svelte-sext2k")},m(i,a){g(i,e,a),l&&l.m(e,null),s=!0},p(i,a){l&&l.p&&(!s||a&8)&&Ve(l,o,i,i[3],s?He(o,i[3],a,null):Ge(i[3]),null),(!s||a&1&&n!==(n=`${i[0]}-body`))&&y(e,"id",n)},i(i){s||(N(l,i),i&&ue(()=>{s&&(r||(r=Fe(e,Re,{duration:300},!0)),r.run(1))}),s=!0)},o(i){P(l,i),i&&(r||(r=Fe(e,Re,{duration:300},!1)),r.run(0)),s=!1},d(i){i&&b(e),l&&l.d(i),i&&r&&r.end()}}}function Et(t){let e,n,r,s,o,l,i,a,u,m,d,f,c;const p=t[4].heading,$=We(p,t,t[3],Ue);let _=t[1]&&Je(t);return{c(){e=k("div"),n=k("button"),$&&$.c(),r=I(),s=k("div"),o=Pe("svg"),l=Pe("path"),m=I(),_&&_.c(),y(l,"d","M15 18l-6-6 6-6"),y(o,"class",i=Ee(t[1]?"rotated":"")+" svelte-sext2k"),y(o,"xmlns","http://www.w3.org/2000/svg"),y(o,"width","24"),y(o,"height","24"),y(o,"viewBox","0 0 24 24"),y(o,"fill","none"),y(o,"stroke","currentColor"),y(o,"stroke-width","2"),y(o,"stroke-linecap","round"),y(o,"stroke-linejoin","round"),y(s,"class","arrow-container svelte-sext2k"),y(n,"class","heading svelte-sext2k"),y(n,"title",a=t[1]?"Collapse section":"Expand section"),y(n,"aria-expanded",t[1]),y(n,"aria-controls",u=`${t[0]}-body`),y(e,"class","section svelte-sext2k")},m(h,O){g(h,e,O),C(e,n),$&&$.m(n,null),C(n,r),C(n,s),C(s,o),C(o,l),C(e,m),_&&_.m(e,null),d=!0,f||(c=F(n,"click",t[2]),f=!0)},p(h,[O]){$&&$.p&&(!d||O&8)&&Ve($,p,h,h[3],d?He(p,h[3],O,It):Ge(h[3]),Ue),(!d||O&2&&i!==(i=Ee(h[1]?"rotated":"")+" svelte-sext2k"))&&y(o,"class",i),(!d||O&2&&a!==(a=h[1]?"Collapse section":"Expand section"))&&y(n,"title",a),(!d||O&2)&&y(n,"aria-expanded",h[1]),(!d||O&1&&u!==(u=`${h[0]}-body`))&&y(n,"aria-controls",u),h[1]?_?(_.p(h,O),O&2&&N(_,1)):(_=Je(h),_.c(),N(_,1),_.m(e,null)):_&&(Se(),P(_,1,1,()=>{_=null}),ve())},i(h){d||(N($,h),N(_),d=!0)},o(h){P($,h),P(_),d=!1},d(h){h&&b(e),$&&$.d(h),_&&_.d(),f=!1,c()}}}function Pt(t,e,n){let{$$slots:r={},$$scope:s}=e,{name:o}=e;const l=`${o}-expanded`;let i;localStorage.getItem(l)?i=localStorage.getItem(l)==String(!0):i=!0;const a=()=>{n(1,i=!i),o&&localStorage.setItem(l,String(i))};return t.$$set=u=>{"name"in u&&n(0,o=u.name),"$$scope"in u&&n(3,s=u.$$scope)},[o,i,a,s,r]}class ae extends G{constructor(e){super(),V(this,e,Pt,Et,W,{name:0})}}function Ot(t){let e;return{c(){e=k("p"),e.textContent="Disconnected",y(e,"class","error")},m(n,r){g(n,e,r)},p:S,d(n){n&&b(e)}}}function Lt(t){let e,n,r=t[2].cameraIP+"",s;return{c(){e=k("p"),n=v("Connected to "),s=v(r),y(e,"class","success")},m(o,l){g(o,e,l),C(e,n),C(e,s)},p(o,l){l&4&&r!==(r=o[2].cameraIP+"")&&z(s,r)},d(o){o&&b(e)}}}function Mt(t){let e;return{c(){e=k("p"),e.textContent="Connecting..."},m(n,r){g(n,e,r)},p:S,d(n){n&&b(e)}}}function Ft(t){let e,n,r,s,o,l,i,a,u,m;function d(p,$){return p[1]?Mt:p[2].cameraConnected?Lt:Ot}let f=d(t),c=f(t);return{c(){e=k("label"),n=k("span"),n.textContent="IP address:",r=I(),s=k("input"),o=I(),l=k("button"),l.textContent="Connect",i=I(),c.c(),a=oe(),y(s,"placeholder","Camera IP address")},m(p,$){g(p,e,$),C(e,n),C(e,r),C(e,s),T(s,t[0]),g(p,o,$),g(p,l,$),g(p,i,$),c.m(p,$),g(p,a,$),u||(m=[F(s,"input",t[4]),F(l,"click",t[3])],u=!0)},p(p,$){$&1&&s.value!==p[0]&&T(s,p[0]),f===(f=d(p))&&c?c.p(p,$):(c.d(1),c=f(p),c&&(c.c(),c.m(a.parentNode,a)))},d(p){p&&(b(e),b(o),b(l),b(i),b(a)),c.d(p),u=!1,H(m)}}}function Dt(t){let e;return{c(){e=k("h2"),e.textContent="Connect camera",y(e,"slot","heading")},m(n,r){g(n,e,r)},p:S,d(n){n&&b(e)}}}function Rt(t){let e,n;return e=new ae({props:{name:"connect-camera",$$slots:{heading:[Dt],default:[Ft]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(r,s){U(e,r,s),n=!0},p(r,[s]){const o={};s&135&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function Ut(t,e,n){let r,s,o;M(t,D,m=>n(5,r=m)),M(t,ce,m=>n(6,s=m)),M(t,j,m=>n(2,o=m));let l,i;j.subscribe(m=>n(0,l=m.cameraIP||l)),D.subscribe(m=>n(1,i=m&&i));const a=()=>{s.send(JSON.stringify({command:"connect",cameraIP:l})),n(1,i=R(D,r=!0,r))};function u(){l=this.value,n(0,l)}return[l,i,o,a,u]}class Jt extends G{constructor(e){super(),V(this,e,Ut,Rt,W,{})}}function At(t){let e,n,r;return{c(){e=k("button"),e.textContent="Disconnect"},m(s,o){g(s,e,o),n||(r=F(e,"click",t[5]),n=!0)},p:S,d(s){s&&b(e),n=!1,r()}}}function Bt(t){let e,n,r;return{c(){e=k("button"),e.textContent="Connect"},m(s,o){g(s,e,o),n||(r=F(e,"click",t[4]),n=!0)},p:S,d(s){s&&b(e),n=!1,r()}}}function Tt(t){let e;return{c(){e=k("p"),e.textContent="Disconnected",y(e,"class","error")},m(n,r){g(n,e,r)},p:S,d(n){n&&b(e)}}}function jt(t){let e,n,r;return{c(){e=k("p"),n=v("Connected to "),r=v(t[3]),y(e,"class","success")},m(s,o){g(s,e,o),C(e,n),C(e,r)},p(s,o){o&8&&z(r,s[3])},d(s){s&&b(e)}}}function qt(t){let e;return{c(){e=k("p"),e.textContent="Connecting..."},m(n,r){g(n,e,r)},p:S,d(n){n&&b(e)}}}function zt(t){let e,n,r,s,o,l,i,a,u;function m(_,h){return!_[2]||_[0]!=_[3]?Bt:At}let d=m(t),f=d(t);function c(_,h){return _[1]?qt:_[2]?jt:Tt}let p=c(t),$=p(t);return{c(){e=k("label"),n=k("span"),n.textContent="IP address:",r=I(),s=k("input"),o=I(),f.c(),l=I(),$.c(),i=oe(),y(s,"placeholder","ESP8266 IP address")},m(_,h){g(_,e,h),C(e,n),C(e,r),C(e,s),T(s,t[0]),g(_,o,h),f.m(_,h),g(_,l,h),$.m(_,h),g(_,i,h),a||(u=F(s,"input",t[6]),a=!0)},p(_,h){h&1&&s.value!==_[0]&&T(s,_[0]),d===(d=m(_))&&f?f.p(_,h):(f.d(1),f=d(_),f&&(f.c(),f.m(l.parentNode,l))),p===(p=c(_))&&$?$.p(_,h):($.d(1),$=p(_),$&&($.c(),$.m(i.parentNode,i)))},d(_){_&&(b(e),b(o),b(l),b(i)),f.d(_),$.d(_),a=!1,u()}}}function Wt(t){let e;return{c(){e=k("h2"),e.textContent="Connect to ESP8266",y(e,"slot","heading")},m(n,r){g(n,e,r)},p:S,d(n){n&&b(e)}}}function Kt(t){let e,n;return e=new ae({props:{name:"connect-esp",$$slots:{heading:[Wt],default:[zt]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(r,s){U(e,r,s),n=!0},p(r,[s]){const o={};s&1039&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function Ht(t,e,n){let r,s,o,l,i;M(t,ce,c=>n(7,r=c)),M(t,me,c=>n(2,s=c)),M(t,D,c=>n(8,o=c)),M(t,j,c=>n(9,l=c)),M(t,De,c=>n(3,i=c));let a=i,u;const m=()=>{R(De,i=a,i),r==null||r.close(),R(ce,r=new WebSocket(`ws://${i}:81`),r),r.addEventListener("message",c=>{R(j,l=JSON.parse(c.data),l),R(D,o=!1,o)}),r.addEventListener("open",c=>{R(me,s=!0,s),n(1,u=!1)}),r.addEventListener("close",c=>{R(me,s=!1,s),n(1,u=!1)}),n(1,u=!0)},d=()=>{r==null||r.close()};m();function f(){a=this.value,n(0,a)}return[a,u,s,i,m,d,f]}class Vt extends G{constructor(e){super(),V(this,e,Ht,Kt,W,{})}}function Gt(t){let e,n,r;return{c(){e=k("button"),e.textContent="Press shutter"},m(s,o){g(s,e,o),n||(r=F(e,"click",t[3]),n=!0)},p:S,d(s){s&&b(e),n=!1,r()}}}function Qt(t){let e,n,r;return{c(){e=k("button"),e.textContent="Release shutter"},m(s,o){g(s,e,o),n||(r=F(e,"click",t[4]),n=!0)},p:S,d(s){s&&b(e),n=!1,r()}}}function Xt(t){let e;return{c(){e=k("p"),e.textContent="Shutter is not pressed."},m(n,r){g(n,e,r)},d(n){n&&b(e)}}}function Yt(t){let e;return{c(){e=k("p"),e.textContent="Shutter is pressed..."},m(n,r){g(n,e,r)},d(n){n&&b(e)}}}function Zt(t){let e;return{c(){e=k("p"),e.textContent="Loading..."},m(n,r){g(n,e,r)},d(n){n&&b(e)}}}function xt(t){let e,n,r,s,o,l;function i(c,p){return c[1].shutterIsPressed?Qt:Gt}let a=i(t),u=a(t);function m(c,p){return c[0]?Zt:c[1].shutterIsPressed?Yt:Xt}let d=m(t),f=d(t);return{c(){e=k("button"),e.textContent="Trigger shutter",n=I(),u.c(),r=I(),f.c(),s=oe()},m(c,p){g(c,e,p),g(c,n,p),u.m(c,p),g(c,r,p),f.m(c,p),g(c,s,p),o||(l=F(e,"click",t[2]),o=!0)},p(c,p){a===(a=i(c))&&u?u.p(c,p):(u.d(1),u=a(c),u&&(u.c(),u.m(r.parentNode,r))),d!==(d=m(c))&&(f.d(1),f=d(c),f&&(f.c(),f.m(s.parentNode,s)))},d(c){c&&(b(e),b(n),b(r),b(s)),u.d(c),f.d(c),o=!1,l()}}}function en(t){let e;return{c(){e=k("h2"),e.textContent="Shutter",y(e,"slot","heading")},m(n,r){g(n,e,r)},p:S,d(n){n&&b(e)}}}function tn(t){let e,n;return e=new ae({props:{name:"shutter",$$slots:{heading:[en],default:[xt]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(r,s){U(e,r,s),n=!0},p(r,[s]){const o={};s&131&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function nn(t,e,n){let r,s,o;M(t,D,m=>n(5,r=m)),M(t,ce,m=>n(6,s=m)),M(t,j,m=>n(1,o=m));let l;return D.subscribe(m=>n(0,l=m&&l)),[l,o,()=>{s.send(JSON.stringify({command:"triggerShutter"})),n(0,l=R(D,r=!0,r))},()=>{s.send(JSON.stringify({command:"pressShutter"})),n(0,l=R(D,r=!0,r))},()=>{s.send(JSON.stringify({command:"releaseShutter"})),n(0,l=R(D,r=!0,r))}]}class rn extends G{constructor(e){super(),V(this,e,nn,tn,W,{})}}function Ae(t){let e,n,r,s,o,l;return{c(){e=k("label"),n=v(`Bulb:\r
      `),r=k("input"),s=v(`\r
      seconds`),y(r,"type","number"),y(r,"step","any"),y(r,"min","1"),y(r,"placeholder","Exposure time in seconds")},m(i,a){g(i,e,a),C(e,n),C(e,r),T(r,t[2]),C(e,s),o||(l=F(r,"input",t[9]),o=!0)},p(i,a){a&4&&re(r.value)!==i[2]&&T(r,i[2])},d(i){i&&b(e),o=!1,l()}}}function sn(t){let e,n,r;return{c(){e=k("button"),e.textContent="Start"},m(s,o){g(s,e,o),n||(r=F(e,"click",t[5]),n=!0)},p:S,d(s){s&&b(e),n=!1,r()}}}function on(t){let e,n,r;return{c(){e=k("button"),e.textContent="Stop"},m(s,o){g(s,e,o),n||(r=F(e,"click",t[6]),n=!0)},p:S,d(s){s&&b(e),n=!1,r()}}}function ln(t){let e;return{c(){e=k("p"),e.textContent="Intervalometer stopped."},m(n,r){g(n,e,r)},d(n){n&&b(e)}}}function un(t){let e;return{c(){e=k("p"),e.textContent="Intervalometer running..."},m(n,r){g(n,e,r)},d(n){n&&b(e)}}}function cn(t){let e;return{c(){e=k("p"),e.textContent="Loading..."},m(n,r){g(n,e,r)},d(n){n&&b(e)}}}function fn(t){let e,n,r,s,o,l,i=t[4].bulbMode?"Disable bulb mode":"Enable bulb mode",a,u,m,d,f,c,p,$,_,h,O,X,L=t[4].bulbMode&&Ae(t);function Q(w,E){return w[4].isRunning?on:sn}let Y=Q(t),B=Y(t);function Ne(w,E){return w[1]?cn:w[4].isRunning?un:ln}let de=Ne(t),K=de(t);return{c(){e=k("label"),n=v(`Interval:\r
    `),r=k("input"),s=v(`\r
    seconds`),o=I(),l=k("button"),a=v(i),u=I(),L&&L.c(),m=I(),d=k("label"),f=v(`Duration:\r
    `),c=k("input"),p=v(`\r
    seconds`),$=I(),B.c(),_=I(),K.c(),h=oe(),y(r,"type","number"),y(r,"step","any"),y(r,"min","1"),y(r,"placeholder","Interval in seconds"),y(c,"type","number"),y(c,"step","any"),y(c,"min","0"),y(c,"placeholder","Duration in seconds")},m(w,E){g(w,e,E),C(e,n),C(e,r),T(r,t[0]),C(e,s),g(w,o,E),g(w,l,E),C(l,a),g(w,u,E),L&&L.m(w,E),g(w,m,E),g(w,d,E),C(d,f),C(d,c),T(c,t[3]),C(d,p),g(w,$,E),B.m(w,E),g(w,_,E),K.m(w,E),g(w,h,E),O||(X=[F(r,"input",t[8]),F(l,"click",t[7]),F(c,"input",t[10])],O=!0)},p(w,E){E&1&&re(r.value)!==w[0]&&T(r,w[0]),E&16&&i!==(i=w[4].bulbMode?"Disable bulb mode":"Enable bulb mode")&&z(a,i),w[4].bulbMode?L?L.p(w,E):(L=Ae(w),L.c(),L.m(m.parentNode,m)):L&&(L.d(1),L=null),E&8&&re(c.value)!==w[3]&&T(c,w[3]),Y===(Y=Q(w))&&B?B.p(w,E):(B.d(1),B=Y(w),B&&(B.c(),B.m(_.parentNode,_))),de!==(de=Ne(w))&&(K.d(1),K=de(w),K&&(K.c(),K.m(h.parentNode,h)))},d(w){w&&(b(e),b(o),b(l),b(u),b(m),b(d),b($),b(_),b(h)),L&&L.d(w),B.d(w),K.d(w),O=!1,H(X)}}}function an(t){let e;return{c(){e=k("h2"),e.textContent="Intervalometer",y(e,"slot","heading")},m(n,r){g(n,e,r)},p:S,d(n){n&&b(e)}}}function dn(t){let e,n;return e=new ae({props:{name:"intervalometer",$$slots:{heading:[an],default:[fn]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(r,s){U(e,r,s),n=!0},p(r,[s]){const o={};s&8223&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function pn(t,e,n){let r,s,o;M(t,D,_=>n(11,r=_)),M(t,ce,_=>n(12,s=_)),M(t,j,_=>n(4,o=_));let l,i,a,u;j.subscribe(_=>{n(0,l=_.intervalSec||l),n(2,a=_.bulbSec||a),n(3,u=_.duration||u)}),D.subscribe(_=>n(1,i=_&&i));const m=()=>{s.send(JSON.stringify({command:"start",intervalSec:l,bulbSec:a,duration:u})),n(1,i=R(D,r=!0,r))},d=()=>{s.send(JSON.stringify({command:"stop"})),n(1,i=R(D,r=!0,r))},f=()=>{o.bulbMode?s.send(JSON.stringify({command:"disableBulb"})):s.send(JSON.stringify({command:"enableBulb"})),n(1,i=R(D,r=!0,r))};function c(){l=re(this.value),n(0,l)}function p(){a=re(this.value),n(2,a)}function $(){u=re(this.value),n(3,u)}return[l,i,a,u,o,m,d,f,c,p,$]}class mn extends G{constructor(e){super(),V(this,e,pn,dn,W,{})}}function Be(t){let e,n,r=t[3].numShots+"",s,o,l=t[0].toFixed(1)+"",i,a,u=t[1].toFixed(1)+"",m,d,f=t[2]>0&&Te(t);return{c(){e=k("p"),n=v("Number of shots: "),s=v(r),o=v(`\r
      Time until next shot: `),i=v(l),a=v(`\r
      Time until shutter release: `),m=v(u),d=I(),f&&f.c()},m(c,p){g(c,e,p),C(e,n),C(e,s),C(e,o),C(e,i),C(e,a),C(e,m),C(e,d),f&&f.m(e,null)},p(c,p){p&8&&r!==(r=c[3].numShots+"")&&z(s,r),p&1&&l!==(l=c[0].toFixed(1)+"")&&z(i,l),p&2&&u!==(u=c[1].toFixed(1)+"")&&z(m,u),c[2]>0?f?f.p(c,p):(f=Te(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&b(e),f&&f.d()}}}function Te(t){let e,n=t[2].toFixed(1)+"",r;return{c(){e=v("Time until completion: "),r=v(n)},m(s,o){g(s,e,o),g(s,r,o)},p(s,o){o&4&&n!==(n=s[2].toFixed(1)+"")&&z(r,n)},d(s){s&&(b(e),b(r))}}}function _n(t){let e,n,r=t[3].statusCode+"",s,o,l=t[3].statusMsg+"",i,a,u,m=t[3].cameraConnected&&Be(t);return{c(){e=k("p"),n=v("Status code: "),s=v(r),o=v(`\r
    Status message: `),i=v(l),a=I(),m&&m.c(),u=oe(),Z(e,"success",t[3].statusCode==200),Z(e,"warning",t[3].statusCode==0),Z(e,"error",t[3].statusCode!=200&&t[3].statusCode!=0)},m(d,f){g(d,e,f),C(e,n),C(e,s),C(e,o),C(e,i),g(d,a,f),m&&m.m(d,f),g(d,u,f)},p(d,f){f&8&&r!==(r=d[3].statusCode+"")&&z(s,r),f&8&&l!==(l=d[3].statusMsg+"")&&z(i,l),f&8&&Z(e,"success",d[3].statusCode==200),f&8&&Z(e,"warning",d[3].statusCode==0),f&8&&Z(e,"error",d[3].statusCode!=200&&d[3].statusCode!=0),d[3].cameraConnected?m?m.p(d,f):(m=Be(d),m.c(),m.m(u.parentNode,u)):m&&(m.d(1),m=null)},d(d){d&&(b(e),b(a),b(u)),m&&m.d(d)}}}function bn(t){let e;return{c(){e=k("h2"),e.textContent="Status",y(e,"slot","heading")},m(n,r){g(n,e,r)},p:S,d(n){n&&b(e)}}}function gn(t){let e,n;return e=new ae({props:{name:"status",$$slots:{heading:[bn],default:[_n]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(r,s){U(e,r,s),n=!0},p(r,[s]){const o={};s&79&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function hn(t,e,n){let r;M(t,j,u=>n(3,r=u));let s,o=0,l=0,i=0,a;return j.subscribe(u=>{s=Date.now(),clearInterval(a),u.isRunning?a=setInterval(()=>{n(0,o=(r.timeUntilNext-(Date.now()-s))/1e3),n(1,l=(r.timeUntilRelease-(Date.now()-s))/1e3),n(2,i=(r.timeUntilCompletion-(Date.now()-s))/1e3)},100):(n(0,o=0),n(1,l=0),n(2,i=0))}),[o,l,i,r]}class $n extends G{constructor(e){super(),V(this,e,hn,gn,W,{})}}function je(t){let e,n,r,s;e=new Jt({});let o=t[1].cameraConnected&&qe();return{c(){A(e.$$.fragment),n=I(),o&&o.c(),r=oe()},m(l,i){U(e,l,i),g(l,n,i),o&&o.m(l,i),g(l,r,i),s=!0},p(l,i){l[1].cameraConnected?o?i&2&&N(o,1):(o=qe(),o.c(),N(o,1),o.m(r.parentNode,r)):o&&(Se(),P(o,1,1,()=>{o=null}),ve())},i(l){s||(N(e.$$.fragment,l),N(o),s=!0)},o(l){P(e.$$.fragment,l),P(o),s=!1},d(l){l&&(b(n),b(r)),J(e,l),o&&o.d(l)}}}function qe(t){let e,n,r,s;return e=new mn({}),r=new rn({}),{c(){A(e.$$.fragment),n=I(),A(r.$$.fragment)},m(o,l){U(e,o,l),g(o,n,l),U(r,o,l),s=!0},i(o){s||(N(e.$$.fragment,o),N(r.$$.fragment,o),s=!0)},o(o){P(e.$$.fragment,o),P(r.$$.fragment,o),s=!1},d(o){o&&b(n),J(e,o),J(r,o)}}}function yn(t){let e,n,r,s,o,l,i,a,u,m,d;o=new vt({}),i=new $n({}),u=new Vt({});let f=t[0]&&je(t);return{c(){e=k("main"),n=k("div"),r=k("h1"),r.textContent="ESP8266 Intervalometer",s=I(),A(o.$$.fragment),l=I(),A(i.$$.fragment),a=I(),A(u.$$.fragment),m=I(),f&&f.c(),y(n,"class","svelte-p108mq"),y(e,"class","svelte-p108mq")},m(c,p){g(c,e,p),C(e,n),C(n,r),C(n,s),U(o,n,null),C(e,l),U(i,e,null),C(e,a),U(u,e,null),C(e,m),f&&f.m(e,null),d=!0},p(c,[p]){c[0]?f?(f.p(c,p),p&1&&N(f,1)):(f=je(c),f.c(),N(f,1),f.m(e,null)):f&&(Se(),P(f,1,1,()=>{f=null}),ve())},i(c){d||(N(o.$$.fragment,c),N(i.$$.fragment,c),N(u.$$.fragment,c),N(f),d=!0)},o(c){P(o.$$.fragment,c),P(i.$$.fragment,c),P(u.$$.fragment,c),P(f),d=!1},d(c){c&&b(e),J(o),J(i),J(u),f&&f.d()}}}function kn(t,e,n){let r,s;return M(t,me,o=>n(0,r=o)),M(t,j,o=>n(1,s=o)),[r,s]}class Cn extends G{constructor(e){super(),V(this,e,kn,yn,W,{})}}new Cn({target:document.getElementById("app")});</script>
    <style>:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;font-size:16px;box-sizing:border-box;color:var(--gray-5);background-color:var(--gray-95);transition:background-color .2s,color .2s}*,*:before,*:after{box-sizing:inherit}body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:400}ol,ul{list-style:none}img{max-width:100%;height:auto}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex}:root{--black: #121212;--white: #f0f0f0;--dark: #4c4c4c;--light: #acacac;--darker: #2d2d2d;--darkest: #1e1e1e;--lighter: #d1d1d1;--lightest: #e0e0e0;--medium: #888888;--light-red: #ff8484;--dark-red: #b70000;--light-green: #87ff85;--dark-green: #028100;--light-yellow: #fffd85;--dark-yellow: #768500}:root:not(.dark){--gray-5: var(--black);--gray-10: var(--darkest);--gray-15: var(--darker);--gray-35: var(--dark);--gray-50: var(--medium);--gray-65: var(--light);--gray-85: var(--lighter);--gray-90: var(--lightest);--gray-95: var(--white);--green-5: var(--dark-green);--green-95: var(--light-green);--red-5: var(--dark-red);--red-95: var(--light-red);--yellow-5: var(--dark-yellow);--yellow-95: var(--light-yellow)}:root.dark{--gray-5: var(--white);--gray-10: var(--lightest);--gray-15: var(--lighter);--gray-35: var(--light);--gray-50: var(--medium);--gray-65: var(--dark);--gray-85: var(--darker);--gray-90: var(--darkest);--gray-95: var(--black);--green-5: var(--light-green);--green-95: var(--dark-green);--red-5: var(--light-red);--red-95: var(--dark-red);--yellow-5: var(--light-yellow);--yellow-95: var(--dark-yellow)}#app{width:100%;max-width:480px;margin:0 auto;padding:2rem}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;color:var(--gray-95);background-color:var(--gray-5);cursor:pointer;transition:background-color .2s,color .2s}button:hover{background-color:var(--gray-35)}button:disabled{background-color:var(--gray-50);cursor:not-allowed}label{display:flex;align-items:center;gap:16px;background-color:var(--gray-90);padding:6px 16px;border-radius:8px;transition:background-color .2s}label>span{flex-shrink:0}input{border-width:2px;border-color:transparent;border-style:solid;border-radius:8px;padding:.6em;outline:none;font-size:inherit;font-family:inherit;color:var(--gray-5);background-color:var(--gray-85);transition:background-color .2s,color .2s,border-color .2s;width:100%}input:hover{border-color:var(--gray-65)}input:focus{border-color:var(--gray-50)}input:disabled{border-color:transparent;color:var(--gray-50);cursor:not-allowed}.success{color:var(--green-5)}.warning{color:var(--yellow-5)}.error{color:var(--red-5)}p{white-space:pre-line;overflow-wrap:break-word}button.svelte-1oalwmk{background-color:transparent;padding:8px;min-width:48px;display:flex;align-items:center}button.svelte-1oalwmk:hover{background-color:var(--gray-65)}.section.svelte-sext2k{border-style:solid;border-width:2px;border-color:var(--gray-50);border-radius:16px;display:flex;flex-direction:column;padding:16px 16px 0;transition:border-color .2s}.body.svelte-sext2k{display:flex;flex-direction:column;row-gap:16px;padding-bottom:16px}.heading.svelte-sext2k{all:unset;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-bottom:16px}.arrow-container.svelte-sext2k{transition:background-color .2s;background-color:transparent;border-radius:8px;padding:4px;display:flex;align-items:center}.arrow-container.svelte-sext2k:hover{background-color:var(--gray-65)}svg.svelte-sext2k{transition:transform .3s;color:inherit}svg.rotated.svelte-sext2k{transform:rotate(-90deg)}div.svelte-p108mq{display:flex;flex-direction:row;justify-content:space-between;column-gap:8px}main.svelte-p108mq{display:flex;flex-direction:column;row-gap:32px}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
)rawliteral";

const char iconSvg[] PROGMEM = R"rawliteral(
<svg class="iconify iconify--logos" width="32" height="32" aria-hidden="true" preserveAspectRatio="xMidYMid" role="img" version="1.1" viewBox="0 0 256.96 257" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient id="radialGradient9277" cx="128.48" cy="128.5" r="96.375" gradientUnits="userSpaceOnUse"><stop stop-color="#e6e6e6" offset="0"/><stop stop-color="#c6c6c6" offset=".67716"/><stop stop-color="#a5a5a5" offset="1"/></radialGradient><clipPath id="clipPath10832"><circle cx="128.48" cy="128.5" r="128.5" fill="none" style="paint-order:normal"/></clipPath></defs><g clip-path="url(#clipPath10832)"><rect x="-.01819" width="257" height="257" fill="#121212" style="paint-order:normal"/><circle cx="128.48" cy="128.5" r="96.375" fill="url(#radialGradient9277)" style="paint-order:normal"/><circle cx="96.357" cy="160.62" r="96.375" fill="#121212" style="paint-order:normal"/></g></svg>
)rawliteral";