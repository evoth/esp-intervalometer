#include "resources.h"

const char indexHtml[] PROGMEM = R"rawliteral(
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESP8266 Intervalometer</title>
    <script type="module">var Ct=Object.defineProperty;var St=(t,e,n)=>e in t?Ct(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ae=(t,e,n)=>(St(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function P(){}const mt=t=>t;function It(t,e){for(const n in e)t[n]=e[n];return t}function ht(t){return t()}function Ve(){return Object.create(null)}function Z(t){t.forEach(ht)}function me(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Nt(t){return Object.keys(t).length===0}function Ot(t,...e){if(t==null){for(const o of e)o(void 0);return P}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function U(t,e,n){t.$$.on_destroy.push(Ot(e,n))}function ye(t,e,n,o){if(t){const s=gt(t,e,n,o);return t[0](s)}}function gt(t,e,n,o){return t[1]&&o?It(n.ctx.slice(),t[1](o(e))):n.ctx}function $e(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],l=Math.max(e.dirty.length,s.length);for(let r=0;r<l;r+=1)i[r]=e.dirty[r]|s[r];return i}return e.dirty|s}return e.dirty}function Ce(t,e,n,o,s,i){if(s){const l=gt(e,n,o,i);t.p(l,s)}}function Se(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function Ke(t){return t??""}function W(t,e,n){return t.set(n),e}function Pt(t){return t&&me(t.destroy)?t.destroy:P}const bt=typeof window<"u";let Et=bt?()=>window.performance.now():()=>Date.now(),ze=bt?t=>requestAnimationFrame(t):P;const fe=new Set;function vt(t){fe.forEach(e=>{e.c(t)||(fe.delete(e),e.f())}),fe.size!==0&&ze(vt)}function Mt(t){let e;return fe.size===0&&ze(vt),{promise:new Promise(n=>{fe.add(e={c:t,f:n})}),abort(){fe.delete(e)}}}function k(t,e){t.appendChild(e)}function wt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Tt(t){const e=y("style");return e.textContent="/* empty */",Lt(wt(t),e),e.sheet}function Lt(t,e){return k(t.head||t,e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode&&t.parentNode.removeChild(t)}function kt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function Me(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t){return document.createTextNode(t)}function O(){return N(" ")}function oe(){return N("")}function A(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function de(t){return t===""?null:+t}function Ut(t){return Array.from(t.childNodes)}function H(t,e){e=""+e,t.data!==e&&(t.data=e)}function ee(t,e){t.value=e??""}function x(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function ie(t,e,n){t.classList.toggle(e,!!n)}function At(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}const Te=new Map;let Le=0;function jt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function qt(t,e){const n={stylesheet:Tt(e),rules:{}};return Te.set(t,n),n}function Ge(t,e,n,o,s,i,l,r=0){const u=16.666/o;let f=`{
`;for(let _=0;_<=1;_+=u){const g=e+(n-e)*i(_);f+=_*100+`%{${l(g,1-g)}}
`}const d=f+`100% {${l(n,1-n)}}
}`,m=`__svelte_${jt(d)}_${r}`,c=wt(t),{stylesheet:h,rules:p}=Te.get(c)||qt(c,t);p[m]||(p[m]=!0,h.insertRule(`@keyframes ${m} ${d}`,h.cssRules.length));const a=t.style.animation||"";return t.style.animation=`${a?`${a}, `:""}${m} ${o}ms linear ${s}ms 1 both`,Le+=1,m}function Dt(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-o.length;s&&(t.style.animation=o.join(", "),Le-=s,Le||Ft())}function Ft(){ze(()=>{Le||(Te.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&v(e)}),Te.clear())})}let Re;function ke(t){Re=t}const ue=[],Ie=[];let ce=[];const De=[],zt=Promise.resolve();let Fe=!1;function Rt(){Fe||(Fe=!0,zt.then(yt))}function pe(t){ce.push(t)}function Je(t){De.push(t)}const je=new Set;let le=0;function yt(){if(le!==0)return;const t=Re;do{try{for(;le<ue.length;){const e=ue[le];le++,ke(e),Jt(e.$$)}}catch(e){throw ue.length=0,le=0,e}for(ke(null),ue.length=0,le=0;Ie.length;)Ie.pop()();for(let e=0;e<ce.length;e+=1){const n=ce[e];je.has(n)||(je.add(n),n())}ce.length=0}while(ue.length);for(;De.length;)De.pop()();Fe=!1,je.clear(),ke(t)}function Jt(t){if(t.fragment!==null){t.update(),Z(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pe)}}function Wt(t){const e=[],n=[];ce.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),ce=e}let we;function Bt(){return we||(we=Promise.resolve(),we.then(()=>{we=null})),we}function qe(t,e,n){t.dispatchEvent(At(`${e?"intro":"outro"}${n}`))}const Pe=new Set;let ne;function he(){ne={r:0,c:[],p:ne}}function ge(){ne.r||Z(ne.c),ne=ne.p}function C(t,e){t&&t.i&&(Pe.delete(t),t.i(e))}function S(t,e,n,o){if(t&&t.o){if(Pe.has(t))return;Pe.add(t),ne.c.push(()=>{Pe.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}const Ht={duration:0};function Ue(t,e,n,o){let i=e(t,n,{direction:"both"}),l=o?0:1,r=null,u=null,f=null,d;function m(){f&&Dt(t,f)}function c(p,a){const _=p.b-l;return a*=Math.abs(_),{a:l,b:p.b,d:_,duration:a,start:p.start,end:p.start+a,group:p.group}}function h(p){const{delay:a=0,duration:_=300,easing:g=mt,tick:I=P,css:R}=i||Ht,D={start:Et()+a,b:p};p||(D.group=ne,ne.r+=1),"inert"in t&&(p?d!==void 0&&(t.inert=d):(d=t.inert,t.inert=!0)),r||u?u=D:(R&&(m(),f=Ge(t,l,p,_,a,g,R)),p&&I(0,1),r=c(D,_),pe(()=>qe(t,p,"start")),Mt($=>{if(u&&$>u.start&&(r=c(u,_),u=null,qe(t,r.b,"start"),R&&(m(),f=Ge(t,l,r.b,r.duration,0,g,i.css))),r){if($>=r.end)I(l=r.b,1-l),qe(t,r.b,"end"),u||(r.b?m():--r.group.r||Z(r.group.c)),r=null;else if($>=r.start){const E=$-r.start;l=r.a+r.d*g(E/r.duration),I(l,1-l)}}return!!(r||u)}))}return{run(p){me(i)?Bt().then(()=>{i=i({direction:p?"in":"out"}),h(p)}):h(p)},end(){m(),r=u=null}}}function _e(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Vt(t,e){S(t,1,1,()=>{e.delete(t.key)})}function Kt(t,e,n,o,s,i,l,r,u,f,d,m){let c=t.length,h=i.length,p=c;const a={};for(;p--;)a[t[p].key]=p;const _=[],g=new Map,I=new Map,R=[];for(p=h;p--;){const L=m(s,i,p),G=n(L);let V=l.get(G);V?o&&R.push(()=>V.p(L,e)):(V=f(G,L),V.c()),g.set(G,_[p]=V),G in a&&I.set(G,Math.abs(p-a[G]))}const D=new Set,$=new Set;function E(L){C(L,1),L.m(r,d),l.set(L.key,L),d=L.first,h--}for(;c&&h;){const L=_[h-1],G=t[c-1],V=L.key,Q=G.key;L===G?(d=L.first,c--,h--):g.has(Q)?!l.has(V)||D.has(V)?E(L):$.has(Q)?c--:I.get(V)>I.get(Q)?($.add(V),E(L)):(D.add(Q),c--):(u(G,l),c--)}for(;c--;){const L=t[c];g.has(L.key)||u(L,l)}for(;h;)E(_[h-1]);return Z(R),_}function We(t,e,n){const o=t.$$.props[e];o!==void 0&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function F(t){t&&t.c()}function j(t,e,n){const{fragment:o,after_update:s}=t.$$;o&&o.m(e,n),pe(()=>{const i=t.$$.on_mount.map(ht).filter(me);t.$$.on_destroy?t.$$.on_destroy.push(...i):Z(i),t.$$.on_mount=[]}),s.forEach(pe)}function q(t,e){const n=t.$$;n.fragment!==null&&(Wt(n.after_update),Z(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Gt(t,e){t.$$.dirty[0]===-1&&(ue.push(t),Rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,n,o,s,i,l=null,r=[-1]){const u=Re;ke(t);const f=t.$$={fragment:null,ctx:[],props:i,update:P,not_equal:s,bound:Ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ve(),dirty:r,skip_bound:!1,root:e.target||u.$$.root};l&&l(f.root);let d=!1;if(f.ctx=n?n(t,e.props||{},(m,c,...h)=>{const p=h.length?h[0]:c;return f.ctx&&s(f.ctx[m],f.ctx[m]=p)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](p),d&&Gt(t,m)),c}):[],f.update(),d=!0,Z(f.before_update),f.fragment=o?o(f.ctx):!1,e.target){if(e.hydrate){const m=Ut(e.target);f.fragment&&f.fragment.l(m),m.forEach(v)}else f.fragment&&f.fragment.c();e.intro&&C(t.$$.fragment),j(t,e.target,e.anchor),yt()}ke(u)}class Y{constructor(){Ae(this,"$$");Ae(this,"$$set")}$destroy(){q(this,1),this.$destroy=P}$on(e,n){if(!me(n))return P;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(e){this.$$set&&!Nt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Qt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qt);const re=[];function be(t,e=P){let n;const o=new Set;function s(r){if(K(t,r)&&(t=r,n)){const u=!re.length;for(const f of o)f[1](),re.push(f,t);if(u){for(let f=0;f<re.length;f+=2)re[f][0](re[f+1]);re.length=0}}}function i(r){s(r(t))}function l(r,u=P){const f=[r,u];return o.add(f),o.size===1&&(n=e(s,i)||P),r(t),()=>{o.delete(f),o.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:l}}const Ee=be(!1),Qe=be("192.168.4.1"),te=be({statusCode:0,statusMsg:"Page loaded.",sec:0,ms:0,cameraConnected:!1,intervalSec:35,isRunning:!1,cameraIP:"192.168.4.7",numShots:0,timeUntilNext:0,duration:0,timeUntilCompletion:0,shutterIsPressed:!1,actions:[],actionIndex:0}),B=be(!1),Ne=be(),ae=be([{action:"Trigger shutter",fields:{},time:0,timeMode:"from start"}]);function Xt(t){const e=t-1;return e*e*e+1}function Xe(t,{delay:e=0,duration:n=400,easing:o=mt}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:i=>`opacity: ${i*s}`}}function Ye(t,{delay:e=0,duration:n=400,easing:o=Xt,axis:s="y"}={}){const i=getComputedStyle(t),l=+i.opacity,r=s==="y"?"height":"width",u=parseFloat(i[r]),f=s==="y"?["top","bottom"]:["left","right"],d=f.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),m=parseFloat(i[`padding${d[0]}`]),c=parseFloat(i[`padding${d[1]}`]),h=parseFloat(i[`margin${d[0]}`]),p=parseFloat(i[`margin${d[1]}`]),a=parseFloat(i[`border${d[0]}Width`]),_=parseFloat(i[`border${d[1]}Width`]);return{delay:e,duration:n,easing:o,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*l};${r}: ${g*u}px;padding-${f[0]}: ${g*m}px;padding-${f[1]}: ${g*c}px;margin-${f[0]}: ${g*h}px;margin-${f[1]}: ${g*p}px;border-${f[0]}-width: ${g*a}px;border-${f[1]}-width: ${g*_}px;`}}const Yt=t=>({}),Ze=t=>({});function xe(t){let e,n,o,s;const i=t[4].default,l=ye(i,t,t[3],null);return{c(){e=y("div"),l&&l.c(),b(e,"id",n=`${t[0]}-body`),b(e,"class","body svelte-klc9jx")},m(r,u){w(r,e,u),l&&l.m(e,null),s=!0},p(r,u){l&&l.p&&(!s||u&8)&&Ce(l,i,r,r[3],s?$e(i,r[3],u,null):Se(r[3]),null),(!s||u&1&&n!==(n=`${r[0]}-body`))&&b(e,"id",n)},i(r){s||(C(l,r),r&&pe(()=>{s&&(o||(o=Ue(e,Ye,{duration:300},!0)),o.run(1))}),s=!0)},o(r){S(l,r),r&&(o||(o=Ue(e,Ye,{duration:300},!1)),o.run(0)),s=!1},d(r){r&&v(e),l&&l.d(r),r&&o&&o.end()}}}function Zt(t){let e,n,o,s,i,l,r,u,f,d,m,c,h;const p=t[4].heading,a=ye(p,t,t[3],Ze);let _=t[1]&&xe(t);return{c(){e=y("div"),n=y("button"),a&&a.c(),o=O(),s=y("div"),i=Me("svg"),l=Me("path"),d=O(),_&&_.c(),b(l,"d","M15 18l-6-6 6-6"),b(i,"class",r=Ke(t[1]?"rotated":"")+" svelte-klc9jx"),b(i,"xmlns","http://www.w3.org/2000/svg"),b(i,"width","24"),b(i,"height","24"),b(i,"viewBox","0 0 24 24"),b(i,"fill","none"),b(i,"stroke","currentColor"),b(i,"stroke-width","2"),b(i,"stroke-linecap","round"),b(i,"stroke-linejoin","round"),b(s,"class","arrow-container svelte-klc9jx"),b(n,"class","heading svelte-klc9jx"),b(n,"title",u=t[1]?"Collapse section":"Expand section"),b(n,"aria-expanded",t[1]),b(n,"aria-controls",f=`${t[0]}-body`),b(e,"class","section svelte-klc9jx")},m(g,I){w(g,e,I),k(e,n),a&&a.m(n,null),k(n,o),k(n,s),k(s,i),k(i,l),k(e,d),_&&_.m(e,null),m=!0,c||(h=A(n,"click",t[2]),c=!0)},p(g,[I]){a&&a.p&&(!m||I&8)&&Ce(a,p,g,g[3],m?$e(p,g[3],I,Yt):Se(g[3]),Ze),(!m||I&2&&r!==(r=Ke(g[1]?"rotated":"")+" svelte-klc9jx"))&&b(i,"class",r),(!m||I&2&&u!==(u=g[1]?"Collapse section":"Expand section"))&&b(n,"title",u),(!m||I&2)&&b(n,"aria-expanded",g[1]),(!m||I&1&&f!==(f=`${g[0]}-body`))&&b(n,"aria-controls",f),g[1]?_?(_.p(g,I),I&2&&C(_,1)):(_=xe(g),_.c(),C(_,1),_.m(e,null)):_&&(he(),S(_,1,1,()=>{_=null}),ge())},i(g){m||(C(a,g),C(_),m=!0)},o(g){S(a,g),S(_),m=!1},d(g){g&&v(e),a&&a.d(g),_&&_.d(),c=!1,h()}}}function xt(t,e,n){let{$$slots:o={},$$scope:s}=e,{name:i}=e;const l=`${i}-expanded`;let r;localStorage.getItem(l)?r=localStorage.getItem(l)==String(!0):r=!0;const u=()=>{n(1,r=!r),i&&localStorage.setItem(l,String(r))};return t.$$set=f=>{"name"in f&&n(0,i=f.name),"$$scope"in f&&n(3,s=f.$$scope)},[i,r,u,s,o]}class ve extends Y{constructor(e){super(),X(this,e,xt,Zt,K,{name:0})}}function en(t){let e;return{c(){e=y("p"),e.textContent="Disconnected",b(e,"class","error")},m(n,o){w(n,e,o)},p:P,d(n){n&&v(e)}}}function tn(t){let e,n,o=t[2].cameraIP+"",s;return{c(){e=y("p"),n=N("Connected to "),s=N(o),b(e,"class","success")},m(i,l){w(i,e,l),k(e,n),k(e,s)},p(i,l){l&4&&o!==(o=i[2].cameraIP+"")&&H(s,o)},d(i){i&&v(e)}}}function nn(t){let e;return{c(){e=y("p"),e.textContent="Connecting..."},m(n,o){w(n,e,o)},p:P,d(n){n&&v(e)}}}function on(t){let e,n,o,s,i,l,r,u,f,d;function m(p,a){return p[1]?nn:p[2].cameraConnected?tn:en}let c=m(t),h=c(t);return{c(){e=y("label"),n=y("span"),n.textContent="IP address:",o=O(),s=y("input"),i=O(),l=y("button"),l.textContent="Connect",r=O(),h.c(),u=oe(),b(s,"placeholder","Camera IP address"),b(l,"class","inverse")},m(p,a){w(p,e,a),k(e,n),k(e,o),k(e,s),ee(s,t[0]),w(p,i,a),w(p,l,a),w(p,r,a),h.m(p,a),w(p,u,a),f||(d=[A(s,"input",t[4]),A(l,"click",t[3])],f=!0)},p(p,a){a&1&&s.value!==p[0]&&ee(s,p[0]),c===(c=m(p))&&h?h.p(p,a):(h.d(1),h=c(p),h&&(h.c(),h.m(u.parentNode,u)))},d(p){p&&(v(e),v(i),v(l),v(r),v(u)),h.d(p),f=!1,Z(d)}}}function sn(t){let e;return{c(){e=y("h2"),e.textContent="Connect camera",b(e,"slot","heading")},m(n,o){w(n,e,o)},p:P,d(n){n&&v(e)}}}function ln(t){let e,n;return e=new ve({props:{name:"connect-camera",$$slots:{heading:[sn],default:[on]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment)},m(o,s){j(e,o,s),n=!0},p(o,[s]){const i={};s&135&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){q(e,o)}}}function rn(t,e,n){let o,s,i;U(t,B,d=>n(5,o=d)),U(t,Ne,d=>n(6,s=d)),U(t,te,d=>n(2,i=d));let l,r;te.subscribe(d=>n(0,l=d.cameraIP||l)),B.subscribe(d=>n(1,r=d&&r));const u=()=>{s.send(JSON.stringify({command:"connect",cameraIP:l})),n(1,r=W(B,o=!0,o))};function f(){l=this.value,n(0,l)}return[l,r,i,u,f]}class un extends Y{constructor(e){super(),X(this,e,rn,ln,K,{})}}function fn(t){let e,n,o;return{c(){e=y("button"),e.textContent="Disconnect",b(e,"class","inverse")},m(s,i){w(s,e,i),n||(o=A(e,"click",t[5]),n=!0)},p:P,d(s){s&&v(e),n=!1,o()}}}function cn(t){let e,n,o;return{c(){e=y("button"),e.textContent="Connect",b(e,"class","inverse")},m(s,i){w(s,e,i),n||(o=A(e,"click",t[4]),n=!0)},p:P,d(s){s&&v(e),n=!1,o()}}}function an(t){let e;return{c(){e=y("p"),e.textContent="Disconnected",b(e,"class","error")},m(n,o){w(n,e,o)},p:P,d(n){n&&v(e)}}}function dn(t){let e,n,o;return{c(){e=y("p"),n=N("Connected to "),o=N(t[3]),b(e,"class","success")},m(s,i){w(s,e,i),k(e,n),k(e,o)},p(s,i){i&8&&H(o,s[3])},d(s){s&&v(e)}}}function pn(t){let e;return{c(){e=y("p"),e.textContent="Connecting..."},m(n,o){w(n,e,o)},p:P,d(n){n&&v(e)}}}function _n(t){let e,n,o,s,i,l,r,u,f;function d(_,g){return!_[2]||_[0]!=_[3]?cn:fn}let m=d(t),c=m(t);function h(_,g){return _[1]?pn:_[2]?dn:an}let p=h(t),a=p(t);return{c(){e=y("label"),n=y("span"),n.textContent="IP address:",o=O(),s=y("input"),i=O(),c.c(),l=O(),a.c(),r=oe(),b(s,"placeholder","ESP8266 IP address")},m(_,g){w(_,e,g),k(e,n),k(e,o),k(e,s),ee(s,t[0]),w(_,i,g),c.m(_,g),w(_,l,g),a.m(_,g),w(_,r,g),u||(f=A(s,"input",t[6]),u=!0)},p(_,g){g&1&&s.value!==_[0]&&ee(s,_[0]),m===(m=d(_))&&c?c.p(_,g):(c.d(1),c=m(_),c&&(c.c(),c.m(l.parentNode,l))),p===(p=h(_))&&a?a.p(_,g):(a.d(1),a=p(_),a&&(a.c(),a.m(r.parentNode,r)))},d(_){_&&(v(e),v(i),v(l),v(r)),c.d(_),a.d(_),u=!1,f()}}}function mn(t){let e;return{c(){e=y("h2"),e.textContent="Connect to ESP8266",b(e,"slot","heading")},m(n,o){w(n,e,o)},p:P,d(n){n&&v(e)}}}function hn(t){let e,n;return e=new ve({props:{name:"connect-esp",$$slots:{heading:[mn],default:[_n]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment)},m(o,s){j(e,o,s),n=!0},p(o,[s]){const i={};s&4111&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){q(e,o)}}}function gn(t,e,n){let o,s,i,l,r,u;U(t,Ne,a=>n(8,o=a)),U(t,Ee,a=>n(2,s=a)),U(t,B,a=>n(9,i=a)),U(t,te,a=>n(10,l=a)),U(t,ae,a=>n(11,r=a)),U(t,Qe,a=>n(3,u=a));let f=u,d,m=0;const c=()=>{W(Qe,u=f,u),o==null||o.close(),W(Ne,o=new WebSocket(`ws://${u}:81`),o),o.addEventListener("message",a=>{m++,W(te,l=JSON.parse(a.data),l),m==1&&W(ae,r=l.actions,r),W(B,i=!1,i)}),o.addEventListener("open",a=>{W(Ee,s=!0,s),n(1,d=!1)}),o.addEventListener("close",a=>{W(Ee,s=!1,s),n(1,d=!1)}),n(1,d=!0)},h=()=>{o==null||o.close()};c();function p(){f=this.value,n(0,f)}return[f,d,s,u,c,h,p]}class bn extends Y{constructor(e){super(),X(this,e,gn,hn,K,{})}}const Oe={"Trigger shutter":{endpointUrl:"/ver100/shooting/control/shutterbutton",httpMethod:"POST",body:{af:!1},fields:{}},"Control shutter":{endpointUrl:"/ver100/shooting/control/shutterbutton/manual",httpMethod:"POST",body:{action:"full_press",af:!1},fields:{Action:{key:"action",options:["full_press","release"]}}},"Set ISO":{endpointUrl:"/ver100/shooting/settings/iso",httpMethod:"PUT",body:{value:"400"},fields:{ISO:{key:"value",options:["auto","100","125","160","200","250","320","400","500","640","800","1000","1250","1600","2000","2500","3200","4000","5000","6400","8000","10000","12800","16000","20000","25600"]}}},"Set aperture":{endpointUrl:"/ver100/shooting/settings/av",httpMethod:"PUT",body:{value:"f8.0"},fields:{Aperture:{key:"value",options:["f3.5","f4.0","f4.5","f5.0","f5.6","f6.3","f7.1","f8.0","f9.0","f10","f11","f13","f14","f16","f18","f20","f22"]}}},"Set shutter speed":{endpointUrl:"/ver100/shooting/settings/tv",httpMethod:"PUT",body:{value:"1/125"},fields:{"Shutter speed":{key:"value",options:["1/4000","1/3200","1/2500","1/2000","1/1600","1/1250","1/1000","1/800","1/640","1/500","1/400","1/320","1/250","1/200","1/160","1/125","1/100","1/80","1/60","1/50","1/40","1/30","1/25","1/20","1/15","1/13","1/10","1/8","1/6","1/5","1/4",'0"3','0"4','0"5','0"6','0"8','1"','1"3','1"6','2"','2"5','3"2','4"','5"','6"','8"','10"','13"','15"','20"','25"','30"',"bulb"]}}},"Set exposure compensation":{endpointUrl:"/ver100/shooting/settings/exposure",httpMethod:"PUT",body:{value:"+0.0"},fields:{EV:{key:"value",options:["-3.0","-2_2/3","-2_1/3","-2.0","-1_2/3","-1_1/3","-1.0","-0_2/3","-0_1/3","+0.0","+0_1/3","+0_2/3","+1.0","+1_1/3","+1_2/3","+2.0","+2_1/3","+2_2/3","+3.0"]}}},"Set shooting mode":{endpointUrl:"/ver100/shooting/settings/shootingmode",httpMethod:"PUT",body:{value:"m"},fields:{Mode:{key:"value",options:["m","av","tv","p","auto"]}}}};function vn(t){let e,n,o;return{c(){e=y("button"),e.textContent="Start",b(e,"class","inverse")},m(s,i){w(s,e,i),n||(o=A(e,"click",t[4]),n=!0)},p:P,d(s){s&&v(e),n=!1,o()}}}function wn(t){let e,n,o;return{c(){e=y("button"),e.textContent="Stop",b(e,"class","inverse")},m(s,i){w(s,e,i),n||(o=A(e,"click",t[5]),n=!0)},p:P,d(s){s&&v(e),n=!1,o()}}}function kn(t){let e;return{c(){e=y("p"),e.textContent="Intervalometer stopped."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function yn(t){let e;return{c(){e=y("p"),e.textContent="Intervalometer running..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function $n(t){let e;return{c(){e=y("p"),e.textContent="Loading..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Cn(t){let e,n,o,s,i,l,r,u,f,d,m,c,h,p;function a($,E){return $[3].isRunning?wn:vn}let _=a(t),g=_(t);function I($,E){return $[1]?$n:$[3].isRunning?yn:kn}let R=I(t),D=R(t);return{c(){e=y("label"),n=N(`Interval:\r
    `),o=y("input"),s=N(`\r
    seconds`),i=O(),l=y("label"),r=N(`Duration:\r
    `),u=y("input"),f=N(`\r
    seconds`),d=O(),g.c(),m=O(),D.c(),c=oe(),b(o,"type","number"),b(o,"step","any"),b(o,"min","1"),b(o,"placeholder","Interval in seconds"),b(u,"type","number"),b(u,"step","any"),b(u,"min","0"),b(u,"placeholder","Duration in seconds")},m($,E){w($,e,E),k(e,n),k(e,o),ee(o,t[0]),k(e,s),w($,i,E),w($,l,E),k(l,r),k(l,u),ee(u,t[2]),k(l,f),w($,d,E),g.m($,E),w($,m,E),D.m($,E),w($,c,E),h||(p=[A(o,"input",t[6]),A(u,"input",t[7])],h=!0)},p($,E){E&1&&de(o.value)!==$[0]&&ee(o,$[0]),E&4&&de(u.value)!==$[2]&&ee(u,$[2]),_===(_=a($))&&g?g.p($,E):(g.d(1),g=_($),g&&(g.c(),g.m(m.parentNode,m))),R!==(R=I($))&&(D.d(1),D=R($),D&&(D.c(),D.m(c.parentNode,c)))},d($){$&&(v(e),v(i),v(l),v(d),v(m),v(c)),g.d($),D.d($),h=!1,Z(p)}}}function Sn(t){let e;return{c(){e=y("h2"),e.textContent="Intervalometer",b(e,"slot","heading")},m(n,o){w(n,e,o)},p:P,d(n){n&&v(e)}}}function In(t){let e,n;return e=new ve({props:{name:"intervalometer",$$slots:{heading:[Sn],default:[Cn]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment)},m(o,s){j(e,o,s),n=!0},p(o,[s]){const i={};s&2063&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){q(e,o)}}}function Nn(t,e,n){let o,s,i,l;U(t,B,p=>n(8,o=p)),U(t,Ne,p=>n(9,s=p)),U(t,ae,p=>n(10,i=p)),U(t,te,p=>n(3,l=p));let r,u,f;te.subscribe(p=>{n(0,r=p.intervalSec||r),n(2,f=p.duration||f)}),B.subscribe(p=>n(1,u=p&&u));const d=()=>{const p=[];for(const a of i){const _=Oe[a.action],g=JSON.parse(JSON.stringify(_.body));for(const I in a.fields)g[_.fields[I].key]=a.fields[I];p.push({name:a.action,time:a.time,timeMode:a.timeMode,endpointUrl:_.endpointUrl,httpMethod:_.httpMethod,body:JSON.stringify(g)})}s.send(JSON.stringify({command:"start",intervalSec:r,duration:f,sequence:p,actions:i})),n(1,u=W(B,o=!0,o))},m=()=>{s.send(JSON.stringify({command:"stop"})),n(1,u=W(B,o=!0,o))};function c(){r=de(this.value),n(0,r)}function h(){f=de(this.value),n(2,f)}return[r,u,f,l,d,m,c,h]}class On extends Y{constructor(e){super(),X(this,e,Nn,In,K,{})}}function Pn(t,e={enabled:!0}){let{enabled:n,eventType:o,nodeForEvent:s,options:i,capture:l}=et(e);function r(u){u.target&&t&&!t.contains(u.target)&&!u.defaultPrevented&&t.dispatchEvent(new CustomEvent("clickoutside",{detail:u}))}return e.enabled!==!1&&s.addEventListener(o,r,i),{update(u){s.removeEventListener(o,r,l),{enabled:n,eventType:o,nodeForEvent:s,options:i,capture:l}=et(u),n&&s.addEventListener(o,r,i)},destroy(){s.removeEventListener(o,r,l)}}}function et(t={}){var e,n;return{enabled:t.enabled??!0,nodeForEvent:((e=t.limit)==null?void 0:e.parent)??document,eventType:t.event??"click",options:t.options,capture:typeof t.options=="object"?(n=t.options)==null?void 0:n.capture:t.options}}const En=t=>({}),tt=t=>({toggleDropdown:t[4]}),Mn=t=>({}),nt=t=>({toggleDropdown:t[4]});function ot(t){let e,n,o,s;const i=t[7].buttons,l=ye(i,t,t[6],tt);return{c(){e=y("div"),n=y("div"),l&&l.c(),b(n,"class","options-menu svelte-azbhie"),x(n,"width",t[2]?"100%":void 0),x(n,"background-color",t[3]?"var(--gray-85)":"var(--gray-90)"),b(e,"class","menu-container svelte-azbhie"),x(e,"top",t[1]==="top"?"0.5rem":"100%"),x(e,"width",t[2]?"100%":void 0)},m(r,u){w(r,e,u),k(e,n),l&&l.m(n,null),s=!0},p(r,u){l&&l.p&&(!s||u&64)&&Ce(l,i,r,r[6],s?$e(i,r[6],u,En):Se(r[6]),tt),u&4&&x(n,"width",r[2]?"100%":void 0),u&8&&x(n,"background-color",r[3]?"var(--gray-85)":"var(--gray-90)"),u&2&&x(e,"top",r[1]==="top"?"0.5rem":"100%"),u&4&&x(e,"width",r[2]?"100%":void 0)},i(r){s||(C(l,r),r&&pe(()=>{s&&(o||(o=Ue(e,Xe,{duration:100},!0)),o.run(1))}),s=!0)},o(r){S(l,r),r&&(o||(o=Ue(e,Xe,{duration:100},!1)),o.run(0)),s=!1},d(r){r&&v(e),l&&l.d(r),r&&o&&o.end()}}}function Tn(t){let e,n,o,s,i,l;const r=t[7].button,u=ye(r,t,t[6],nt);let f=t[0]&&ot(t);const d=t[7].default,m=ye(d,t,t[6],null);return{c(){e=y("div"),u&&u.c(),n=O(),f&&f.c(),o=O(),m&&m.c(),b(e,"class","options-container svelte-azbhie"),x(e,"flex",t[2]?"1":void 0)},m(c,h){w(c,e,h),u&&u.m(e,null),k(e,n),f&&f.m(e,null),k(e,o),m&&m.m(e,null),s=!0,i||(l=[Pt(Pn.call(null,e)),A(e,"clickoutside",t[8])],i=!0)},p(c,[h]){u&&u.p&&(!s||h&64)&&Ce(u,r,c,c[6],s?$e(r,c[6],h,Mn):Se(c[6]),nt),c[0]?f?(f.p(c,h),h&1&&C(f,1)):(f=ot(c),f.c(),C(f,1),f.m(e,o)):f&&(he(),S(f,1,1,()=>{f=null}),ge()),m&&m.p&&(!s||h&64)&&Ce(m,d,c,c[6],s?$e(d,c[6],h,null):Se(c[6]),null),h&4&&x(e,"flex",c[2]?"1":void 0)},i(c){s||(C(u,c),C(f),C(m,c),s=!0)},o(c){S(u,c),S(f),S(m,c),s=!1},d(c){c&&v(e),u&&u.d(c),f&&f.d(),m&&m.d(c),i=!1,Z(l)}}}function Ln(t,e,n){let{$$slots:o={},$$scope:s}=e,{closeCondition:i=!1}=e,{align:l="bottom"}=e,{showOptions:r=!1}=e,{fullWidth:u=!1}=e,{lighter:f=!1}=e;const d=()=>n(0,r=!r),m=()=>n(0,r=!1);return t.$$set=c=>{"closeCondition"in c&&n(5,i=c.closeCondition),"align"in c&&n(1,l=c.align),"showOptions"in c&&n(0,r=c.showOptions),"fullWidth"in c&&n(2,u=c.fullWidth),"lighter"in c&&n(3,f=c.lighter),"$$scope"in c&&n(6,s=c.$$scope)},t.$$.update=()=>{t.$$.dirty&33&&n(0,r=!i&&r)},[r,l,u,f,d,i,s,o,m]}class Un extends Y{constructor(e){super(),X(this,e,Ln,Tn,K,{closeCondition:5,align:1,showOptions:0,fullWidth:2,lighter:3})}}function st(t,e,n){const o=t.slice();return o[7]=e[n],o}function An(t){let e,n,o,s,i,l,r;return{c(){e=y("button"),n=N(t[0]),o=O(),s=Me("svg"),i=Me("path"),b(i,"d","M6 9l6 6 6-6"),b(s,"xmlns","http://www.w3.org/2000/svg"),b(s,"width","1.3em"),b(s,"height","1.3em"),b(s,"viewBox","0 0 24 24"),b(s,"fill","none"),b(s,"stroke","currentColor"),b(s,"stroke-width","2"),b(s,"stroke-linecap","round"),b(s,"stroke-linejoin","round"),b(e,"slot","button"),b(e,"title",t[2]),b(e,"class","select-dropdown-button svelte-1w71hwl"),e.disabled=t[3]},m(u,f){w(u,e,f),k(e,n),k(e,o),k(e,s),k(s,i),l||(r=A(e,"click",function(){me(t[6])&&t[6].apply(this,arguments)}),l=!0)},p(u,f){t=u,f&1&&H(n,t[0]),f&4&&b(e,"title",t[2]),f&8&&(e.disabled=t[3])},d(u){u&&v(e),l=!1,r()}}}function it(t){let e,n=t[7]+"",o,s,i;function l(){return t[5](t[7],t[6])}return{c(){e=y("button"),o=N(n)},m(r,u){w(r,e,u),k(e,o),s||(i=A(e,"click",l),s=!0)},p(r,u){t=r,u&16&&n!==(n=t[7]+"")&&H(o,n)},d(r){r&&v(e),s=!1,i()}}}function lt(t){let e,n=t[0]!==t[7]&&it(t);return{c(){n&&n.c(),e=oe()},m(o,s){n&&n.m(o,s),w(o,e,s)},p(o,s){o[0]!==o[7]?n?n.p(o,s):(n=it(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(o){o&&v(e),n&&n.d(o)}}}function jn(t){let e,n=_e(t[4]),o=[];for(let s=0;s<n.length;s+=1)o[s]=lt(st(t,n,s));return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=oe()},m(s,i){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(s,i);w(s,e,i)},p(s,i){if(i&81){n=_e(s[4]);let l;for(l=0;l<n.length;l+=1){const r=st(s,n,l);o[l]?o[l].p(r,i):(o[l]=lt(r),o[l].c(),o[l].m(e.parentNode,e))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(s){s&&v(e),kt(o,s)}}}function qn(t){let e,n,o,s,i;return s=new Un({props:{fullWidth:!0,lighter:!0,$$slots:{buttons:[jn,({toggleDropdown:l})=>({6:l}),({toggleDropdown:l})=>l?64:0],button:[An,({toggleDropdown:l})=>({6:l}),({toggleDropdown:l})=>l?64:0]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=N(t[1]),o=N(`:\r
  `),F(s.$$.fragment),b(e,"class","select-dropdown svelte-1w71hwl")},m(l,r){w(l,e,r),k(e,n),k(e,o),j(s,e,null),i=!0},p(l,[r]){(!i||r&2)&&H(n,l[1]);const u={};r&1117&&(u.$$scope={dirty:r,ctx:l}),s.$set(u)},i(l){i||(C(s.$$.fragment,l),i=!0)},o(l){S(s.$$.fragment,l),i=!1},d(l){l&&v(e),q(s)}}}function Dn(t,e,n){let{label:o}=e,{buttonTitle:s}=e,{disabled:i=!1}=e,{value:l}=e,{options:r}=e;const u=(f,d)=>{n(0,l=f),d()};return t.$$set=f=>{"label"in f&&n(1,o=f.label),"buttonTitle"in f&&n(2,s=f.buttonTitle),"disabled"in f&&n(3,i=f.disabled),"value"in f&&n(0,l=f.value),"options"in f&&n(4,r=f.options)},[l,o,s,i,r,u]}class Be extends Y{constructor(e){super(),X(this,e,Dn,qn,K,{label:1,buttonTitle:2,disabled:3,value:0,options:4})}}function rt(t,e,n){const o=t.slice();return o[7]=e[n],o[8]=e,o[9]=n,o}function ut(t){let e,n,o,s,i;function l(u){t[6](u,t[7])}let r={label:t[7],buttonTitle:"Choose value for"+t[7],options:t[3].fields[t[7]].options};return t[0].fields[t[7]]!==void 0&&(r.value=t[0].fields[t[7]]),n=new Be({props:r}),Ie.push(()=>We(n,"value",l)),{c(){e=y("div"),F(n.$$.fragment),s=O()},m(u,f){w(u,e,f),j(n,e,null),k(e,s),i=!0},p(u,f){t=u;const d={};f&1&&(d.label=t[7]),f&1&&(d.buttonTitle="Choose value for"+t[7]),f&1&&(d.options=t[3].fields[t[7]].options),!o&&f&1&&(o=!0,d.value=t[0].fields[t[7]],Je(()=>o=!1)),n.$set(d)},i(u){i||(C(n.$$.fragment,u),i=!0)},o(u){S(n.$$.fragment,u),i=!1},d(u){u&&v(e),q(n)}}}function Fn(t){let e,n,o,s=t[1]+1+"",i,l,r=t[0].action+"",u,f,d,m,c,h,p,a,_,g,I,R,D,$,E,L;function G(M){t[5](M)}let V={label:"Offset",buttonTitle:"Choose time offset mode",options:["from start","after previous"]};t[0].timeMode!==void 0&&(V.value=t[0].timeMode),I=new Be({props:V}),Ie.push(()=>We(I,"value",G));let Q=_e(Object.keys(t[0].fields)),T=[];for(let M=0;M<Q.length;M+=1)T[M]=ut(rt(t,Q,M));const $t=M=>S(T[M],1,1,()=>{T[M]=null});return{c(){e=y("div"),n=y("div"),o=y("h3"),i=N(s),l=N(". "),u=N(r),f=O(),d=y("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',m=O(),c=y("label"),h=N(`Time:\r
    `),p=y("input"),a=N(`\r
    seconds`),_=O(),g=y("div"),F(I.$$.fragment),D=O();for(let M=0;M<T.length;M+=1)T[M].c();b(d,"class","delete-container svelte-z1q96p"),b(n,"class","heading svelte-z1q96p"),b(p,"type","number"),b(p,"step","any"),b(p,"min","0"),b(p,"placeholder","Time offset in seconds"),b(c,"class","svelte-z1q96p"),b(e,"class","container svelte-z1q96p")},m(M,z){w(M,e,z),k(e,n),k(n,o),k(o,i),k(o,l),k(o,u),k(n,f),k(n,d),k(e,m),k(e,c),k(c,h),k(c,p),ee(p,t[0].time),k(c,a),k(e,_),k(e,g),j(I,g,null),k(e,D);for(let se=0;se<T.length;se+=1)T[se]&&T[se].m(e,null);$=!0,E||(L=[A(d,"click",function(){me(t[2])&&t[2].apply(this,arguments)}),A(p,"input",t[4])],E=!0)},p(M,[z]){t=M,(!$||z&2)&&s!==(s=t[1]+1+"")&&H(i,s),(!$||z&1)&&r!==(r=t[0].action+"")&&H(u,r),z&1&&de(p.value)!==t[0].time&&ee(p,t[0].time);const se={};if(!R&&z&1&&(R=!0,se.value=t[0].timeMode,Je(()=>R=!1)),I.$set(se),z&9){Q=_e(Object.keys(t[0].fields));let J;for(J=0;J<Q.length;J+=1){const He=rt(t,Q,J);T[J]?(T[J].p(He,z),C(T[J],1)):(T[J]=ut(He),T[J].c(),C(T[J],1),T[J].m(e,null))}for(he(),J=Q.length;J<T.length;J+=1)$t(J);ge()}},i(M){if(!$){C(I.$$.fragment,M);for(let z=0;z<Q.length;z+=1)C(T[z]);$=!0}},o(M){S(I.$$.fragment,M),T=T.filter(Boolean);for(let z=0;z<T.length;z+=1)S(T[z]);$=!1},d(M){M&&v(e),q(I),kt(T,M),E=!1,Z(L)}}}function zn(t,e,n){let{action:o}=e,{index:s}=e,{deleteAction:i}=e;const l=Oe[o.action];function r(){o.time=de(this.value),n(0,o)}function u(d){t.$$.not_equal(o.timeMode,d)&&(o.timeMode=d,n(0,o))}function f(d,m){t.$$.not_equal(o.fields[m],d)&&(o.fields[m]=d,n(0,o))}return t.$$set=d=>{"action"in d&&n(0,o=d.action),"index"in d&&n(1,s=d.index),"deleteAction"in d&&n(2,i=d.deleteAction)},[o,s,i,l,r,u,f]}class Rn extends Y{constructor(e){super(),X(this,e,zn,Fn,K,{action:0,index:1,deleteAction:2})}}function ft(t,e,n){const o=t.slice();return o[5]=e[n],o[7]=n,o}function ct(t,e){let n,o,s;function i(){return e[3](e[5])}return o=new Rn({props:{action:e[5],index:e[7],deleteAction:i}}),{key:t,first:null,c(){n=oe(),F(o.$$.fragment),this.first=n},m(l,r){w(l,n,r),j(o,l,r),s=!0},p(l,r){e=l;const u={};r&2&&(u.action=e[5]),r&2&&(u.index=e[7]),r&2&&(u.deleteAction=i),o.$set(u)},i(l){s||(C(o.$$.fragment,l),s=!0)},o(l){S(o.$$.fragment,l),s=!1},d(l){l&&v(n),q(o,l)}}}function Jn(t){let e=[],n=new Map,o,s,i,l,r,u,f,d,m=_e(t[1]);const c=a=>a[5];for(let a=0;a<m.length;a+=1){let _=ft(t,m,a),g=c(_);n.set(g,e[a]=ct(g,_))}function h(a){t[4](a)}let p={label:"New action",buttonTitle:"Choose new action type",options:Object.keys(Oe)};return t[0]!==void 0&&(p.value=t[0]),s=new Be({props:p}),Ie.push(()=>We(s,"value",h)),{c(){for(let a=0;a<e.length;a+=1)e[a].c();o=O(),F(s.$$.fragment),l=O(),r=y("button"),r.textContent="Add action",b(r,"class","inverse")},m(a,_){for(let g=0;g<e.length;g+=1)e[g]&&e[g].m(a,_);w(a,o,_),j(s,a,_),w(a,l,_),w(a,r,_),u=!0,f||(d=A(r,"click",t[2]),f=!0)},p(a,_){_&2&&(m=_e(a[1]),he(),e=Kt(e,_,c,1,a,m,n,o.parentNode,Vt,ct,o,ft),ge());const g={};!i&&_&1&&(i=!0,g.value=a[0],Je(()=>i=!1)),s.$set(g)},i(a){if(!u){for(let _=0;_<m.length;_+=1)C(e[_]);C(s.$$.fragment,a),u=!0}},o(a){for(let _=0;_<e.length;_+=1)S(e[_]);S(s.$$.fragment,a),u=!1},d(a){a&&(v(o),v(l),v(r));for(let _=0;_<e.length;_+=1)e[_].d(a);q(s,a),f=!1,d()}}}function Wn(t){let e;return{c(){e=y("h2"),e.textContent="Sequence",b(e,"slot","heading")},m(n,o){w(n,e,o)},p:P,d(n){n&&v(e)}}}function Bn(t){let e,n;return e=new ve({props:{name:"sequence",$$slots:{heading:[Wn],default:[Jn]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment)},m(o,s){j(e,o,s),n=!0},p(o,[s]){const i={};s&259&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){q(e,o)}}}function Hn(t,e,n){let o;U(t,ae,u=>n(1,o=u));let s="Trigger shutter";const i=()=>{o.push({action:s,fields:Object.fromEntries(Object.entries(Oe[s].fields).map(([u,f])=>[u,Oe[s].body[f.key]])),time:0,timeMode:"after previous"}),ae.set(o)},l=u=>{W(ae,o=o.filter(f=>f!==u),o)};function r(u){s=u,n(0,s)}return[s,o,i,l,r]}class Vn extends Y{constructor(e){super(),X(this,e,Hn,Bn,K,{})}}function Kn(t){let e,n,o;return{c(){e=y("button"),e.textContent="Press shutter",b(e,"class","inverse")},m(s,i){w(s,e,i),n||(o=A(e,"click",t[3]),n=!0)},p:P,d(s){s&&v(e),n=!1,o()}}}function Gn(t){let e,n,o;return{c(){e=y("button"),e.textContent="Release shutter",b(e,"class","inverse")},m(s,i){w(s,e,i),n||(o=A(e,"click",t[4]),n=!0)},p:P,d(s){s&&v(e),n=!1,o()}}}function Qn(t){let e;return{c(){e=y("p"),e.textContent="Shutter is not pressed."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Xn(t){let e;return{c(){e=y("p"),e.textContent="Shutter is pressed..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Yn(t){let e;return{c(){e=y("p"),e.textContent="Loading..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Zn(t){let e,n,o,s,i,l;function r(h,p){return h[1].shutterIsPressed?Gn:Kn}let u=r(t),f=u(t);function d(h,p){return h[0]?Yn:h[1].shutterIsPressed?Xn:Qn}let m=d(t),c=m(t);return{c(){e=y("button"),e.textContent="Trigger shutter",n=O(),f.c(),o=O(),c.c(),s=oe(),b(e,"class","inverse")},m(h,p){w(h,e,p),w(h,n,p),f.m(h,p),w(h,o,p),c.m(h,p),w(h,s,p),i||(l=A(e,"click",t[2]),i=!0)},p(h,p){u===(u=r(h))&&f?f.p(h,p):(f.d(1),f=u(h),f&&(f.c(),f.m(o.parentNode,o))),m!==(m=d(h))&&(c.d(1),c=m(h),c&&(c.c(),c.m(s.parentNode,s)))},d(h){h&&(v(e),v(n),v(o),v(s)),f.d(h),c.d(h),i=!1,l()}}}function xn(t){let e;return{c(){e=y("h2"),e.textContent="Shutter",b(e,"slot","heading")},m(n,o){w(n,e,o)},p:P,d(n){n&&v(e)}}}function eo(t){let e,n;return e=new ve({props:{name:"shutter",$$slots:{heading:[xn],default:[Zn]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment)},m(o,s){j(e,o,s),n=!0},p(o,[s]){const i={};s&131&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){q(e,o)}}}function to(t,e,n){let o,s,i;U(t,B,d=>n(5,o=d)),U(t,Ne,d=>n(6,s=d)),U(t,te,d=>n(1,i=d));let l;return B.subscribe(d=>n(0,l=d&&l)),[l,i,()=>{s.send(JSON.stringify({command:"triggerShutter"})),n(0,l=W(B,o=!0,o))},()=>{s.send(JSON.stringify({command:"pressShutter"})),n(0,l=W(B,o=!0,o))},()=>{s.send(JSON.stringify({command:"releaseShutter"})),n(0,l=W(B,o=!0,o))}]}class no extends Y{constructor(e){super(),X(this,e,to,eo,K,{})}}function at(t){let e,n,o=t[2].numShots+"",s,i,l=(t[2].actionIndex==-1?1:t[2].actionIndex+1)+"",r,u,f=t[2].actions.length+"",d,m,c=t[0].toFixed(1)+"",h,p,a=t[1]>0&&dt(t);return{c(){e=y("p"),n=N("Number of cycles: "),s=N(o),i=N(`\r
      Next action index: `),r=N(l),u=N("/"),d=N(f),m=N(`\r
      Time until next action: `),h=N(c),p=O(),a&&a.c()},m(_,g){w(_,e,g),k(e,n),k(e,s),k(e,i),k(e,r),k(e,u),k(e,d),k(e,m),k(e,h),k(e,p),a&&a.m(e,null)},p(_,g){g&4&&o!==(o=_[2].numShots+"")&&H(s,o),g&4&&l!==(l=(_[2].actionIndex==-1?1:_[2].actionIndex+1)+"")&&H(r,l),g&4&&f!==(f=_[2].actions.length+"")&&H(d,f),g&1&&c!==(c=_[0].toFixed(1)+"")&&H(h,c),_[1]>0?a?a.p(_,g):(a=dt(_),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(_){_&&v(e),a&&a.d()}}}function dt(t){let e,n,o=t[1].toFixed(1)+"",s;return{c(){e=y("br"),n=N("Time until completion: "),s=N(o)},m(i,l){w(i,e,l),w(i,n,l),w(i,s,l)},p(i,l){l&2&&o!==(o=i[1].toFixed(1)+"")&&H(s,o)},d(i){i&&(v(e),v(n),v(s))}}}function oo(t){let e,n,o=t[2].statusCode+"",s,i,l=t[2].statusMsg+"",r,u,f,d=t[2].cameraConnected&&at(t);return{c(){e=y("p"),n=N("Status code: "),s=N(o),i=N(`\r
    Status message: `),r=N(l),u=O(),d&&d.c(),f=oe(),ie(e,"success",t[2].statusCode==200),ie(e,"warning",t[2].statusCode==0),ie(e,"error",t[2].statusCode!=200&&t[2].statusCode!=0)},m(m,c){w(m,e,c),k(e,n),k(e,s),k(e,i),k(e,r),w(m,u,c),d&&d.m(m,c),w(m,f,c)},p(m,c){c&4&&o!==(o=m[2].statusCode+"")&&H(s,o),c&4&&l!==(l=m[2].statusMsg+"")&&H(r,l),c&4&&ie(e,"success",m[2].statusCode==200),c&4&&ie(e,"warning",m[2].statusCode==0),c&4&&ie(e,"error",m[2].statusCode!=200&&m[2].statusCode!=0),m[2].cameraConnected?d?d.p(m,c):(d=at(m),d.c(),d.m(f.parentNode,f)):d&&(d.d(1),d=null)},d(m){m&&(v(e),v(u),v(f)),d&&d.d(m)}}}function so(t){let e;return{c(){e=y("h2"),e.textContent="Status",b(e,"slot","heading")},m(n,o){w(n,e,o)},p:P,d(n){n&&v(e)}}}function io(t){let e,n;return e=new ve({props:{name:"status",$$slots:{heading:[so],default:[oo]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment)},m(o,s){j(e,o,s),n=!0},p(o,[s]){const i={};s&39&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){q(e,o)}}}function lo(t,e,n){let o;U(t,te,u=>n(2,o=u));let s,i=0,l=0,r;return te.subscribe(u=>{s=Date.now(),clearInterval(r),u.isRunning?r=setInterval(()=>{n(0,i=(o.timeUntilNext-(Date.now()-s))/1e3),n(1,l=(o.timeUntilCompletion-(Date.now()-s))/1e3)},100):(n(0,i=0),n(1,l=0))}),[i,l,o]}class ro extends Y{constructor(e){super(),X(this,e,lo,io,K,{})}}function uo(t){let e,n,o;return{c(){e=y("button"),e.innerHTML='<img src="/icon.svg" alt="Crescent icon"/>',b(e,"title","Switch theme"),b(e,"class","svelte-1oalwmk")},m(s,i){w(s,e,i),n||(o=A(e,"click",t[0]),n=!0)},p:P,i:P,o:P,d(s){s&&v(e),n=!1,o()}}}function fo(t,e,n){let{theme:o=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}=e;const s=()=>{const l=window.document.documentElement.classList;o=="dark"?l.add("dark"):l.remove("dark")},i=()=>{n(1,o=o=="light"?"dark":"light"),localStorage.setItem("theme",o),s()};return s(),t.$$set=l=>{"theme"in l&&n(1,o=l.theme)},[i,o]}class co extends Y{constructor(e){super(),X(this,e,fo,uo,K,{theme:1})}}function pt(t){let e,n,o,s;e=new un({});let i=t[1].cameraConnected&&_t();return{c(){F(e.$$.fragment),n=O(),i&&i.c(),o=oe()},m(l,r){j(e,l,r),w(l,n,r),i&&i.m(l,r),w(l,o,r),s=!0},p(l,r){l[1].cameraConnected?i?r&2&&C(i,1):(i=_t(),i.c(),C(i,1),i.m(o.parentNode,o)):i&&(he(),S(i,1,1,()=>{i=null}),ge())},i(l){s||(C(e.$$.fragment,l),C(i),s=!0)},o(l){S(e.$$.fragment,l),S(i),s=!1},d(l){l&&(v(n),v(o)),q(e,l),i&&i.d(l)}}}function _t(t){let e,n,o,s,i,l;return e=new Vn({}),o=new On({}),i=new no({}),{c(){F(e.$$.fragment),n=O(),F(o.$$.fragment),s=O(),F(i.$$.fragment)},m(r,u){j(e,r,u),w(r,n,u),j(o,r,u),w(r,s,u),j(i,r,u),l=!0},i(r){l||(C(e.$$.fragment,r),C(o.$$.fragment,r),C(i.$$.fragment,r),l=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),S(i.$$.fragment,r),l=!1},d(r){r&&(v(n),v(s)),q(e,r),q(o,r),q(i,r)}}}function ao(t){let e,n,o,s,i,l,r,u,f,d,m;i=new co({}),r=new ro({}),f=new bn({});let c=t[0]&&pt(t);return{c(){e=y("main"),n=y("div"),o=y("h1"),o.textContent="ESP8266 Intervalometer",s=O(),F(i.$$.fragment),l=O(),F(r.$$.fragment),u=O(),F(f.$$.fragment),d=O(),c&&c.c(),b(n,"class","svelte-p108mq"),b(e,"class","svelte-p108mq")},m(h,p){w(h,e,p),k(e,n),k(n,o),k(n,s),j(i,n,null),k(e,l),j(r,e,null),k(e,u),j(f,e,null),k(e,d),c&&c.m(e,null),m=!0},p(h,[p]){h[0]?c?(c.p(h,p),p&1&&C(c,1)):(c=pt(h),c.c(),C(c,1),c.m(e,null)):c&&(he(),S(c,1,1,()=>{c=null}),ge())},i(h){m||(C(i.$$.fragment,h),C(r.$$.fragment,h),C(f.$$.fragment,h),C(c),m=!0)},o(h){S(i.$$.fragment,h),S(r.$$.fragment,h),S(f.$$.fragment,h),S(c),m=!1},d(h){h&&v(e),q(i),q(r),q(f),c&&c.d()}}}function po(t,e,n){let o,s;return U(t,Ee,i=>n(0,o=i)),U(t,te,i=>n(1,s=i)),[o,s]}class _o extends Y{constructor(e){super(),X(this,e,po,ao,K,{})}}new _o({target:document.getElementById("app")});</script>
    <style>:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;font-size:16px;box-sizing:border-box;color:var(--gray-5);background-color:var(--gray-95);transition:background-color .2s,color .2s}*,*:before,*:after{box-sizing:inherit}body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:400}ol,ul{list-style:none}img{max-width:100%;height:auto}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex}:root{--black: #121212;--white: #f0f0f0;--dark: #4c4c4c;--light: #acacac;--darker: #2d2d2d;--darkest: #1e1e1e;--lighter: #d1d1d1;--lightest: #e0e0e0;--medium: #888888;--light-red: #ff8484;--dark-red: #b70000;--light-green: #87ff85;--dark-green: #028100;--light-yellow: #fffd85;--dark-yellow: #768500}:root:not(.dark){--gray-5: var(--black);--gray-10: var(--darkest);--gray-15: var(--darker);--gray-35: var(--dark);--gray-50: var(--medium);--gray-65: var(--light);--gray-85: var(--lighter);--gray-90: var(--lightest);--gray-95: var(--white);--green-5: var(--dark-green);--green-95: var(--light-green);--red-5: var(--dark-red);--red-95: var(--light-red);--yellow-5: var(--dark-yellow);--yellow-95: var(--light-yellow)}:root.dark{--gray-5: var(--white);--gray-10: var(--lightest);--gray-15: var(--lighter);--gray-35: var(--light);--gray-50: var(--medium);--gray-65: var(--dark);--gray-85: var(--darker);--gray-90: var(--darkest);--gray-95: var(--black);--green-5: var(--light-green);--green-95: var(--dark-green);--red-5: var(--light-red);--red-95: var(--dark-red);--yellow-5: var(--light-yellow);--yellow-95: var(--dark-yellow)}#app{width:100%;max-width:480px;margin:0 auto;padding:2rem}button{border-radius:.5rem;border:1px solid transparent;padding:.6em 1.2rem;font-size:1rem;font-weight:500;font-family:inherit;color:var(--gray-5);background-color:transparent;cursor:pointer;transition:background-color .2s,color .2s}button:hover:not(:disabled){background-color:var(--gray-65)}button:disabled{color:var(--gray-50);cursor:not-allowed}button.inverse{color:var(--gray-95);background-color:var(--gray-5)}button.inverse:hover:not(:disabled){background-color:var(--gray-35)}button.inverse:disabled{background-color:var(--gray-50);cursor:not-allowed}label{display:flex;align-items:center;gap:16px;background-color:var(--gray-90);padding:10px 16px;border-radius:8px;transition:background-color .2s}label>span{flex-shrink:0}input{border-width:2px;border-color:transparent;border-style:solid;border-radius:8px;padding:.6em;outline:none;font-size:inherit;font-family:inherit;color:var(--gray-5);background-color:var(--gray-85);transition:background-color .2s,color .2s,border-color .2s;width:100%}input:hover{border-color:var(--gray-65)}input:focus{border-color:var(--gray-50)}input:disabled{border-color:transparent;color:var(--gray-50);cursor:not-allowed}.success{color:var(--green-5)}.warning{color:var(--yellow-5)}.error{color:var(--red-5)}p{white-space:pre-line;overflow-wrap:break-word}.section.svelte-klc9jx{border-style:solid;border-width:2px;border-color:var(--gray-50);border-radius:16px;display:flex;flex-direction:column;padding:16px 16px 0;transition:border-color .2s}.body.svelte-klc9jx{display:flex;flex-direction:column;row-gap:16px;padding-bottom:16px}.heading.svelte-klc9jx{all:unset;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-bottom:16px}.heading.svelte-klc9jx:hover{background-color:transparent}.arrow-container.svelte-klc9jx{transition:background-color .2s;background-color:transparent;border-radius:8px;padding:4px;display:flex;align-items:center}.arrow-container.svelte-klc9jx:hover{background-color:var(--gray-65)}svg.svelte-klc9jx{transition:transform .3s;color:inherit}svg.rotated.svelte-klc9jx{transform:rotate(-90deg)}.options-container.svelte-azbhie{position:relative}.menu-container.svelte-azbhie{position:absolute;left:0;z-index:1;white-space:pre}.options-menu.svelte-azbhie{display:inline-flex;flex-direction:column;padding:.5rem;border-radius:.7rem;border:var(--border-style);box-shadow:0 10px 15px -3px var(--shadow),0 4px 6px -4px var(--shadow)}.options-menu.svelte-azbhie>button{font-size:1.2rem;padding:.3rem;text-align:start}.select-dropdown.svelte-1w71hwl{display:flex;align-items:center;gap:.5rem}.select-dropdown.svelte-1w71hwl:has(button:disabled){cursor:not-allowed;color:var(--gray-50)}.select-dropdown-button.svelte-1w71hwl{background-color:var(--gray-85);padding:.6rem;display:flex;gap:.4rem;width:100%;justify-content:space-between}.heading.svelte-z1q96p{all:unset;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.container.svelte-z1q96p{display:flex;flex-direction:column;gap:12px;background-color:var(--gray-90);padding:10px 16px;border-radius:8px;transition:background-color .2s}.delete-container.svelte-z1q96p{padding:4px;display:flex;align-items:center}label.svelte-z1q96p{padding:0}button.svelte-1oalwmk{background-color:transparent;padding:8px;min-width:48px;display:flex;align-items:center}button.svelte-1oalwmk:hover{background-color:var(--gray-65)}div.svelte-p108mq{display:flex;flex-direction:row;justify-content:space-between;column-gap:8px}main.svelte-p108mq{display:flex;flex-direction:column;row-gap:32px}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
)rawliteral";

const char iconSvg[] PROGMEM = R"rawliteral(
<svg class="iconify iconify--logos" width="32" height="32" aria-hidden="true" preserveAspectRatio="xMidYMid" role="img" version="1.1" viewBox="0 0 256.96 257" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient id="radialGradient9277" cx="128.48" cy="128.5" r="96.375" gradientUnits="userSpaceOnUse"><stop stop-color="#e6e6e6" offset="0"/><stop stop-color="#c6c6c6" offset=".67716"/><stop stop-color="#a5a5a5" offset="1"/></radialGradient><clipPath id="clipPath10832"><circle cx="128.48" cy="128.5" r="128.5" fill="none" style="paint-order:normal"/></clipPath></defs><g clip-path="url(#clipPath10832)"><rect x="-.01819" width="257" height="257" fill="#121212" style="paint-order:normal"/><circle cx="128.48" cy="128.5" r="96.375" fill="url(#radialGradient9277)" style="paint-order:normal"/><circle cx="96.357" cy="160.62" r="96.375" fill="#121212" style="paint-order:normal"/></g></svg>
)rawliteral";