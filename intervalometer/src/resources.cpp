#include "resources.h"

const char indexHtml[] PROGMEM = R"rawliteral(
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESP8266 Intervalometer</title>
    <script type="module">var kt=Object.defineProperty;var $t=(t,e,n)=>e in t?kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ue=(t,e,n)=>($t(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function E(){}const pt=t=>t;function Ct(t,e){for(const n in e)t[n]=e[n];return t}function _t(t){return t()}function He(){return Object.create(null)}function X(t){t.forEach(_t)}function me(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function St(t){return Object.keys(t).length===0}function It(t,...e){if(t==null){for(const o of e)o(void 0);return E}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function R(t,e,n){t.$$.on_destroy.push(It(e,n))}function we(t,e,n,o){if(t){const i=mt(t,e,n,o);return t[0](i)}}function mt(t,e,n,o){return t[1]&&o?Ct(n.ctx.slice(),t[1](o(e))):n.ctx}function ye(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],l=Math.max(e.dirty.length,i.length);for(let r=0;r<l;r+=1)s[r]=e.dirty[r]|i[r];return s}return e.dirty|i}return e.dirty}function ke(t,e,n,o,i,s){if(i){const l=mt(e,n,o,s);t.p(l,i)}}function $e(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function Ve(t){return t??""}function G(t,e,n){return t.set(n),e}function Tt(t){return t&&me(t.destroy)?t.destroy:E}const ht=typeof window<"u";let Pt=ht?()=>window.performance.now():()=>Date.now(),Fe=ht?t=>requestAnimationFrame(t):E;const fe=new Set;function gt(t){fe.forEach(e=>{e.c(t)||(fe.delete(e),e.f())}),fe.size!==0&&Fe(gt)}function Nt(t){let e;return fe.size===0&&Fe(gt),{promise:new Promise(n=>{fe.add(e={c:t,f:n})}),abort(){fe.delete(e)}}}function y(t,e){t.appendChild(e)}function bt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ot(t){const e=k("style");return e.textContent="/* empty */",Et(bt(t),e),e.sheet}function Et(t,e){return y(t.head||t,e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode&&t.parentNode.removeChild(t)}function vt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function Oe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function P(t){return document.createTextNode(t)}function O(){return P(" ")}function ie(){return P("")}function D(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function de(t){return t===""?null:+t}function Mt(t){return Array.from(t.childNodes)}function V(t,e){e=""+e,t.data!==e&&(t.data=e)}function ee(t,e){t.value=e??""}function x(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function se(t,e,n){t.classList.toggle(e,!!n)}function At(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}const Ee=new Map;let Me=0;function Lt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ut(t,e){const n={stylesheet:Ot(e),rules:{}};return Ee.set(t,n),n}function Ke(t,e,n,o,i,s,l,r=0){const f=16.666/o;let u=`{
`;for(let d=0;d<=1;d+=f){const h=e+(n-e)*s(d);u+=d*100+`%{${l(h,1-h)}}
`}const _=u+`100% {${l(n,1-n)}}
}`,m=`__svelte_${Lt(_)}_${r}`,a=bt(t),{stylesheet:b,rules:p}=Ee.get(a)||Ut(a,t);p[m]||(p[m]=!0,b.insertRule(`@keyframes ${m} ${_}`,b.cssRules.length));const c=t.style.animation||"";return t.style.animation=`${c?`${c}, `:""}${m} ${o}ms linear ${i}ms 1 both`,Me+=1,m}function jt(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=n.length-o.length;i&&(t.style.animation=o.join(", "),Me-=i,Me||Dt())}function Dt(){Fe(()=>{Me||(Ee.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&v(e)}),Ee.clear())})}let ze;function ve(t){ze=t}const ue=[],Ce=[];let ce=[];const Re=[],Rt=Promise.resolve();let qe=!1;function qt(){qe||(qe=!0,Rt.then(wt))}function pe(t){ce.push(t)}function Je(t){Re.push(t)}const je=new Set;let le=0;function wt(){if(le!==0)return;const t=ze;do{try{for(;le<ue.length;){const e=ue[le];le++,ve(e),Ft(e.$$)}}catch(e){throw ue.length=0,le=0,e}for(ve(null),ue.length=0,le=0;Ce.length;)Ce.pop()();for(let e=0;e<ce.length;e+=1){const n=ce[e];je.has(n)||(je.add(n),n())}ce.length=0}while(ue.length);for(;Re.length;)Re.pop()();qe=!1,je.clear(),ve(t)}function Ft(t){if(t.fragment!==null){t.update(),X(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pe)}}function zt(t){const e=[],n=[];ce.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),ce=e}let be;function Jt(){return be||(be=Promise.resolve(),be.then(()=>{be=null})),be}function De(t,e,n){t.dispatchEvent(At(`${e?"intro":"outro"}${n}`))}const Pe=new Set;let te;function Ie(){te={r:0,c:[],p:te}}function Te(){te.r||X(te.c),te=te.p}function C(t,e){t&&t.i&&(Pe.delete(t),t.i(e))}function N(t,e,n,o){if(t&&t.o){if(Pe.has(t))return;Pe.add(t),te.c.push(()=>{Pe.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}const Wt={duration:0};function Ae(t,e,n,o){let s=e(t,n,{direction:"both"}),l=o?0:1,r=null,f=null,u=null,_;function m(){u&&jt(t,u)}function a(p,c){const d=p.b-l;return c*=Math.abs(d),{a:l,b:p.b,d,duration:c,start:p.start,end:p.start+c,group:p.group}}function b(p){const{delay:c=0,duration:d=300,easing:h=pt,tick:S=E,css:z}=s||Wt,U={start:Pt()+c,b:p};p||(U.group=te,te.r+=1),"inert"in t&&(p?_!==void 0&&(t.inert=_):(_=t.inert,t.inert=!0)),r||f?f=U:(z&&(m(),u=Ke(t,l,p,d,c,h,z)),p&&S(0,1),r=a(U,d),pe(()=>De(t,p,"start")),Nt($=>{if(f&&$>f.start&&(r=a(f,d),f=null,De(t,r.b,"start"),z&&(m(),u=Ke(t,l,r.b,r.duration,0,h,s.css))),r){if($>=r.end)S(l=r.b,1-l),De(t,r.b,"end"),f||(r.b?m():--r.group.r||X(r.group.c)),r=null;else if($>=r.start){const A=$-r.start;l=r.a+r.d*h(A/r.duration),S(l,1-l)}}return!!(r||f)}))}return{run(p){me(s)?Jt().then(()=>{s=s({direction:p?"in":"out"}),b(p)}):b(p)},end(){m(),r=f=null}}}function _e(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Bt(t,e){N(t,1,1,()=>{e.delete(t.key)})}function Gt(t,e,n,o,i,s,l,r,f,u,_,m){let a=t.length,b=s.length,p=a;const c={};for(;p--;)c[t[p].key]=p;const d=[],h=new Map,S=new Map,z=[];for(p=b;p--;){const I=m(i,s,p),T=n(I);let M=l.get(T);M?o&&z.push(()=>M.p(I,e)):(M=u(T,I),M.c()),h.set(T,d[p]=M),T in c&&S.set(T,Math.abs(p-c[T]))}const U=new Set,$=new Set;function A(I){C(I,1),I.m(r,_),l.set(I.key,I),_=I.first,b--}for(;a&&b;){const I=d[b-1],T=t[a-1],M=I.key,Q=T.key;I===T?(_=I.first,a--,b--):h.has(Q)?!l.has(M)||U.has(M)?A(I):$.has(Q)?a--:S.get(M)>S.get(Q)?($.add(M),A(I)):(U.add(Q),a--):(f(T,l),a--)}for(;a--;){const I=t[a];h.has(I.key)||f(I,l)}for(;b;)A(d[b-1]);return X(z),d}function We(t,e,n){const o=t.$$.props[e];o!==void 0&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function J(t){t&&t.c()}function q(t,e,n){const{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),pe(()=>{const s=t.$$.on_mount.map(_t).filter(me);t.$$.on_destroy?t.$$.on_destroy.push(...s):X(s),t.$$.on_mount=[]}),i.forEach(pe)}function F(t,e){const n=t.$$;n.fragment!==null&&(zt(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ht(t,e){t.$$.dirty[0]===-1&&(ue.push(t),qt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(t,e,n,o,i,s,l=null,r=[-1]){const f=ze;ve(t);const u=t.$$={fragment:null,ctx:[],props:s,update:E,not_equal:i,bound:He(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:He(),dirty:r,skip_bound:!1,root:e.target||f.$$.root};l&&l(u.root);let _=!1;if(u.ctx=n?n(t,e.props||{},(m,a,...b)=>{const p=b.length?b[0]:a;return u.ctx&&i(u.ctx[m],u.ctx[m]=p)&&(!u.skip_bound&&u.bound[m]&&u.bound[m](p),_&&Ht(t,m)),a}):[],u.update(),_=!0,X(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const m=Mt(e.target);u.fragment&&u.fragment.l(m),m.forEach(v)}else u.fragment&&u.fragment.c();e.intro&&C(t.$$.fragment),q(t,e.target,e.anchor),wt()}ve(f)}class Z{constructor(){Ue(this,"$$");Ue(this,"$$set")}$destroy(){F(this,1),this.$destroy=E}$on(e,n){if(!me(n))return E;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(e){this.$$set&&!St(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Vt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Vt);const re=[];function he(t,e=E){let n;const o=new Set;function i(r){if(K(t,r)&&(t=r,n)){const f=!re.length;for(const u of o)u[1](),re.push(u,t);if(f){for(let u=0;u<re.length;u+=2)re[u][0](re[u+1]);re.length=0}}}function s(r){i(r(t))}function l(r,f=E){const u=[r,f];return o.add(u),o.size===1&&(n=e(i,s)||E),r(t),()=>{o.delete(u),o.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:l}}const Ne=he(!1),Qe=he("192.168.4.1"),ne=he({statusCode:0,statusMsg:"Page loaded.",sec:0,ms:0,cameraConnected:!1,intervalSec:35,isRunning:!1,cameraIP:"192.168.4.7",numShots:0,timeUntilNext:0,duration:0,timeUntilCompletion:0,shutterIsPressed:!1,actions:[],actionIndex:0}),H=he(!1),Se=he(),ae=he([{action:"Trigger shutter",fields:{},time:0,timeMode:"from start"}]);function Kt(t){const e=t-1;return e*e*e+1}function Xe(t,{delay:e=0,duration:n=400,easing:o=pt}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:s=>`opacity: ${s*i}`}}function Ye(t,{delay:e=0,duration:n=400,easing:o=Kt,axis:i="y"}={}){const s=getComputedStyle(t),l=+s.opacity,r=i==="y"?"height":"width",f=parseFloat(s[r]),u=i==="y"?["top","bottom"]:["left","right"],_=u.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),m=parseFloat(s[`padding${_[0]}`]),a=parseFloat(s[`padding${_[1]}`]),b=parseFloat(s[`margin${_[0]}`]),p=parseFloat(s[`margin${_[1]}`]),c=parseFloat(s[`border${_[0]}Width`]),d=parseFloat(s[`border${_[1]}Width`]);return{delay:e,duration:n,easing:o,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*l};${r}: ${h*f}px;padding-${u[0]}: ${h*m}px;padding-${u[1]}: ${h*a}px;margin-${u[0]}: ${h*b}px;margin-${u[1]}: ${h*p}px;border-${u[0]}-width: ${h*c}px;border-${u[1]}-width: ${h*d}px;`}}const Qt=t=>({}),Ze=t=>({});function xe(t){let e,n,o,i;const s=t[4].default,l=we(s,t,t[3],null);return{c(){e=k("div"),l&&l.c(),g(e,"id",n=`${t[0]}-body`),g(e,"class","body svelte-klc9jx")},m(r,f){w(r,e,f),l&&l.m(e,null),i=!0},p(r,f){l&&l.p&&(!i||f&8)&&ke(l,s,r,r[3],i?ye(s,r[3],f,null):$e(r[3]),null),(!i||f&1&&n!==(n=`${r[0]}-body`))&&g(e,"id",n)},i(r){i||(C(l,r),r&&pe(()=>{i&&(o||(o=Ae(e,Ye,{duration:300},!0)),o.run(1))}),i=!0)},o(r){N(l,r),r&&(o||(o=Ae(e,Ye,{duration:300},!1)),o.run(0)),i=!1},d(r){r&&v(e),l&&l.d(r),r&&o&&o.end()}}}function Xt(t){let e,n,o,i,s,l,r,f,u,_,m,a,b;const p=t[4].heading,c=we(p,t,t[3],Ze);let d=t[1]&&xe(t);return{c(){e=k("div"),n=k("button"),c&&c.c(),o=O(),i=k("div"),s=Oe("svg"),l=Oe("path"),_=O(),d&&d.c(),g(l,"d","M15 18l-6-6 6-6"),g(s,"class",r=Ve(t[1]?"rotated":"")+" svelte-klc9jx"),g(s,"xmlns","http://www.w3.org/2000/svg"),g(s,"width","24"),g(s,"height","24"),g(s,"viewBox","0 0 24 24"),g(s,"fill","none"),g(s,"stroke","currentColor"),g(s,"stroke-width","2"),g(s,"stroke-linecap","round"),g(s,"stroke-linejoin","round"),g(i,"class","arrow-container svelte-klc9jx"),g(n,"class","heading svelte-klc9jx"),g(n,"title",f=t[1]?"Collapse section":"Expand section"),g(n,"aria-expanded",t[1]),g(n,"aria-controls",u=`${t[0]}-body`),g(e,"class","section svelte-klc9jx")},m(h,S){w(h,e,S),y(e,n),c&&c.m(n,null),y(n,o),y(n,i),y(i,s),y(s,l),y(e,_),d&&d.m(e,null),m=!0,a||(b=D(n,"click",t[2]),a=!0)},p(h,[S]){c&&c.p&&(!m||S&8)&&ke(c,p,h,h[3],m?ye(p,h[3],S,Qt):$e(h[3]),Ze),(!m||S&2&&r!==(r=Ve(h[1]?"rotated":"")+" svelte-klc9jx"))&&g(s,"class",r),(!m||S&2&&f!==(f=h[1]?"Collapse section":"Expand section"))&&g(n,"title",f),(!m||S&2)&&g(n,"aria-expanded",h[1]),(!m||S&1&&u!==(u=`${h[0]}-body`))&&g(n,"aria-controls",u),h[1]?d?(d.p(h,S),S&2&&C(d,1)):(d=xe(h),d.c(),C(d,1),d.m(e,null)):d&&(Ie(),N(d,1,1,()=>{d=null}),Te())},i(h){m||(C(c,h),C(d),m=!0)},o(h){N(c,h),N(d),m=!1},d(h){h&&v(e),c&&c.d(h),d&&d.d(),a=!1,b()}}}function Yt(t,e,n){let{$$slots:o={},$$scope:i}=e,{name:s}=e;const l=`${s}-expanded`;let r;localStorage.getItem(l)?r=localStorage.getItem(l)==String(!0):r=!0;const f=()=>{n(1,r=!r),s&&localStorage.setItem(l,String(r))};return t.$$set=u=>{"name"in u&&n(0,s=u.name),"$$scope"in u&&n(3,i=u.$$scope)},[s,r,f,i,o]}class ge extends Z{constructor(e){super(),Y(this,e,Yt,Xt,K,{name:0})}}function Zt(t){let e;return{c(){e=k("p"),e.textContent="Disconnected",g(e,"class","error")},m(n,o){w(n,e,o)},p:E,d(n){n&&v(e)}}}function xt(t){let e,n,o=t[2].cameraIP+"",i;return{c(){e=k("p"),n=P("Connected to "),i=P(o),g(e,"class","success")},m(s,l){w(s,e,l),y(e,n),y(e,i)},p(s,l){l&4&&o!==(o=s[2].cameraIP+"")&&V(i,o)},d(s){s&&v(e)}}}function en(t){let e;return{c(){e=k("p"),e.textContent="Connecting..."},m(n,o){w(n,e,o)},p:E,d(n){n&&v(e)}}}function tn(t){let e,n,o,i,s,l,r,f,u,_;function m(p,c){return p[1]?en:p[2].cameraConnected?xt:Zt}let a=m(t),b=a(t);return{c(){e=k("label"),n=k("span"),n.textContent="IP address:",o=O(),i=k("input"),s=O(),l=k("button"),l.textContent="Connect",r=O(),b.c(),f=ie(),g(i,"placeholder","Camera IP address"),g(l,"class","inverse")},m(p,c){w(p,e,c),y(e,n),y(e,o),y(e,i),ee(i,t[0]),w(p,s,c),w(p,l,c),w(p,r,c),b.m(p,c),w(p,f,c),u||(_=[D(i,"input",t[4]),D(l,"click",t[3])],u=!0)},p(p,c){c&1&&i.value!==p[0]&&ee(i,p[0]),a===(a=m(p))&&b?b.p(p,c):(b.d(1),b=a(p),b&&(b.c(),b.m(f.parentNode,f)))},d(p){p&&(v(e),v(s),v(l),v(r),v(f)),b.d(p),u=!1,X(_)}}}function nn(t){let e;return{c(){e=k("h2"),e.textContent="Connect camera",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:E,d(n){n&&v(e)}}}function on(t){let e,n;return e=new ge({props:{name:"connect-camera",$$slots:{heading:[nn],default:[tn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){q(e,o,i),n=!0},p(o,[i]){const s={};i&135&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){N(e.$$.fragment,o),n=!1},d(o){F(e,o)}}}function sn(t,e,n){let o,i,s;R(t,H,_=>n(5,o=_)),R(t,Se,_=>n(6,i=_)),R(t,ne,_=>n(2,s=_));let l,r;ne.subscribe(_=>n(0,l=_.cameraIP||l)),H.subscribe(_=>n(1,r=_&&r));const f=()=>{i.send(JSON.stringify({command:"connect",cameraIP:l})),n(1,r=G(H,o=!0,o))};function u(){l=this.value,n(0,l)}return[l,r,s,f,u]}class ln extends Z{constructor(e){super(),Y(this,e,sn,on,K,{})}}function rn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Disconnect",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=D(e,"click",t[5]),n=!0)},p:E,d(i){i&&v(e),n=!1,o()}}}function un(t){let e,n,o;return{c(){e=k("button"),e.textContent="Connect",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=D(e,"click",t[4]),n=!0)},p:E,d(i){i&&v(e),n=!1,o()}}}function fn(t){let e;return{c(){e=k("p"),e.textContent="Disconnected",g(e,"class","error")},m(n,o){w(n,e,o)},p:E,d(n){n&&v(e)}}}function cn(t){let e,n,o;return{c(){e=k("p"),n=P("Connected to "),o=P(t[3]),g(e,"class","success")},m(i,s){w(i,e,s),y(e,n),y(e,o)},p(i,s){s&8&&V(o,i[3])},d(i){i&&v(e)}}}function an(t){let e;return{c(){e=k("p"),e.textContent="Connecting..."},m(n,o){w(n,e,o)},p:E,d(n){n&&v(e)}}}function dn(t){let e,n,o,i,s,l,r,f,u;function _(d,h){return!d[2]||d[0]!=d[3]?un:rn}let m=_(t),a=m(t);function b(d,h){return d[1]?an:d[2]?cn:fn}let p=b(t),c=p(t);return{c(){e=k("label"),n=k("span"),n.textContent="IP address:",o=O(),i=k("input"),s=O(),a.c(),l=O(),c.c(),r=ie(),g(i,"placeholder","ESP8266 IP address")},m(d,h){w(d,e,h),y(e,n),y(e,o),y(e,i),ee(i,t[0]),w(d,s,h),a.m(d,h),w(d,l,h),c.m(d,h),w(d,r,h),f||(u=D(i,"input",t[6]),f=!0)},p(d,h){h&1&&i.value!==d[0]&&ee(i,d[0]),m===(m=_(d))&&a?a.p(d,h):(a.d(1),a=m(d),a&&(a.c(),a.m(l.parentNode,l))),p===(p=b(d))&&c?c.p(d,h):(c.d(1),c=p(d),c&&(c.c(),c.m(r.parentNode,r)))},d(d){d&&(v(e),v(s),v(l),v(r)),a.d(d),c.d(d),f=!1,u()}}}function pn(t){let e;return{c(){e=k("h2"),e.textContent="Connect to ESP8266",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:E,d(n){n&&v(e)}}}function _n(t){let e,n;return e=new ge({props:{name:"connect-esp",$$slots:{heading:[pn],default:[dn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){q(e,o,i),n=!0},p(o,[i]){const s={};i&4111&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){N(e.$$.fragment,o),n=!1},d(o){F(e,o)}}}function mn(t,e,n){let o,i,s,l,r,f;R(t,Se,c=>n(8,o=c)),R(t,Ne,c=>n(2,i=c)),R(t,H,c=>n(9,s=c)),R(t,ne,c=>n(10,l=c)),R(t,ae,c=>n(11,r=c)),R(t,Qe,c=>n(3,f=c));let u=f,_,m=0;const a=()=>{G(Qe,f=u,f),o==null||o.close(),G(Se,o=new WebSocket(`ws://${f}:81`),o),o.addEventListener("message",c=>{m++,G(ne,l=JSON.parse(c.data),l),m==1&&G(ae,r=l.actions,r),G(H,s=!1,s)}),o.addEventListener("open",c=>{G(Ne,i=!0,i),n(1,_=!1)}),o.addEventListener("close",c=>{G(Ne,i=!1,i),n(1,_=!1)}),n(1,_=!0)},b=()=>{o==null||o.close()};a();function p(){u=this.value,n(0,u)}return[u,_,i,f,a,b,p]}class hn extends Z{constructor(e){super(),Y(this,e,mn,_n,K,{})}}const Le={"Trigger shutter":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/control/shutterbutton",httpMethod:"POST",body:{af:!1},fields:{}},"Control shutter":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/control/shutterbutton/manual",httpMethod:"POST",body:{action:"full_press",af:!1},fields:{Action:{key:"action",options:["full_press","release"]}}},"Set ISO":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/settings/iso",httpMethod:"PUT",body:{value:"400"},fields:{ISO:{key:"value",options:["auto","100","125","160","200","250","320","400","500","640","800","1000","1250","1600","2000","2500","3200","4000","5000","6400","8000","10000","12800","16000","20000","25600"]}}},"Set aperture":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/settings/av",httpMethod:"PUT",body:{value:"f8.0"},fields:{Aperture:{key:"value",options:["f3.5","f4.0","f4.5","f5.0","f5.6","f6.3","f7.1","f8.0","f9.0","f10","f11","f13","f14","f16","f18","f20","f22"]}}},"Set shutter speed":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/settings/tv",httpMethod:"PUT",body:{value:"1/125"},fields:{"Shutter speed":{key:"value",options:["1/4000","1/3200","1/2500","1/2000","1/1600","1/1250","1/1000","1/800","1/640","1/500","1/400","1/320","1/250","1/200","1/160","1/125","1/100","1/80","1/60","1/50","1/40","1/30","1/25","1/20","1/15","1/13","1/10","1/8","1/6","1/5","1/4",'0"3','0"4','0"5','0"6','0"8','1"','1"3','1"6','2"','2"5','3"2','4"','5"','6"','8"','10"','13"','15"','20"','25"','30"',"bulb"]}}},"Set exposure compensation":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/settings/exposure",httpMethod:"PUT",body:{value:"+0.0"},fields:{EV:{key:"value",options:["-3.0","-2_2/3","-2_1/3","-2.0","-1_2/3","-1_1/3","-1.0","-0_2/3","-0_1/3","+0.0","+0_1/3","+0_2/3","+1.0","+1_1/3","+1_2/3","+2.0","+2_1/3","+2_2/3","+3.0"]}}},"Set shooting mode":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/settings/shootingmode",httpMethod:"PUT",body:{value:"m"},fields:{Mode:{key:"value",options:["m","av","tv","p","auto"]}}},"Canon IR Trigger":{actionType:"IR_TRIGGER",body:{},fields:{}}};function gn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Start",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=D(e,"click",t[4]),n=!0)},p:E,d(i){i&&v(e),n=!1,o()}}}function bn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Stop",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=D(e,"click",t[5]),n=!0)},p:E,d(i){i&&v(e),n=!1,o()}}}function vn(t){let e;return{c(){e=k("p"),e.textContent="Intervalometer stopped."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function wn(t){let e;return{c(){e=k("p"),e.textContent="Intervalometer running..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function yn(t){let e;return{c(){e=k("p"),e.textContent="Loading..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function kn(t){let e,n,o,i,s,l,r,f,u,_,m,a,b,p;function c($,A){return $[3].isRunning?bn:gn}let d=c(t),h=d(t);function S($,A){return $[1]?yn:$[3].isRunning?wn:vn}let z=S(t),U=z(t);return{c(){e=k("label"),n=P(`Interval:\r
    `),o=k("input"),i=P(`\r
    seconds`),s=O(),l=k("label"),r=P(`Duration:\r
    `),f=k("input"),u=P(`\r
    seconds`),_=O(),h.c(),m=O(),U.c(),a=ie(),g(o,"type","number"),g(o,"step","any"),g(o,"min","1"),g(o,"placeholder","Interval in seconds"),g(f,"type","number"),g(f,"step","any"),g(f,"min","0"),g(f,"placeholder","Duration in seconds")},m($,A){w($,e,A),y(e,n),y(e,o),ee(o,t[0]),y(e,i),w($,s,A),w($,l,A),y(l,r),y(l,f),ee(f,t[2]),y(l,u),w($,_,A),h.m($,A),w($,m,A),U.m($,A),w($,a,A),b||(p=[D(o,"input",t[6]),D(f,"input",t[7])],b=!0)},p($,A){A&1&&de(o.value)!==$[0]&&ee(o,$[0]),A&4&&de(f.value)!==$[2]&&ee(f,$[2]),d===(d=c($))&&h?h.p($,A):(h.d(1),h=d($),h&&(h.c(),h.m(m.parentNode,m))),z!==(z=S($))&&(U.d(1),U=z($),U&&(U.c(),U.m(a.parentNode,a)))},d($){$&&(v(e),v(s),v(l),v(_),v(m),v(a)),h.d($),U.d($),b=!1,X(p)}}}function $n(t){let e;return{c(){e=k("h2"),e.textContent="Intervalometer",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:E,d(n){n&&v(e)}}}function Cn(t){let e,n;return e=new ge({props:{name:"intervalometer",$$slots:{heading:[$n],default:[kn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){q(e,o,i),n=!0},p(o,[i]){const s={};i&2063&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){N(e.$$.fragment,o),n=!1},d(o){F(e,o)}}}function Sn(t,e,n){let o,i,s,l;R(t,H,p=>n(8,o=p)),R(t,Se,p=>n(9,i=p)),R(t,ae,p=>n(10,s=p)),R(t,ne,p=>n(3,l=p));let r,f,u;ne.subscribe(p=>{n(0,r=p.intervalSec||r),n(2,u=p.duration||u)}),H.subscribe(p=>n(1,f=p&&f));const _=()=>{const p=[];for(const c of s){const d=Le[c.action],h=JSON.parse(JSON.stringify(d.body));for(const S in c.fields)h[d.fields[S].key]=c.fields[S];d.actionType==="CCAPI"?p.push({name:c.action,actionType:d.actionType,time:c.time,timeMode:c.timeMode,endpointUrl:d.endpointUrl,httpMethod:d.httpMethod,body:JSON.stringify(h)}):p.push({name:c.action,actionType:d.actionType,time:c.time,timeMode:c.timeMode,body:JSON.stringify(h)})}i.send(JSON.stringify({command:"start",intervalSec:r,duration:u,sequence:p,actions:s})),n(1,f=G(H,o=!0,o))},m=()=>{i.send(JSON.stringify({command:"stop"})),n(1,f=G(H,o=!0,o))};function a(){r=de(this.value),n(0,r)}function b(){u=de(this.value),n(2,u)}return[r,f,u,l,_,m,a,b]}class In extends Z{constructor(e){super(),Y(this,e,Sn,Cn,K,{})}}function Tn(t,e={enabled:!0}){let{enabled:n,eventType:o,nodeForEvent:i,options:s,capture:l}=et(e);function r(f){f.target&&t&&!t.contains(f.target)&&!f.defaultPrevented&&t.dispatchEvent(new CustomEvent("clickoutside",{detail:f}))}return e.enabled!==!1&&i.addEventListener(o,r,s),{update(f){i.removeEventListener(o,r,l),{enabled:n,eventType:o,nodeForEvent:i,options:s,capture:l}=et(f),n&&i.addEventListener(o,r,s)},destroy(){i.removeEventListener(o,r,l)}}}function et(t={}){var e,n;return{enabled:t.enabled??!0,nodeForEvent:((e=t.limit)==null?void 0:e.parent)??document,eventType:t.event??"click",options:t.options,capture:typeof t.options=="object"?(n=t.options)==null?void 0:n.capture:t.options}}const Pn=t=>({}),tt=t=>({toggleDropdown:t[4]}),Nn=t=>({}),nt=t=>({toggleDropdown:t[4]});function ot(t){let e,n,o,i;const s=t[7].buttons,l=we(s,t,t[6],tt);return{c(){e=k("div"),n=k("div"),l&&l.c(),g(n,"class","options-menu svelte-azbhie"),x(n,"width",t[2]?"100%":void 0),x(n,"background-color",t[3]?"var(--gray-85)":"var(--gray-90)"),g(e,"class","menu-container svelte-azbhie"),x(e,"top",t[1]==="top"?"0.5rem":"100%"),x(e,"width",t[2]?"100%":void 0)},m(r,f){w(r,e,f),y(e,n),l&&l.m(n,null),i=!0},p(r,f){l&&l.p&&(!i||f&64)&&ke(l,s,r,r[6],i?ye(s,r[6],f,Pn):$e(r[6]),tt),f&4&&x(n,"width",r[2]?"100%":void 0),f&8&&x(n,"background-color",r[3]?"var(--gray-85)":"var(--gray-90)"),f&2&&x(e,"top",r[1]==="top"?"0.5rem":"100%"),f&4&&x(e,"width",r[2]?"100%":void 0)},i(r){i||(C(l,r),r&&pe(()=>{i&&(o||(o=Ae(e,Xe,{duration:100},!0)),o.run(1))}),i=!0)},o(r){N(l,r),r&&(o||(o=Ae(e,Xe,{duration:100},!1)),o.run(0)),i=!1},d(r){r&&v(e),l&&l.d(r),r&&o&&o.end()}}}function On(t){let e,n,o,i,s,l;const r=t[7].button,f=we(r,t,t[6],nt);let u=t[0]&&ot(t);const _=t[7].default,m=we(_,t,t[6],null);return{c(){e=k("div"),f&&f.c(),n=O(),u&&u.c(),o=O(),m&&m.c(),g(e,"class","options-container svelte-azbhie"),x(e,"flex",t[2]?"1":void 0)},m(a,b){w(a,e,b),f&&f.m(e,null),y(e,n),u&&u.m(e,null),y(e,o),m&&m.m(e,null),i=!0,s||(l=[Tt(Tn.call(null,e)),D(e,"clickoutside",t[8])],s=!0)},p(a,[b]){f&&f.p&&(!i||b&64)&&ke(f,r,a,a[6],i?ye(r,a[6],b,Nn):$e(a[6]),nt),a[0]?u?(u.p(a,b),b&1&&C(u,1)):(u=ot(a),u.c(),C(u,1),u.m(e,o)):u&&(Ie(),N(u,1,1,()=>{u=null}),Te()),m&&m.p&&(!i||b&64)&&ke(m,_,a,a[6],i?ye(_,a[6],b,null):$e(a[6]),null),b&4&&x(e,"flex",a[2]?"1":void 0)},i(a){i||(C(f,a),C(u),C(m,a),i=!0)},o(a){N(f,a),N(u),N(m,a),i=!1},d(a){a&&v(e),f&&f.d(a),u&&u.d(),m&&m.d(a),s=!1,X(l)}}}function En(t,e,n){let{$$slots:o={},$$scope:i}=e,{closeCondition:s=!1}=e,{align:l="bottom"}=e,{showOptions:r=!1}=e,{fullWidth:f=!1}=e,{lighter:u=!1}=e;const _=()=>n(0,r=!r),m=()=>n(0,r=!1);return t.$$set=a=>{"closeCondition"in a&&n(5,s=a.closeCondition),"align"in a&&n(1,l=a.align),"showOptions"in a&&n(0,r=a.showOptions),"fullWidth"in a&&n(2,f=a.fullWidth),"lighter"in a&&n(3,u=a.lighter),"$$scope"in a&&n(6,i=a.$$scope)},t.$$.update=()=>{t.$$.dirty&33&&n(0,r=!s&&r)},[r,l,f,u,_,s,i,o,m]}class Mn extends Z{constructor(e){super(),Y(this,e,En,On,K,{closeCondition:5,align:1,showOptions:0,fullWidth:2,lighter:3})}}function it(t,e,n){const o=t.slice();return o[7]=e[n],o}function An(t){let e,n,o,i,s,l,r;return{c(){e=k("button"),n=P(t[0]),o=O(),i=Oe("svg"),s=Oe("path"),g(s,"d","M6 9l6 6 6-6"),g(i,"xmlns","http://www.w3.org/2000/svg"),g(i,"width","1.3em"),g(i,"height","1.3em"),g(i,"viewBox","0 0 24 24"),g(i,"fill","none"),g(i,"stroke","currentColor"),g(i,"stroke-width","2"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(e,"slot","button"),g(e,"title",t[2]),g(e,"class","select-dropdown-button svelte-1w71hwl"),e.disabled=t[3]},m(f,u){w(f,e,u),y(e,n),y(e,o),y(e,i),y(i,s),l||(r=D(e,"click",function(){me(t[6])&&t[6].apply(this,arguments)}),l=!0)},p(f,u){t=f,u&1&&V(n,t[0]),u&4&&g(e,"title",t[2]),u&8&&(e.disabled=t[3])},d(f){f&&v(e),l=!1,r()}}}function st(t){let e,n=t[7]+"",o,i,s;function l(){return t[5](t[7],t[6])}return{c(){e=k("button"),o=P(n)},m(r,f){w(r,e,f),y(e,o),i||(s=D(e,"click",l),i=!0)},p(r,f){t=r,f&16&&n!==(n=t[7]+"")&&V(o,n)},d(r){r&&v(e),i=!1,s()}}}function lt(t){let e,n=t[0]!==t[7]&&st(t);return{c(){n&&n.c(),e=ie()},m(o,i){n&&n.m(o,i),w(o,e,i)},p(o,i){o[0]!==o[7]?n?n.p(o,i):(n=st(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(o){o&&v(e),n&&n.d(o)}}}function Ln(t){let e,n=_e(t[4]),o=[];for(let i=0;i<n.length;i+=1)o[i]=lt(it(t,n,i));return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=ie()},m(i,s){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,s);w(i,e,s)},p(i,s){if(s&81){n=_e(i[4]);let l;for(l=0;l<n.length;l+=1){const r=it(i,n,l);o[l]?o[l].p(r,s):(o[l]=lt(r),o[l].c(),o[l].m(e.parentNode,e))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(i){i&&v(e),vt(o,i)}}}function Un(t){let e,n,o,i,s;return i=new Mn({props:{fullWidth:!0,lighter:!0,$$slots:{buttons:[Ln,({toggleDropdown:l})=>({6:l}),({toggleDropdown:l})=>l?64:0],button:[An,({toggleDropdown:l})=>({6:l}),({toggleDropdown:l})=>l?64:0]},$$scope:{ctx:t}}}),{c(){e=k("div"),n=P(t[1]),o=P(`:\r
  `),J(i.$$.fragment),g(e,"class","select-dropdown svelte-1w71hwl")},m(l,r){w(l,e,r),y(e,n),y(e,o),q(i,e,null),s=!0},p(l,[r]){(!s||r&2)&&V(n,l[1]);const f={};r&1117&&(f.$$scope={dirty:r,ctx:l}),i.$set(f)},i(l){s||(C(i.$$.fragment,l),s=!0)},o(l){N(i.$$.fragment,l),s=!1},d(l){l&&v(e),F(i)}}}function jn(t,e,n){let{label:o}=e,{buttonTitle:i}=e,{disabled:s=!1}=e,{value:l}=e,{options:r}=e;const f=(u,_)=>{n(0,l=u),_()};return t.$$set=u=>{"label"in u&&n(1,o=u.label),"buttonTitle"in u&&n(2,i=u.buttonTitle),"disabled"in u&&n(3,s=u.disabled),"value"in u&&n(0,l=u.value),"options"in u&&n(4,r=u.options)},[l,o,i,s,r,f]}class Be extends Z{constructor(e){super(),Y(this,e,jn,Un,K,{label:1,buttonTitle:2,disabled:3,value:0,options:4})}}function rt(t,e,n){const o=t.slice();return o[7]=e[n],o[8]=e,o[9]=n,o}function ut(t){let e,n,o,i,s;function l(f){t[6](f,t[7])}let r={label:t[7],buttonTitle:"Choose value for"+t[7],options:t[3].fields[t[7]].options};return t[0].fields[t[7]]!==void 0&&(r.value=t[0].fields[t[7]]),n=new Be({props:r}),Ce.push(()=>We(n,"value",l)),{c(){e=k("div"),J(n.$$.fragment),i=O()},m(f,u){w(f,e,u),q(n,e,null),y(e,i),s=!0},p(f,u){t=f;const _={};u&1&&(_.label=t[7]),u&1&&(_.buttonTitle="Choose value for"+t[7]),u&1&&(_.options=t[3].fields[t[7]].options),!o&&u&1&&(o=!0,_.value=t[0].fields[t[7]],Je(()=>o=!1)),n.$set(_)},i(f){s||(C(n.$$.fragment,f),s=!0)},o(f){N(n.$$.fragment,f),s=!1},d(f){f&&v(e),F(n)}}}function Dn(t){let e,n,o,i=t[1]+1+"",s,l,r=t[0].action+"",f,u,_,m,a,b,p,c,d,h,S,z,U,$,A,I;function T(L){t[5](L)}let M={label:"Offset",buttonTitle:"Choose time offset mode",options:["from start","after previous"]};t[0].timeMode!==void 0&&(M.value=t[0].timeMode),S=new Be({props:M}),Ce.push(()=>We(S,"value",T));let Q=_e(Object.keys(t[0].fields)),j=[];for(let L=0;L<Q.length;L+=1)j[L]=ut(rt(t,Q,L));const yt=L=>N(j[L],1,1,()=>{j[L]=null});return{c(){e=k("div"),n=k("div"),o=k("h3"),s=P(i),l=P(". "),f=P(r),u=O(),_=k("button"),_.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',m=O(),a=k("label"),b=P(`Time:\r
    `),p=k("input"),c=P(`\r
    seconds`),d=O(),h=k("div"),J(S.$$.fragment),U=O();for(let L=0;L<j.length;L+=1)j[L].c();g(_,"class","delete-container svelte-z1q96p"),g(n,"class","heading svelte-z1q96p"),g(p,"type","number"),g(p,"step","any"),g(p,"min","0"),g(p,"placeholder","Time offset in seconds"),g(a,"class","svelte-z1q96p"),g(e,"class","container svelte-z1q96p")},m(L,W){w(L,e,W),y(e,n),y(n,o),y(o,s),y(o,l),y(o,f),y(n,u),y(n,_),y(e,m),y(e,a),y(a,b),y(a,p),ee(p,t[0].time),y(a,c),y(e,d),y(e,h),q(S,h,null),y(e,U);for(let oe=0;oe<j.length;oe+=1)j[oe]&&j[oe].m(e,null);$=!0,A||(I=[D(_,"click",function(){me(t[2])&&t[2].apply(this,arguments)}),D(p,"input",t[4])],A=!0)},p(L,[W]){t=L,(!$||W&2)&&i!==(i=t[1]+1+"")&&V(s,i),(!$||W&1)&&r!==(r=t[0].action+"")&&V(f,r),W&1&&de(p.value)!==t[0].time&&ee(p,t[0].time);const oe={};if(!z&&W&1&&(z=!0,oe.value=t[0].timeMode,Je(()=>z=!1)),S.$set(oe),W&9){Q=_e(Object.keys(t[0].fields));let B;for(B=0;B<Q.length;B+=1){const Ge=rt(t,Q,B);j[B]?(j[B].p(Ge,W),C(j[B],1)):(j[B]=ut(Ge),j[B].c(),C(j[B],1),j[B].m(e,null))}for(Ie(),B=Q.length;B<j.length;B+=1)yt(B);Te()}},i(L){if(!$){C(S.$$.fragment,L);for(let W=0;W<Q.length;W+=1)C(j[W]);$=!0}},o(L){N(S.$$.fragment,L),j=j.filter(Boolean);for(let W=0;W<j.length;W+=1)N(j[W]);$=!1},d(L){L&&v(e),F(S),vt(j,L),A=!1,X(I)}}}function Rn(t,e,n){let{action:o}=e,{index:i}=e,{deleteAction:s}=e;const l=Le[o.action];function r(){o.time=de(this.value),n(0,o)}function f(_){t.$$.not_equal(o.timeMode,_)&&(o.timeMode=_,n(0,o))}function u(_,m){t.$$.not_equal(o.fields[m],_)&&(o.fields[m]=_,n(0,o))}return t.$$set=_=>{"action"in _&&n(0,o=_.action),"index"in _&&n(1,i=_.index),"deleteAction"in _&&n(2,s=_.deleteAction)},[o,i,s,l,r,f,u]}class qn extends Z{constructor(e){super(),Y(this,e,Rn,Dn,K,{action:0,index:1,deleteAction:2})}}function ft(t,e,n){const o=t.slice();return o[5]=e[n],o[7]=n,o}function ct(t,e){let n,o,i;function s(){return e[3](e[5])}return o=new qn({props:{action:e[5],index:e[7],deleteAction:s}}),{key:t,first:null,c(){n=ie(),J(o.$$.fragment),this.first=n},m(l,r){w(l,n,r),q(o,l,r),i=!0},p(l,r){e=l;const f={};r&2&&(f.action=e[5]),r&2&&(f.index=e[7]),r&2&&(f.deleteAction=s),o.$set(f)},i(l){i||(C(o.$$.fragment,l),i=!0)},o(l){N(o.$$.fragment,l),i=!1},d(l){l&&v(n),F(o,l)}}}function Fn(t){let e=[],n=new Map,o,i,s,l,r,f,u,_,m=_e(t[1]);const a=c=>c[5];for(let c=0;c<m.length;c+=1){let d=ft(t,m,c),h=a(d);n.set(h,e[c]=ct(h,d))}function b(c){t[4](c)}let p={label:"New action",buttonTitle:"Choose new action type",options:Object.keys(Le)};return t[0]!==void 0&&(p.value=t[0]),i=new Be({props:p}),Ce.push(()=>We(i,"value",b)),{c(){for(let c=0;c<e.length;c+=1)e[c].c();o=O(),J(i.$$.fragment),l=O(),r=k("button"),r.textContent="Add action",g(r,"class","inverse")},m(c,d){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(c,d);w(c,o,d),q(i,c,d),w(c,l,d),w(c,r,d),f=!0,u||(_=D(r,"click",t[2]),u=!0)},p(c,d){d&2&&(m=_e(c[1]),Ie(),e=Gt(e,d,a,1,c,m,n,o.parentNode,Bt,ct,o,ft),Te());const h={};!s&&d&1&&(s=!0,h.value=c[0],Je(()=>s=!1)),i.$set(h)},i(c){if(!f){for(let d=0;d<m.length;d+=1)C(e[d]);C(i.$$.fragment,c),f=!0}},o(c){for(let d=0;d<e.length;d+=1)N(e[d]);N(i.$$.fragment,c),f=!1},d(c){c&&(v(o),v(l),v(r));for(let d=0;d<e.length;d+=1)e[d].d(c);F(i,c),u=!1,_()}}}function zn(t){let e;return{c(){e=k("h2"),e.textContent="Sequence",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:E,d(n){n&&v(e)}}}function Jn(t){let e,n;return e=new ge({props:{name:"sequence",$$slots:{heading:[zn],default:[Fn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){q(e,o,i),n=!0},p(o,[i]){const s={};i&259&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){N(e.$$.fragment,o),n=!1},d(o){F(e,o)}}}function Wn(t,e,n){let o;R(t,ae,f=>n(1,o=f));let i="Trigger shutter";const s=()=>{const f=Le[i];o.push({action:i,fields:Object.fromEntries(Object.entries(f.fields).map(([u,_])=>[u,f.body[_.key]])),time:0,timeMode:"after previous"}),ae.set(o)},l=f=>{G(ae,o=o.filter(u=>u!==f),o)};function r(f){i=f,n(0,i)}return[i,o,s,l,r]}class Bn extends Z{constructor(e){super(),Y(this,e,Wn,Jn,K,{})}}function Gn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Press shutter",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=D(e,"click",t[3]),n=!0)},p:E,d(i){i&&v(e),n=!1,o()}}}function Hn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Release shutter",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=D(e,"click",t[4]),n=!0)},p:E,d(i){i&&v(e),n=!1,o()}}}function Vn(t){let e;return{c(){e=k("p"),e.textContent="Shutter is not pressed."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Kn(t){let e;return{c(){e=k("p"),e.textContent="Shutter is pressed..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Qn(t){let e;return{c(){e=k("p"),e.textContent="Loading..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Xn(t){let e,n,o,i,s,l,r,f;function u(c,d){return c[1].shutterIsPressed?Hn:Gn}let _=u(t),m=_(t);function a(c,d){return c[0]?Qn:c[1].shutterIsPressed?Kn:Vn}let b=a(t),p=b(t);return{c(){e=k("button"),e.textContent="Trigger shutter",n=O(),m.c(),o=O(),i=k("button"),i.textContent="Trigger IR release",s=O(),p.c(),l=ie(),g(e,"class","inverse"),g(i,"class","inverse")},m(c,d){w(c,e,d),w(c,n,d),m.m(c,d),w(c,o,d),w(c,i,d),w(c,s,d),p.m(c,d),w(c,l,d),r||(f=[D(e,"click",t[2]),D(i,"click",t[5])],r=!0)},p(c,d){_===(_=u(c))&&m?m.p(c,d):(m.d(1),m=_(c),m&&(m.c(),m.m(o.parentNode,o))),b!==(b=a(c))&&(p.d(1),p=b(c),p&&(p.c(),p.m(l.parentNode,l)))},d(c){c&&(v(e),v(n),v(o),v(i),v(s),v(l)),m.d(c),p.d(c),r=!1,X(f)}}}function Yn(t){let e;return{c(){e=k("h2"),e.textContent="Shutter",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:E,d(n){n&&v(e)}}}function Zn(t){let e,n;return e=new ge({props:{name:"shutter",$$slots:{heading:[Yn],default:[Xn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){q(e,o,i),n=!0},p(o,[i]){const s={};i&259&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){N(e.$$.fragment,o),n=!1},d(o){F(e,o)}}}function xn(t,e,n){let o,i,s;R(t,H,m=>n(6,o=m)),R(t,Se,m=>n(7,i=m)),R(t,ne,m=>n(1,s=m));let l;return H.subscribe(m=>n(0,l=m&&l)),[l,s,()=>{i.send(JSON.stringify({command:"triggerShutter"})),n(0,l=G(H,o=!0,o))},()=>{i.send(JSON.stringify({command:"pressShutter"})),n(0,l=G(H,o=!0,o))},()=>{i.send(JSON.stringify({command:"releaseShutter"})),n(0,l=G(H,o=!0,o))},()=>{i.send(JSON.stringify({command:"triggerIR"})),n(0,l=G(H,o=!0,o))}]}class eo extends Z{constructor(e){super(),Y(this,e,xn,Zn,K,{})}}function at(t){let e,n,o=t[1].toFixed(1)+"",i;return{c(){e=k("br"),n=P("Time until completion: "),i=P(o)},m(s,l){w(s,e,l),w(s,n,l),w(s,i,l)},p(s,l){l&2&&o!==(o=s[1].toFixed(1)+"")&&V(i,o)},d(s){s&&(v(e),v(n),v(i))}}}function to(t){let e,n,o=t[2].statusCode+"",i,s,l=t[2].statusMsg+"",r,f,u,_,m=t[2].numShots+"",a,b,p=(t[2].actionIndex==-1?1:t[2].actionIndex+1)+"",c,d,h=t[2].actions.length+"",S,z,U=t[0].toFixed(1)+"",$,A,I=t[1]>0&&at(t);return{c(){e=k("p"),n=P("Status code: "),i=P(o),s=P(`\r
    Status message: `),r=P(l),f=O(),u=k("p"),_=P("Number of cycles: "),a=P(m),b=P(`\r
    Next action index: `),c=P(p),d=P("/"),S=P(h),z=P(`\r
    Time until next action: `),$=P(U),A=O(),I&&I.c(),se(e,"success",t[2].statusCode==200),se(e,"warning",t[2].statusCode==0),se(e,"error",t[2].statusCode!=200&&t[2].statusCode!=0)},m(T,M){w(T,e,M),y(e,n),y(e,i),y(e,s),y(e,r),w(T,f,M),w(T,u,M),y(u,_),y(u,a),y(u,b),y(u,c),y(u,d),y(u,S),y(u,z),y(u,$),y(u,A),I&&I.m(u,null)},p(T,M){M&4&&o!==(o=T[2].statusCode+"")&&V(i,o),M&4&&l!==(l=T[2].statusMsg+"")&&V(r,l),M&4&&se(e,"success",T[2].statusCode==200),M&4&&se(e,"warning",T[2].statusCode==0),M&4&&se(e,"error",T[2].statusCode!=200&&T[2].statusCode!=0),M&4&&m!==(m=T[2].numShots+"")&&V(a,m),M&4&&p!==(p=(T[2].actionIndex==-1?1:T[2].actionIndex+1)+"")&&V(c,p),M&4&&h!==(h=T[2].actions.length+"")&&V(S,h),M&1&&U!==(U=T[0].toFixed(1)+"")&&V($,U),T[1]>0?I?I.p(T,M):(I=at(T),I.c(),I.m(u,null)):I&&(I.d(1),I=null)},d(T){T&&(v(e),v(f),v(u)),I&&I.d()}}}function no(t){let e;return{c(){e=k("h2"),e.textContent="Status",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:E,d(n){n&&v(e)}}}function oo(t){let e,n;return e=new ge({props:{name:"status",$$slots:{heading:[no],default:[to]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){q(e,o,i),n=!0},p(o,[i]){const s={};i&39&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(C(e.$$.fragment,o),n=!0)},o(o){N(e.$$.fragment,o),n=!1},d(o){F(e,o)}}}function io(t,e,n){let o;R(t,ne,f=>n(2,o=f));let i=Date.now(),s=0,l=0,r;return ne.subscribe(f=>{i=Date.now(),clearInterval(r),f.isRunning?r=setInterval(()=>{n(0,s=(o.timeUntilNext-(Date.now()-i))/1e3),n(1,l=(o.timeUntilCompletion-(Date.now()-i))/1e3)},100):(n(0,s=0),n(1,l=0))}),[s,l,o]}class so extends Z{constructor(e){super(),Y(this,e,io,oo,K,{})}}function lo(t){let e,n,o;return{c(){e=k("button"),e.innerHTML='<img src="/icon.svg" alt="Crescent icon"/>',g(e,"title","Switch theme"),g(e,"class","svelte-1oalwmk")},m(i,s){w(i,e,s),n||(o=D(e,"click",t[0]),n=!0)},p:E,i:E,o:E,d(i){i&&v(e),n=!1,o()}}}function ro(t,e,n){let{theme:o=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}=e;const i=()=>{const l=window.document.documentElement.classList;o=="dark"?l.add("dark"):l.remove("dark")},s=()=>{n(1,o=o=="light"?"dark":"light"),localStorage.setItem("theme",o),i()};return i(),t.$$set=l=>{"theme"in l&&n(1,o=l.theme)},[s,o]}class uo extends Z{constructor(e){super(),Y(this,e,ro,lo,K,{theme:1})}}function dt(t){let e,n,o,i,s,l,r,f;return e=new ln({}),o=new In({}),s=new Bn({}),r=new eo({}),{c(){J(e.$$.fragment),n=O(),J(o.$$.fragment),i=O(),J(s.$$.fragment),l=O(),J(r.$$.fragment)},m(u,_){q(e,u,_),w(u,n,_),q(o,u,_),w(u,i,_),q(s,u,_),w(u,l,_),q(r,u,_),f=!0},i(u){f||(C(e.$$.fragment,u),C(o.$$.fragment,u),C(s.$$.fragment,u),C(r.$$.fragment,u),f=!0)},o(u){N(e.$$.fragment,u),N(o.$$.fragment,u),N(s.$$.fragment,u),N(r.$$.fragment,u),f=!1},d(u){u&&(v(n),v(i),v(l)),F(e,u),F(o,u),F(s,u),F(r,u)}}}function fo(t){let e,n,o,i,s,l,r,f,u,_,m;s=new uo({}),r=new so({}),u=new hn({});let a=t[0]&&dt();return{c(){e=k("main"),n=k("div"),o=k("h1"),o.textContent="ESP8266 Intervalometer",i=O(),J(s.$$.fragment),l=O(),J(r.$$.fragment),f=O(),J(u.$$.fragment),_=O(),a&&a.c(),g(n,"class","svelte-p108mq"),g(e,"class","svelte-p108mq")},m(b,p){w(b,e,p),y(e,n),y(n,o),y(n,i),q(s,n,null),y(e,l),q(r,e,null),y(e,f),q(u,e,null),y(e,_),a&&a.m(e,null),m=!0},p(b,[p]){b[0]?a?p&1&&C(a,1):(a=dt(),a.c(),C(a,1),a.m(e,null)):a&&(Ie(),N(a,1,1,()=>{a=null}),Te())},i(b){m||(C(s.$$.fragment,b),C(r.$$.fragment,b),C(u.$$.fragment,b),C(a),m=!0)},o(b){N(s.$$.fragment,b),N(r.$$.fragment,b),N(u.$$.fragment,b),N(a),m=!1},d(b){b&&v(e),F(s),F(r),F(u),a&&a.d()}}}function co(t,e,n){let o;return R(t,Ne,i=>n(0,o=i)),[o]}class ao extends Z{constructor(e){super(),Y(this,e,co,fo,K,{})}}new ao({target:document.getElementById("app")});</script>
    <style>:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;font-size:16px;box-sizing:border-box;color:var(--gray-5);background-color:var(--gray-95);transition:background-color .2s,color .2s}*,*:before,*:after{box-sizing:inherit}body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:400}ol,ul{list-style:none}img{max-width:100%;height:auto}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex}:root{--black: #121212;--white: #f0f0f0;--dark: #4c4c4c;--light: #acacac;--darker: #2d2d2d;--darkest: #1e1e1e;--lighter: #d1d1d1;--lightest: #e0e0e0;--medium: #888888;--light-red: #ff8484;--dark-red: #b70000;--light-green: #87ff85;--dark-green: #028100;--light-yellow: #fffd85;--dark-yellow: #768500}:root:not(.dark){--gray-5: var(--black);--gray-10: var(--darkest);--gray-15: var(--darker);--gray-35: var(--dark);--gray-50: var(--medium);--gray-65: var(--light);--gray-85: var(--lighter);--gray-90: var(--lightest);--gray-95: var(--white);--green-5: var(--dark-green);--green-95: var(--light-green);--red-5: var(--dark-red);--red-95: var(--light-red);--yellow-5: var(--dark-yellow);--yellow-95: var(--light-yellow)}:root.dark{--gray-5: var(--white);--gray-10: var(--lightest);--gray-15: var(--lighter);--gray-35: var(--light);--gray-50: var(--medium);--gray-65: var(--dark);--gray-85: var(--darker);--gray-90: var(--darkest);--gray-95: var(--black);--green-5: var(--light-green);--green-95: var(--dark-green);--red-5: var(--light-red);--red-95: var(--dark-red);--yellow-5: var(--light-yellow);--yellow-95: var(--dark-yellow)}#app{width:100%;max-width:480px;margin:0 auto;padding:2rem}button{border-radius:.5rem;border:1px solid transparent;padding:.6em 1.2rem;font-size:1rem;font-weight:500;font-family:inherit;color:var(--gray-5);background-color:transparent;cursor:pointer;transition:background-color .2s,color .2s}button:hover:not(:disabled){background-color:var(--gray-65)}button:disabled{color:var(--gray-50);cursor:not-allowed}button.inverse{color:var(--gray-95);background-color:var(--gray-5)}button.inverse:hover:not(:disabled){background-color:var(--gray-35)}button.inverse:disabled{background-color:var(--gray-50);cursor:not-allowed}label{display:flex;align-items:center;gap:16px;background-color:var(--gray-90);padding:10px 16px;border-radius:8px;transition:background-color .2s}label>span{flex-shrink:0}input{border-width:2px;border-color:transparent;border-style:solid;border-radius:8px;padding:.6em;outline:none;font-size:inherit;font-family:inherit;color:var(--gray-5);background-color:var(--gray-85);transition:background-color .2s,color .2s,border-color .2s;width:100%}input:hover{border-color:var(--gray-65)}input:focus{border-color:var(--gray-50)}input:disabled{border-color:transparent;color:var(--gray-50);cursor:not-allowed}.success{color:var(--green-5)}.warning{color:var(--yellow-5)}.error{color:var(--red-5)}p{white-space:pre-line;overflow-wrap:break-word}.section.svelte-klc9jx{border-style:solid;border-width:2px;border-color:var(--gray-50);border-radius:16px;display:flex;flex-direction:column;padding:16px 16px 0;transition:border-color .2s}.body.svelte-klc9jx{display:flex;flex-direction:column;row-gap:16px;padding-bottom:16px}.heading.svelte-klc9jx{all:unset;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-bottom:16px}.heading.svelte-klc9jx:hover{background-color:transparent}.arrow-container.svelte-klc9jx{transition:background-color .2s;background-color:transparent;border-radius:8px;padding:4px;display:flex;align-items:center}.arrow-container.svelte-klc9jx:hover{background-color:var(--gray-65)}svg.svelte-klc9jx{transition:transform .3s;color:inherit}svg.rotated.svelte-klc9jx{transform:rotate(-90deg)}.options-container.svelte-azbhie{position:relative}.menu-container.svelte-azbhie{position:absolute;left:0;z-index:1;white-space:pre}.options-menu.svelte-azbhie{display:inline-flex;flex-direction:column;padding:.5rem;border-radius:.7rem;border:var(--border-style);box-shadow:0 10px 15px -3px var(--shadow),0 4px 6px -4px var(--shadow)}.options-menu.svelte-azbhie>button{font-size:1.2rem;padding:.3rem;text-align:start}.select-dropdown.svelte-1w71hwl{display:flex;align-items:center;gap:.5rem}.select-dropdown.svelte-1w71hwl:has(button:disabled){cursor:not-allowed;color:var(--gray-50)}.select-dropdown-button.svelte-1w71hwl{background-color:var(--gray-85);padding:.6rem;display:flex;gap:.4rem;width:100%;justify-content:space-between}.heading.svelte-z1q96p{all:unset;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.container.svelte-z1q96p{display:flex;flex-direction:column;gap:12px;background-color:var(--gray-90);padding:10px 16px;border-radius:8px;transition:background-color .2s}.delete-container.svelte-z1q96p{padding:4px;display:flex;align-items:center}label.svelte-z1q96p{padding:0}button.svelte-1oalwmk{background-color:transparent;padding:8px;min-width:48px;display:flex;align-items:center}button.svelte-1oalwmk:hover{background-color:var(--gray-65)}div.svelte-p108mq{display:flex;flex-direction:row;justify-content:space-between;column-gap:8px}main.svelte-p108mq{display:flex;flex-direction:column;row-gap:32px}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
)rawliteral";

const char iconSvg[] PROGMEM = R"rawliteral(
<svg class="iconify iconify--logos" width="32" height="32" aria-hidden="true" preserveAspectRatio="xMidYMid" role="img" version="1.1" viewBox="0 0 256.96 257" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient id="radialGradient9277" cx="128.48" cy="128.5" r="96.375" gradientUnits="userSpaceOnUse"><stop stop-color="#e6e6e6" offset="0"/><stop stop-color="#c6c6c6" offset=".67716"/><stop stop-color="#a5a5a5" offset="1"/></radialGradient><clipPath id="clipPath10832"><circle cx="128.48" cy="128.5" r="128.5" fill="none" style="paint-order:normal"/></clipPath></defs><g clip-path="url(#clipPath10832)"><rect x="-.01819" width="257" height="257" fill="#121212" style="paint-order:normal"/><circle cx="128.48" cy="128.5" r="96.375" fill="url(#radialGradient9277)" style="paint-order:normal"/><circle cx="96.357" cy="160.62" r="96.375" fill="#121212" style="paint-order:normal"/></g></svg>
)rawliteral";