#include "resources.h"

const char indexHtml[] PROGMEM = R"rawliteral(
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESP8266 Intervalometer</title>
    <script type="module">var He=Object.defineProperty;var Ve=(t,e,n)=>e in t?He(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>(Ve(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function S(){}const Ge=t=>t;function Qe(t,e){for(const n in e)t[n]=e[n];return t}function Ae(t){return t()}function we(){return Object.create(null)}function W(t){t.forEach(Ae)}function be(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Xe(t){return Object.keys(t).length===0}function Ye(t,...e){if(t==null){for(const r of e)r(void 0);return S}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function O(t,e,n){t.$$.on_destroy.push(Ye(e,n))}function Be(t,e,n,r){if(t){const s=je(t,e,n,r);return t[0](s)}}function je(t,e,n,r){return t[1]&&r?Qe(n.ctx.slice(),t[1](r(e))):n.ctx}function qe(t,e,n,r){if(t[2]&&r){const s=t[2](r(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],l=Math.max(e.dirty.length,s.length);for(let i=0;i<l;i+=1)o[i]=e.dirty[i]|s[i];return o}return e.dirty|s}return e.dirty}function Je(t,e,n,r,s,o){if(s){const l=je(e,n,r,o);t.p(l,s)}}function Te(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Ce(t){return t??""}function D(t,e,n){return t.set(n),e}const ze=typeof window<"u";let Ze=ze?()=>window.performance.now():()=>Date.now(),he=ze?t=>requestAnimationFrame(t):S;const Z=new Set;function We(t){Z.forEach(e=>{e.c(t)||(Z.delete(e),e.f())}),Z.size!==0&&he(We)}function et(t){let e;return Z.size===0&&he(We),{promise:new Promise(n=>{Z.add(e={c:t,f:n})}),abort(){Z.delete(e)}}}function k(t,e){t.appendChild(e)}function Ke(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function tt(t){const e=w("style");return e.textContent="/* empty */",nt(Ke(t),e),e.sheet}function nt(t,e){return k(t.head||t,e),e.sheet}function y(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode&&t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function ve(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function E(t){return document.createTextNode(t)}function N(){return E(" ")}function se(){return E("")}function R(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ue(t){return t===""?null:+t}function rt(t){return Array.from(t.childNodes)}function T(t,e){e=""+e,t.data!==e&&(t.data=e)}function z(t,e){t.value=e??""}function G(t,e,n){t.classList.toggle(e,!!n)}function st(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}const ce=new Map;let fe=0;function ot(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function it(t,e){const n={stylesheet:tt(e),rules:{}};return ce.set(t,n),n}function Se(t,e,n,r,s,o,l,i=0){const c=16.666/r;let u=`{
`;for(let _=0;_<=1;_+=c){const b=e+(n-e)*o(_);u+=_*100+`%{${l(b,1-b)}}
`}const p=u+`100% {${l(n,1-n)}}
}`,f=`__svelte_${ot(p)}_${i}`,a=Ke(t),{stylesheet:m,rules:d}=ce.get(a)||it(a,t);d[f]||(d[f]=!0,m.insertRule(`@keyframes ${f} ${p}`,m.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${r}ms linear ${s}ms 1 both`,fe+=1,f}function lt(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),s=n.length-r.length;s&&(t.style.animation=r.join(", "),fe-=s,fe||ut())}function ut(){he(()=>{fe||(ce.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&$(e)}),ce.clear())})}let $e;function ne(t){$e=t}const Y=[],Ee=[];let ee=[];const Ie=[],ct=Promise.resolve();let ge=!1;function ft(){ge||(ge=!0,ct.then(xe))}function re(t){ee.push(t)}const me=new Set;let Q=0;function xe(){if(Q!==0)return;const t=$e;do{try{for(;Q<Y.length;){const e=Y[Q];Q++,ne(e),at(e.$$)}}catch(e){throw Y.length=0,Q=0,e}for(ne(null),Y.length=0,Q=0;Ee.length;)Ee.pop()();for(let e=0;e<ee.length;e+=1){const n=ee[e];me.has(n)||(me.add(n),n())}ee.length=0}while(Y.length);for(;Ie.length;)Ie.pop()();ge=!1,me.clear(),ne(t)}function at(t){if(t.fragment!==null){t.update(),W(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(re)}}function dt(t){const e=[],n=[];ee.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ee=e}let te;function pt(){return te||(te=Promise.resolve(),te.then(()=>{te=null})),te}function _e(t,e,n){t.dispatchEvent(st(`${e?"intro":"outro"}${n}`))}const ie=new Set;let B;function ye(){B={r:0,c:[],p:B}}function ke(){B.r||W(B.c),B=B.p}function I(t,e){t&&t.i&&(ie.delete(t),t.i(e))}function L(t,e,n,r){if(t&&t.o){if(ie.has(t))return;ie.add(t),B.c.push(()=>{ie.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const mt={duration:0};function Ne(t,e,n,r){let o=e(t,n,{direction:"both"}),l=r?0:1,i=null,c=null,u=null,p;function f(){u&&lt(t,u)}function a(d,g){const _=d.b-l;return g*=Math.abs(_),{a:l,b:d.b,d:_,duration:g,start:d.start,end:d.start+g,group:d.group}}function m(d){const{delay:g=0,duration:_=300,easing:b=Ge,tick:v=S,css:V}=o||mt,J={start:Ze()+g,b:d};d||(J.group=B,B.r+=1),"inert"in t&&(d?p!==void 0&&(t.inert=p):(p=t.inert,t.inert=!0)),i||c?c=J:(V&&(f(),u=Se(t,l,d,_,g,b,V)),d&&v(0,1),i=a(J,_),re(()=>_e(t,d,"start")),et(M=>{if(c&&M>c.start&&(i=a(c,_),c=null,_e(t,i.b,"start"),V&&(f(),u=Se(t,l,i.b,i.duration,0,b,o.css))),i){if(M>=i.end)v(l=i.b,1-l),_e(t,i.b,"end"),c||(i.b?f():--i.group.r||W(i.group.c)),i=null;else if(M>=i.start){const C=M-i.start;l=i.a+i.d*b(C/i.duration),v(l,1-l)}}return!!(i||c)}))}return{run(d){be(o)?pt().then(()=>{o=o({direction:d?"in":"out"}),m(d)}):m(d)},end(){f(),i=c=null}}}function j(t){t&&t.c()}function U(t,e,n){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),re(()=>{const o=t.$$.on_mount.map(Ae).filter(be);t.$$.on_destroy?t.$$.on_destroy.push(...o):W(o),t.$$.on_mount=[]}),s.forEach(re)}function A(t,e){const n=t.$$;n.fragment!==null&&(dt(n.after_update),W(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function _t(t,e){t.$$.dirty[0]===-1&&(Y.push(t),ft(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function x(t,e,n,r,s,o,l=null,i=[-1]){const c=$e;ne(t);const u=t.$$={fragment:null,ctx:[],props:o,update:S,not_equal:s,bound:we(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:we(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};l&&l(u.root);let p=!1;if(u.ctx=n?n(t,e.props||{},(f,a,...m)=>{const d=m.length?m[0]:a;return u.ctx&&s(u.ctx[f],u.ctx[f]=d)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](d),p&&_t(t,f)),a}):[],u.update(),p=!0,W(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=rt(e.target);u.fragment&&u.fragment.l(f),f.forEach($)}else u.fragment&&u.fragment.c();e.intro&&I(t.$$.fragment),U(t,e.target,e.anchor),xe()}ne(c)}class H{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){A(this,1),this.$destroy=S}$on(e,n){if(!be(n))return S;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!Xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const gt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gt);function bt(t){let e,n,r;return{c(){e=w("button"),e.innerHTML='<img src="/icon.svg" alt="Crescent icon"/>',h(e,"title","Switch theme"),h(e,"class","svelte-1oalwmk")},m(s,o){y(s,e,o),n||(r=R(e,"click",t[0]),n=!0)},p:S,i:S,o:S,d(s){s&&$(e),n=!1,r()}}}function ht(t,e,n){let{theme:r=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}=e;const s=()=>{const l=window.document.documentElement.classList;r=="dark"?l.add("dark"):l.remove("dark")},o=()=>{n(1,r=r=="light"?"dark":"light"),localStorage.setItem("theme",r),s()};return s(),t.$$set=l=>{"theme"in l&&n(1,r=l.theme)},[o,r]}class $t extends H{constructor(e){super(),x(this,e,ht,bt,K,{theme:1})}}const X=[];function oe(t,e=S){let n;const r=new Set;function s(i){if(K(t,i)&&(t=i,n)){const c=!X.length;for(const u of r)u[1](),X.push(u,t);if(c){for(let u=0;u<X.length;u+=2)X[u][0](X[u+1]);X.length=0}}}function o(i){s(i(t))}function l(i,c=S){const u=[i,c];return r.add(u),r.size===1&&(n=e(s,o)||S),i(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:l}}const le=oe(!1),Pe=oe("192.168.4.1"),q=oe({statusCode:0,statusMsg:"Page loaded.",sec:0,ms:0,cameraConnected:!1,intervalSec:35,isRunning:!1,cameraIP:"192.168.4.7",numShots:0,timeUntilNext:0,bulbMode:!1,bulbSec:30,timeUntilRelease:0}),F=oe(!1),ae=oe();function yt(t){const e=t-1;return e*e*e+1}function Le(t,{delay:e=0,duration:n=400,easing:r=yt,axis:s="y"}={}){const o=getComputedStyle(t),l=+o.opacity,i=s==="y"?"height":"width",c=parseFloat(o[i]),u=s==="y"?["top","bottom"]:["left","right"],p=u.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),f=parseFloat(o[`padding${p[0]}`]),a=parseFloat(o[`padding${p[1]}`]),m=parseFloat(o[`margin${p[0]}`]),d=parseFloat(o[`margin${p[1]}`]),g=parseFloat(o[`border${p[0]}Width`]),_=parseFloat(o[`border${p[1]}Width`]);return{delay:e,duration:n,easing:r,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*l};${i}: ${b*c}px;padding-${u[0]}: ${b*f}px;padding-${u[1]}: ${b*a}px;margin-${u[0]}: ${b*m}px;margin-${u[1]}: ${b*d}px;border-${u[0]}-width: ${b*g}px;border-${u[1]}-width: ${b*_}px;`}}const kt=t=>({}),Oe=t=>({});function Me(t){let e,n,r,s;const o=t[4].default,l=Be(o,t,t[3],null);return{c(){e=w("div"),l&&l.c(),h(e,"id",n=`${t[0]}-body`),h(e,"class","body svelte-sext2k")},m(i,c){y(i,e,c),l&&l.m(e,null),s=!0},p(i,c){l&&l.p&&(!s||c&8)&&Je(l,o,i,i[3],s?qe(o,i[3],c,null):Te(i[3]),null),(!s||c&1&&n!==(n=`${i[0]}-body`))&&h(e,"id",n)},i(i){s||(I(l,i),i&&re(()=>{s&&(r||(r=Ne(e,Le,{duration:300},!0)),r.run(1))}),s=!0)},o(i){L(l,i),i&&(r||(r=Ne(e,Le,{duration:300},!1)),r.run(0)),s=!1},d(i){i&&$(e),l&&l.d(i),i&&r&&r.end()}}}function wt(t){let e,n,r,s,o,l,i,c,u,p,f,a,m;const d=t[4].heading,g=Be(d,t,t[3],Oe);let _=t[1]&&Me(t);return{c(){e=w("div"),n=w("button"),g&&g.c(),r=N(),s=w("div"),o=ve("svg"),l=ve("path"),p=N(),_&&_.c(),h(l,"d","M15 18l-6-6 6-6"),h(o,"class",i=Ce(t[1]?"rotated":"")+" svelte-sext2k"),h(o,"xmlns","http://www.w3.org/2000/svg"),h(o,"width","24"),h(o,"height","24"),h(o,"viewBox","0 0 24 24"),h(o,"fill","none"),h(o,"stroke","currentColor"),h(o,"stroke-width","2"),h(o,"stroke-linecap","round"),h(o,"stroke-linejoin","round"),h(s,"class","arrow-container svelte-sext2k"),h(n,"class","heading svelte-sext2k"),h(n,"title",c=t[1]?"Collapse section":"Expand section"),h(n,"aria-expanded",t[1]),h(n,"aria-controls",u=`${t[0]}-body`),h(e,"class","section svelte-sext2k")},m(b,v){y(b,e,v),k(e,n),g&&g.m(n,null),k(n,r),k(n,s),k(s,o),k(o,l),k(e,p),_&&_.m(e,null),f=!0,a||(m=R(n,"click",t[2]),a=!0)},p(b,[v]){g&&g.p&&(!f||v&8)&&Je(g,d,b,b[3],f?qe(d,b[3],v,kt):Te(b[3]),Oe),(!f||v&2&&i!==(i=Ce(b[1]?"rotated":"")+" svelte-sext2k"))&&h(o,"class",i),(!f||v&2&&c!==(c=b[1]?"Collapse section":"Expand section"))&&h(n,"title",c),(!f||v&2)&&h(n,"aria-expanded",b[1]),(!f||v&1&&u!==(u=`${b[0]}-body`))&&h(n,"aria-controls",u),b[1]?_?(_.p(b,v),v&2&&I(_,1)):(_=Me(b),_.c(),I(_,1),_.m(e,null)):_&&(ye(),L(_,1,1,()=>{_=null}),ke())},i(b){f||(I(g,b),I(_),f=!0)},o(b){L(g,b),L(_),f=!1},d(b){b&&$(e),g&&g.d(b),_&&_.d(),a=!1,m()}}}function Ct(t,e,n){let{$$slots:r={},$$scope:s}=e,{name:o}=e;const l=`${o}-expanded`;let i;localStorage.getItem(l)?i=localStorage.getItem(l)==String(!0):i=!0;const c=()=>{n(1,i=!i),o&&localStorage.setItem(l,String(i))};return t.$$set=u=>{"name"in u&&n(0,o=u.name),"$$scope"in u&&n(3,s=u.$$scope)},[o,i,c,s,r]}class de extends H{constructor(e){super(),x(this,e,Ct,wt,K,{name:0})}}function vt(t){let e;return{c(){e=w("p"),e.textContent="Disconnected",h(e,"class","error")},m(n,r){y(n,e,r)},p:S,d(n){n&&$(e)}}}function St(t){let e,n,r=t[2].cameraIP+"",s;return{c(){e=w("p"),n=E("Connected to "),s=E(r),h(e,"class","success")},m(o,l){y(o,e,l),k(e,n),k(e,s)},p(o,l){l&4&&r!==(r=o[2].cameraIP+"")&&T(s,r)},d(o){o&&$(e)}}}function Et(t){let e;return{c(){e=w("p"),e.textContent="Connecting..."},m(n,r){y(n,e,r)},p:S,d(n){n&&$(e)}}}function It(t){let e,n,r,s,o,l,i,c,u,p;function f(d,g){return d[1]?Et:d[2].cameraConnected?St:vt}let a=f(t),m=a(t);return{c(){e=w("label"),n=w("span"),n.textContent="IP address:",r=N(),s=w("input"),o=N(),l=w("button"),l.textContent="Connect",i=N(),m.c(),c=se(),h(s,"placeholder","Camera IP address")},m(d,g){y(d,e,g),k(e,n),k(e,r),k(e,s),z(s,t[0]),y(d,o,g),y(d,l,g),y(d,i,g),m.m(d,g),y(d,c,g),u||(p=[R(s,"input",t[4]),R(l,"click",t[3])],u=!0)},p(d,g){g&1&&s.value!==d[0]&&z(s,d[0]),a===(a=f(d))&&m?m.p(d,g):(m.d(1),m=a(d),m&&(m.c(),m.m(c.parentNode,c)))},d(d){d&&($(e),$(o),$(l),$(i),$(c)),m.d(d),u=!1,W(p)}}}function Nt(t){let e;return{c(){e=w("h2"),e.textContent="Connect camera",h(e,"slot","heading")},m(n,r){y(n,e,r)},p:S,d(n){n&&$(e)}}}function Pt(t){let e,n;return e=new de({props:{name:"connect-camera",$$slots:{heading:[Nt],default:[It]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment)},m(r,s){U(e,r,s),n=!0},p(r,[s]){const o={};s&135&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){A(e,r)}}}function Lt(t,e,n){let r,s,o;O(t,F,p=>n(5,r=p)),O(t,ae,p=>n(6,s=p)),O(t,q,p=>n(2,o=p));let l,i;q.subscribe(p=>n(0,l=p.cameraIP||l)),F.subscribe(p=>n(1,i=p&&i));const c=()=>{s.send(JSON.stringify({command:"connect",cameraIP:l})),n(1,i=D(F,r=!0,r))};function u(){l=this.value,n(0,l)}return[l,i,o,c,u]}class Ot extends H{constructor(e){super(),x(this,e,Lt,Pt,K,{})}}function Mt(t){let e,n,r;return{c(){e=w("button"),e.textContent="Disconnect"},m(s,o){y(s,e,o),n||(r=R(e,"click",t[5]),n=!0)},p:S,d(s){s&&$(e),n=!1,r()}}}function Rt(t){let e,n,r;return{c(){e=w("button"),e.textContent="Connect"},m(s,o){y(s,e,o),n||(r=R(e,"click",t[4]),n=!0)},p:S,d(s){s&&$(e),n=!1,r()}}}function Dt(t){let e;return{c(){e=w("p"),e.textContent="Disconnected",h(e,"class","error")},m(n,r){y(n,e,r)},p:S,d(n){n&&$(e)}}}function Ft(t){let e,n,r;return{c(){e=w("p"),n=E("Connected to "),r=E(t[3]),h(e,"class","success")},m(s,o){y(s,e,o),k(e,n),k(e,r)},p(s,o){o&8&&T(r,s[3])},d(s){s&&$(e)}}}function Ut(t){let e;return{c(){e=w("p"),e.textContent="Connecting..."},m(n,r){y(n,e,r)},p:S,d(n){n&&$(e)}}}function At(t){let e,n,r,s,o,l,i,c,u;function p(_,b){return!_[2]||_[0]!=_[3]?Rt:Mt}let f=p(t),a=f(t);function m(_,b){return _[1]?Ut:_[2]?Ft:Dt}let d=m(t),g=d(t);return{c(){e=w("label"),n=w("span"),n.textContent="IP address:",r=N(),s=w("input"),o=N(),a.c(),l=N(),g.c(),i=se(),h(s,"placeholder","ESP8266 IP address")},m(_,b){y(_,e,b),k(e,n),k(e,r),k(e,s),z(s,t[0]),y(_,o,b),a.m(_,b),y(_,l,b),g.m(_,b),y(_,i,b),c||(u=R(s,"input",t[6]),c=!0)},p(_,b){b&1&&s.value!==_[0]&&z(s,_[0]),f===(f=p(_))&&a?a.p(_,b):(a.d(1),a=f(_),a&&(a.c(),a.m(l.parentNode,l))),d===(d=m(_))&&g?g.p(_,b):(g.d(1),g=d(_),g&&(g.c(),g.m(i.parentNode,i)))},d(_){_&&($(e),$(o),$(l),$(i)),a.d(_),g.d(_),c=!1,u()}}}function Bt(t){let e;return{c(){e=w("h2"),e.textContent="Connect to ESP8266",h(e,"slot","heading")},m(n,r){y(n,e,r)},p:S,d(n){n&&$(e)}}}function jt(t){let e,n;return e=new de({props:{name:"connect-esp",$$slots:{heading:[Bt],default:[At]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment)},m(r,s){U(e,r,s),n=!0},p(r,[s]){const o={};s&1039&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){A(e,r)}}}function qt(t,e,n){let r,s,o,l,i;O(t,ae,m=>n(7,r=m)),O(t,le,m=>n(2,s=m)),O(t,F,m=>n(8,o=m)),O(t,q,m=>n(9,l=m)),O(t,Pe,m=>n(3,i=m));let c=i,u;const p=()=>{D(Pe,i=c,i),r==null||r.close(),D(ae,r=new WebSocket(`ws://${i}:81`),r),r.addEventListener("message",m=>{D(q,l=JSON.parse(m.data),l),D(F,o=!1,o)}),r.addEventListener("open",m=>{D(le,s=!0,s),n(1,u=!1)}),r.addEventListener("close",m=>{D(le,s=!1,s),n(1,u=!1)}),n(1,u=!0)},f=()=>{r==null||r.close()};p();function a(){c=this.value,n(0,c)}return[c,u,s,i,p,f,a]}class Jt extends H{constructor(e){super(),x(this,e,qt,jt,K,{})}}function Re(t){let e,n,r,s,o,l;return{c(){e=w("label"),n=E(`Bulb:\r
      `),r=w("input"),s=E(`\r
      seconds`),h(r,"type","number"),h(r,"step","any"),h(r,"min","1"),h(r,"placeholder","Exposure time in seconds")},m(i,c){y(i,e,c),k(e,n),k(e,r),z(r,t[2]),k(e,s),o||(l=R(r,"input",t[8]),o=!0)},p(i,c){c&4&&ue(r.value)!==i[2]&&z(r,i[2])},d(i){i&&$(e),o=!1,l()}}}function Tt(t){let e,n,r;return{c(){e=w("button"),e.textContent="Start"},m(s,o){y(s,e,o),n||(r=R(e,"click",t[4]),n=!0)},p:S,d(s){s&&$(e),n=!1,r()}}}function zt(t){let e,n,r;return{c(){e=w("button"),e.textContent="Stop"},m(s,o){y(s,e,o),n||(r=R(e,"click",t[5]),n=!0)},p:S,d(s){s&&$(e),n=!1,r()}}}function Wt(t){let e;return{c(){e=w("p"),e.textContent="Intervalometer stopped."},m(n,r){y(n,e,r)},d(n){n&&$(e)}}}function Kt(t){let e;return{c(){e=w("p"),e.textContent="Intervalometer running..."},m(n,r){y(n,e,r)},d(n){n&&$(e)}}}function xt(t){let e;return{c(){e=w("p"),e.textContent="Loading..."},m(n,r){y(n,e,r)},d(n){n&&$(e)}}}function Ht(t){let e,n,r,s,o,l,i=t[3].bulbMode?"Disable bulb mode":"Enable bulb mode",c,u,p,f,a,m,d,g=t[3].bulbMode&&Re(t);function _(C,P){return C[3].isRunning?zt:Tt}let b=_(t),v=b(t);function V(C,P){return C[1]?xt:C[3].isRunning?Kt:Wt}let J=V(t),M=J(t);return{c(){e=w("label"),n=E(`Interval:\r
    `),r=w("input"),s=E(`\r
    seconds`),o=N(),l=w("button"),c=E(i),u=N(),g&&g.c(),p=N(),v.c(),f=N(),M.c(),a=se(),h(r,"type","number"),h(r,"step","any"),h(r,"min","1"),h(r,"placeholder","Interval in seconds")},m(C,P){y(C,e,P),k(e,n),k(e,r),z(r,t[0]),k(e,s),y(C,o,P),y(C,l,P),k(l,c),y(C,u,P),g&&g.m(C,P),y(C,p,P),v.m(C,P),y(C,f,P),M.m(C,P),y(C,a,P),m||(d=[R(r,"input",t[7]),R(l,"click",t[6])],m=!0)},p(C,P){P&1&&ue(r.value)!==C[0]&&z(r,C[0]),P&8&&i!==(i=C[3].bulbMode?"Disable bulb mode":"Enable bulb mode")&&T(c,i),C[3].bulbMode?g?g.p(C,P):(g=Re(C),g.c(),g.m(p.parentNode,p)):g&&(g.d(1),g=null),b===(b=_(C))&&v?v.p(C,P):(v.d(1),v=b(C),v&&(v.c(),v.m(f.parentNode,f))),J!==(J=V(C))&&(M.d(1),M=J(C),M&&(M.c(),M.m(a.parentNode,a)))},d(C){C&&($(e),$(o),$(l),$(u),$(p),$(f),$(a)),g&&g.d(C),v.d(C),M.d(C),m=!1,W(d)}}}function Vt(t){let e;return{c(){e=w("h2"),e.textContent="Intervalometer",h(e,"slot","heading")},m(n,r){y(n,e,r)},p:S,d(n){n&&$(e)}}}function Gt(t){let e,n;return e=new de({props:{name:"intervalometer",$$slots:{heading:[Vt],default:[Ht]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment)},m(r,s){U(e,r,s),n=!0},p(r,[s]){const o={};s&2063&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){A(e,r)}}}function Qt(t,e,n){let r,s,o;O(t,F,d=>n(9,r=d)),O(t,ae,d=>n(10,s=d)),O(t,q,d=>n(3,o=d));let l,i,c;q.subscribe(d=>{n(0,l=d.intervalSec||l),n(2,c=d.bulbSec||c)}),F.subscribe(d=>n(1,i=d&&i));const u=()=>{s.send(JSON.stringify({command:"start",intervalSec:l,bulbSec:c})),n(1,i=D(F,r=!0,r))},p=()=>{s.send(JSON.stringify({command:"stop"})),n(1,i=D(F,r=!0,r))},f=()=>{o.bulbMode?s.send(JSON.stringify({command:"disableBulb"})):s.send(JSON.stringify({command:"enableBulb"})),n(1,i=D(F,r=!0,r))};function a(){l=ue(this.value),n(0,l)}function m(){c=ue(this.value),n(2,c)}return[l,i,c,o,u,p,f,a,m]}class Xt extends H{constructor(e){super(),x(this,e,Qt,Gt,K,{})}}function De(t){let e,n,r=t[2].numShots+"",s,o,l,i,c;return{c(){e=w("p"),n=E("Number of shots: "),s=E(r),o=E(`\r
      Time until next shot: `),l=E(t[0]),i=E(`\r
      Time until shutter release: `),c=E(t[1])},m(u,p){y(u,e,p),k(e,n),k(e,s),k(e,o),k(e,l),k(e,i),k(e,c)},p(u,p){p&4&&r!==(r=u[2].numShots+"")&&T(s,r),p&1&&T(l,u[0]),p&2&&T(c,u[1])},d(u){u&&$(e)}}}function Yt(t){let e,n,r=t[2].statusCode+"",s,o,l=t[2].statusMsg+"",i,c,u,p=t[2].cameraConnected&&De(t);return{c(){e=w("p"),n=E("Status code: "),s=E(r),o=E(`\r
    Status message: `),i=E(l),c=N(),p&&p.c(),u=se(),G(e,"success",t[2].statusCode==200),G(e,"warning",t[2].statusCode==0),G(e,"error",t[2].statusCode!=200&&t[2].statusCode!=0)},m(f,a){y(f,e,a),k(e,n),k(e,s),k(e,o),k(e,i),y(f,c,a),p&&p.m(f,a),y(f,u,a)},p(f,a){a&4&&r!==(r=f[2].statusCode+"")&&T(s,r),a&4&&l!==(l=f[2].statusMsg+"")&&T(i,l),a&4&&G(e,"success",f[2].statusCode==200),a&4&&G(e,"warning",f[2].statusCode==0),a&4&&G(e,"error",f[2].statusCode!=200&&f[2].statusCode!=0),f[2].cameraConnected?p?p.p(f,a):(p=De(f),p.c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null)},d(f){f&&($(e),$(c),$(u)),p&&p.d(f)}}}function Zt(t){let e;return{c(){e=w("h2"),e.textContent="Status",h(e,"slot","heading")},m(n,r){y(n,e,r)},p:S,d(n){n&&$(e)}}}function en(t){let e,n;return e=new de({props:{name:"status",$$slots:{heading:[Zt],default:[Yt]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment)},m(r,s){U(e,r,s),n=!0},p(r,[s]){const o={};s&39&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){A(e,r)}}}function tn(t,e,n){let r;O(t,q,c=>n(2,r=c));let s,o="0",l="0",i;return q.subscribe(c=>{s=Date.now(),clearInterval(i),c.isRunning?i=setInterval(()=>{n(0,o=((r.timeUntilNext-(Date.now()-s))/1e3).toFixed(1)),n(1,l=((r.timeUntilRelease-(Date.now()-s))/1e3).toFixed(1))},100):(n(0,o="0"),n(1,l="0"))}),[o,l,r]}class nn extends H{constructor(e){super(),x(this,e,tn,en,K,{})}}function Fe(t){let e,n,r,s;e=new Ot({});let o=t[1].cameraConnected&&Ue();return{c(){j(e.$$.fragment),n=N(),o&&o.c(),r=se()},m(l,i){U(e,l,i),y(l,n,i),o&&o.m(l,i),y(l,r,i),s=!0},p(l,i){l[1].cameraConnected?o?i&2&&I(o,1):(o=Ue(),o.c(),I(o,1),o.m(r.parentNode,r)):o&&(ye(),L(o,1,1,()=>{o=null}),ke())},i(l){s||(I(e.$$.fragment,l),I(o),s=!0)},o(l){L(e.$$.fragment,l),L(o),s=!1},d(l){l&&($(n),$(r)),A(e,l),o&&o.d(l)}}}function Ue(t){let e,n;return e=new Xt({}),{c(){j(e.$$.fragment)},m(r,s){U(e,r,s),n=!0},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){A(e,r)}}}function rn(t){let e,n,r,s,o,l,i,c,u,p,f;o=new $t({}),i=new nn({}),u=new Jt({});let a=t[0]&&Fe(t);return{c(){e=w("main"),n=w("div"),r=w("h1"),r.textContent="ESP8266 Intervalometer",s=N(),j(o.$$.fragment),l=N(),j(i.$$.fragment),c=N(),j(u.$$.fragment),p=N(),a&&a.c(),h(n,"class","svelte-p108mq"),h(e,"class","svelte-p108mq")},m(m,d){y(m,e,d),k(e,n),k(n,r),k(n,s),U(o,n,null),k(e,l),U(i,e,null),k(e,c),U(u,e,null),k(e,p),a&&a.m(e,null),f=!0},p(m,[d]){m[0]?a?(a.p(m,d),d&1&&I(a,1)):(a=Fe(m),a.c(),I(a,1),a.m(e,null)):a&&(ye(),L(a,1,1,()=>{a=null}),ke())},i(m){f||(I(o.$$.fragment,m),I(i.$$.fragment,m),I(u.$$.fragment,m),I(a),f=!0)},o(m){L(o.$$.fragment,m),L(i.$$.fragment,m),L(u.$$.fragment,m),L(a),f=!1},d(m){m&&$(e),A(o),A(i),A(u),a&&a.d()}}}function sn(t,e,n){let r,s;return O(t,le,o=>n(0,r=o)),O(t,q,o=>n(1,s=o)),[r,s]}class on extends H{constructor(e){super(),x(this,e,sn,rn,K,{})}}new on({target:document.getElementById("app")});</script>
    <style>:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;font-size:16px;box-sizing:border-box;color:var(--gray-5);background-color:var(--gray-95);transition:background-color .2s,color .2s}*,*:before,*:after{box-sizing:inherit}body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:400}ol,ul{list-style:none}img{max-width:100%;height:auto}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex}:root{--black: #121212;--white: #f0f0f0;--dark: #4c4c4c;--light: #acacac;--darker: #2d2d2d;--darkest: #1e1e1e;--lighter: #d1d1d1;--lightest: #e0e0e0;--medium: #888888;--light-red: #ff8484;--dark-red: #b70000;--light-green: #87ff85;--dark-green: #028100;--light-yellow: #fffd85;--dark-yellow: #768500}:root:not(.dark){--gray-5: var(--black);--gray-10: var(--darkest);--gray-15: var(--darker);--gray-35: var(--dark);--gray-50: var(--medium);--gray-65: var(--light);--gray-85: var(--lighter);--gray-90: var(--lightest);--gray-95: var(--white);--green-5: var(--dark-green);--green-95: var(--light-green);--red-5: var(--dark-red);--red-95: var(--light-red);--yellow-5: var(--dark-yellow);--yellow-95: var(--light-yellow)}:root.dark{--gray-5: var(--white);--gray-10: var(--lightest);--gray-15: var(--lighter);--gray-35: var(--light);--gray-50: var(--medium);--gray-65: var(--dark);--gray-85: var(--darker);--gray-90: var(--darkest);--gray-95: var(--black);--green-5: var(--light-green);--green-95: var(--dark-green);--red-5: var(--light-red);--red-95: var(--dark-red);--yellow-5: var(--light-yellow);--yellow-95: var(--dark-yellow)}#app{width:100%;max-width:480px;margin:0 auto;padding:2rem}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;color:var(--gray-95);background-color:var(--gray-5);cursor:pointer;transition:background-color .2s,color .2s}button:hover{background-color:var(--gray-35)}button:disabled{background-color:var(--gray-50);cursor:not-allowed}label{display:flex;align-items:center;gap:16px;background-color:var(--gray-90);padding:6px 16px;border-radius:8px;transition:background-color .2s}label>span{flex-shrink:0}input{border-width:2px;border-color:transparent;border-style:solid;border-radius:8px;padding:.6em;outline:none;font-size:inherit;font-family:inherit;color:var(--gray-5);background-color:var(--gray-85);transition:background-color .2s,color .2s,border-color .2s;width:100%}input:hover{border-color:var(--gray-65)}input:focus{border-color:var(--gray-50)}input:disabled{border-color:transparent;color:var(--gray-50);cursor:not-allowed}.success{color:var(--green-5)}.warning{color:var(--yellow-5)}.error{color:var(--red-5)}p{white-space:pre-line;overflow-wrap:break-word}button.svelte-1oalwmk{background-color:transparent;padding:8px;min-width:48px;display:flex;align-items:center}button.svelte-1oalwmk:hover{background-color:var(--gray-65)}.section.svelte-sext2k{border-style:solid;border-width:2px;border-color:var(--gray-50);border-radius:16px;display:flex;flex-direction:column;padding:16px 16px 0;transition:border-color .2s}.body.svelte-sext2k{display:flex;flex-direction:column;row-gap:16px;padding-bottom:16px}.heading.svelte-sext2k{all:unset;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-bottom:16px}.arrow-container.svelte-sext2k{transition:background-color .2s;background-color:transparent;border-radius:8px;padding:4px;display:flex;align-items:center}.arrow-container.svelte-sext2k:hover{background-color:var(--gray-65)}svg.svelte-sext2k{transition:transform .3s;color:inherit}svg.rotated.svelte-sext2k{transform:rotate(-90deg)}div.svelte-p108mq{display:flex;flex-direction:row;justify-content:space-between;column-gap:8px}main.svelte-p108mq{display:flex;flex-direction:column;row-gap:32px}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
)rawliteral";

const char iconSvg[] PROGMEM = R"rawliteral(
<svg class="iconify iconify--logos" width="32" height="32" aria-hidden="true" preserveAspectRatio="xMidYMid" role="img" version="1.1" viewBox="0 0 256.96 257" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient id="radialGradient9277" cx="128.48" cy="128.5" r="96.375" gradientUnits="userSpaceOnUse"><stop stop-color="#e6e6e6" offset="0"/><stop stop-color="#c6c6c6" offset=".67716"/><stop stop-color="#a5a5a5" offset="1"/></radialGradient><clipPath id="clipPath10832"><circle cx="128.48" cy="128.5" r="128.5" fill="none" style="paint-order:normal"/></clipPath></defs><g clip-path="url(#clipPath10832)"><rect x="-.01819" width="257" height="257" fill="#121212" style="paint-order:normal"/><circle cx="128.48" cy="128.5" r="96.375" fill="url(#radialGradient9277)" style="paint-order:normal"/><circle cx="96.357" cy="160.62" r="96.375" fill="#121212" style="paint-order:normal"/></g></svg>
)rawliteral";