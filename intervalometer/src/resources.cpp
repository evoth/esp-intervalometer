#include "resources.h"

const char indexHtml[] PROGMEM = R"rawliteral(
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESP8266 Intervalometer</title>
    <script type="module">var wt=Object.defineProperty;var kt=(t,e,n)=>e in t?wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Fe=(t,e,n)=>(kt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function I(){}const dt=t=>t;function $t(t,e){for(const n in e)t[n]=e[n];return t}function pt(t){return t()}function He(){return Object.create(null)}function Y(t){t.forEach(pt)}function _e(t){return typeof t=="function"}function H(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ct(t){return Object.keys(t).length===0}function St(t,...e){if(t==null){for(const o of e)o(void 0);return I}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function F(t,e,n){t.$$.on_destroy.push(St(e,n))}function we(t,e,n,o){if(t){const i=_t(t,e,n,o);return t[0](i)}}function _t(t,e,n,o){return t[1]&&o?$t(n.ctx.slice(),t[1](o(e))):n.ctx}function ke(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],l=Math.max(e.dirty.length,i.length);for(let r=0;r<l;r+=1)s[r]=e.dirty[r]|i[r];return s}return e.dirty|i}return e.dirty}function $e(t,e,n,o,i,s){if(i){const l=_t(e,n,o,s);t.p(l,i)}}function Ce(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function Ve(t){return t??""}function z(t,e,n){return t.set(n),e}function It(t){return t&&_e(t.destroy)?t.destroy:I}const mt=typeof window<"u";let Tt=mt?()=>window.performance.now():()=>Date.now(),qe=mt?t=>requestAnimationFrame(t):I;const fe=new Set;function ht(t){fe.forEach(e=>{e.c(t)||(fe.delete(e),e.f())}),fe.size!==0&&qe(ht)}function Pt(t){let e;return fe.size===0&&qe(ht),{promise:new Promise(n=>{fe.add(e={c:t,f:n})}),abort(){fe.delete(e)}}}function w(t,e){t.appendChild(e)}function gt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Nt(t){const e=k("style");return e.textContent="/* empty */",Ot(gt(t),e),e.sheet}function Ot(t,e){return w(t.head||t,e),e.sheet}function y(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode&&t.parentNode.removeChild(t)}function bt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function Ne(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t){return document.createTextNode(t)}function S(){return N(" ")}function ie(){return N("")}function L(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Oe(t){return t===""?null:+t}function Et(t){return Array.from(t.childNodes)}function B(t,e){e=""+e,t.data!==e&&(t.data=e)}function te(t,e){t.value=e??""}function Z(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function se(t,e,n){t.classList.toggle(e,!!n)}function Mt(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}const Ee=new Map;let Me=0;function At(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Lt(t,e){const n={stylesheet:Nt(e),rules:{}};return Ee.set(t,n),n}function Ke(t,e,n,o,i,s,l,r=0){const f=16.666/o;let u=`{
`;for(let _=0;_<=1;_+=f){const g=e+(n-e)*s(_);u+=_*100+`%{${l(g,1-g)}}
`}const p=u+`100% {${l(n,1-n)}}
}`,a=`__svelte_${At(p)}_${r}`,d=gt(t),{stylesheet:b,rules:m}=Ee.get(d)||Lt(d,t);m[a]||(m[a]=!0,b.insertRule(`@keyframes ${a} ${p}`,b.cssRules.length));const c=t.style.animation||"";return t.style.animation=`${c?`${c}, `:""}${a} ${o}ms linear ${i}ms 1 both`,Me+=1,a}function Ft(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=n.length-o.length;i&&(t.style.animation=o.join(", "),Me-=i,Me||Rt())}function Rt(){qe(()=>{Me||(Ee.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&v(e)}),Ee.clear())})}let ze;function ye(t){ze=t}const ue=[],Se=[];let ce=[];const De=[],jt=Promise.resolve();let Ue=!1;function Dt(){Ue||(Ue=!0,jt.then(vt))}function de(t){ce.push(t)}function Je(t){De.push(t)}const Re=new Set;let le=0;function vt(){if(le!==0)return;const t=ze;do{try{for(;le<ue.length;){const e=ue[le];le++,ye(e),Ut(e.$$)}}catch(e){throw ue.length=0,le=0,e}for(ye(null),ue.length=0,le=0;Se.length;)Se.pop()();for(let e=0;e<ce.length;e+=1){const n=ce[e];Re.has(n)||(Re.add(n),n())}ce.length=0}while(ue.length);for(;De.length;)De.pop()();Ue=!1,Re.clear(),ye(t)}function Ut(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(de)}}function qt(t){const e=[],n=[];ce.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),ce=e}let ve;function zt(){return ve||(ve=Promise.resolve(),ve.then(()=>{ve=null})),ve}function je(t,e,n){t.dispatchEvent(Mt(`${e?"intro":"outro"}${n}`))}const Te=new Set;let ee;function me(){ee={r:0,c:[],p:ee}}function he(){ee.r||Y(ee.c),ee=ee.p}function $(t,e){t&&t.i&&(Te.delete(t),t.i(e))}function C(t,e,n,o){if(t&&t.o){if(Te.has(t))return;Te.add(t),ee.c.push(()=>{Te.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}const Jt={duration:0};function Ae(t,e,n,o){let s=e(t,n,{direction:"both"}),l=o?0:1,r=null,f=null,u=null,p;function a(){u&&Ft(t,u)}function d(m,c){const _=m.b-l;return c*=Math.abs(_),{a:l,b:m.b,d:_,duration:c,start:m.start,end:m.start+c,group:m.group}}function b(m){const{delay:c=0,duration:_=300,easing:g=dt,tick:T=I,css:P}=s||Jt,E={start:Tt()+c,b:m};m||(E.group=ee,ee.r+=1),"inert"in t&&(m?p!==void 0&&(t.inert=p):(p=t.inert,t.inert=!0)),r||f?f=E:(P&&(a(),u=Ke(t,l,m,_,c,g,P)),m&&T(0,1),r=d(E,_),de(()=>je(t,m,"start")),Pt(W=>{if(f&&W>f.start&&(r=d(f,_),f=null,je(t,r.b,"start"),P&&(a(),u=Ke(t,l,r.b,r.duration,0,g,s.css))),r){if(W>=r.end)T(l=r.b,1-l),je(t,r.b,"end"),f||(r.b?a():--r.group.r||Y(r.group.c)),r=null;else if(W>=r.start){const x=W-r.start;l=r.a+r.d*g(x/r.duration),T(l,1-l)}}return!!(r||f)}))}return{run(m){_e(s)?zt().then(()=>{s=s({direction:m?"in":"out"}),b(m)}):b(m)},end(){a(),r=f=null}}}function pe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Wt(t,e){C(t,1,1,()=>{e.delete(t.key)})}function Bt(t,e,n,o,i,s,l,r,f,u,p,a){let d=t.length,b=s.length,m=d;const c={};for(;m--;)c[t[m].key]=m;const _=[],g=new Map,T=new Map,P=[];for(m=b;m--;){const A=a(i,s,m),V=n(A);let G=l.get(V);G?o&&P.push(()=>G.p(A,e)):(G=u(V,A),G.c()),g.set(V,_[m]=G),V in c&&T.set(V,Math.abs(m-c[V]))}const E=new Set,W=new Set;function x(A){$(A,1),A.m(r,p),l.set(A.key,A),p=A.first,b--}for(;d&&b;){const A=_[b-1],V=t[d-1],G=A.key,K=V.key;A===V?(p=A.first,d--,b--):g.has(K)?!l.has(G)||E.has(G)?x(A):W.has(K)?d--:T.get(G)>T.get(K)?(W.add(G),x(A)):(E.add(K),d--):(f(V,l),d--)}for(;d--;){const A=t[d];g.has(A.key)||f(A,l)}for(;b;)x(_[b-1]);return Y(P),_}function We(t,e,n){const o=t.$$.props[e];o!==void 0&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function D(t){t&&t.c()}function R(t,e,n){const{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),de(()=>{const s=t.$$.on_mount.map(pt).filter(_e);t.$$.on_destroy?t.$$.on_destroy.push(...s):Y(s),t.$$.on_mount=[]}),i.forEach(de)}function j(t,e){const n=t.$$;n.fragment!==null&&(qt(n.after_update),Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Gt(t,e){t.$$.dirty[0]===-1&&(ue.push(t),Dt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(t,e,n,o,i,s,l=null,r=[-1]){const f=ze;ye(t);const u=t.$$={fragment:null,ctx:[],props:s,update:I,not_equal:i,bound:He(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:He(),dirty:r,skip_bound:!1,root:e.target||f.$$.root};l&&l(u.root);let p=!1;if(u.ctx=n?n(t,e.props||{},(a,d,...b)=>{const m=b.length?b[0]:d;return u.ctx&&i(u.ctx[a],u.ctx[a]=m)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](m),p&&Gt(t,a)),d}):[],u.update(),p=!0,Y(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const a=Et(e.target);u.fragment&&u.fragment.l(a),a.forEach(v)}else u.fragment&&u.fragment.c();e.intro&&$(t.$$.fragment),R(t,e.target,e.anchor),vt()}ye(f)}class X{constructor(){Fe(this,"$$");Fe(this,"$$set")}$destroy(){j(this,1),this.$destroy=I}$on(e,n){if(!_e(n))return I;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(e){this.$$set&&!Ct(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ht="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ht);const re=[];function ge(t,e=I){let n;const o=new Set;function i(r){if(H(t,r)&&(t=r,n)){const f=!re.length;for(const u of o)u[1](),re.push(u,t);if(f){for(let u=0;u<re.length;u+=2)re[u][0](re[u+1]);re.length=0}}}function s(r){i(r(t))}function l(r,f=I){const u=[r,f];return o.add(u),o.size===1&&(n=e(i,s)||I),r(t),()=>{o.delete(u),o.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:l}}const Pe=ge(!1),Qe=ge("192.168.4.1"),ne=ge({statusCode:0,statusMsg:"Page loaded.",sec:0,ms:0,cameraConnected:!1,isRunning:!1,isStopping:!1,cameraIP:"192.168.4.7",timeUntilNext:0,shutterIsPressed:!1,actions:[],loops:[],actionIndex:0}),J=ge(!1),Ie=ge(),ae=ge([{action:"Trigger shutter",fields:{},time:0,timeMode:"from start"}]);function Vt(t){const e=t-1;return e*e*e+1}function Xe(t,{delay:e=0,duration:n=400,easing:o=dt}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:s=>`opacity: ${s*i}`}}function Ye(t,{delay:e=0,duration:n=400,easing:o=Vt,axis:i="y"}={}){const s=getComputedStyle(t),l=+s.opacity,r=i==="y"?"height":"width",f=parseFloat(s[r]),u=i==="y"?["top","bottom"]:["left","right"],p=u.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),a=parseFloat(s[`padding${p[0]}`]),d=parseFloat(s[`padding${p[1]}`]),b=parseFloat(s[`margin${p[0]}`]),m=parseFloat(s[`margin${p[1]}`]),c=parseFloat(s[`border${p[0]}Width`]),_=parseFloat(s[`border${p[1]}Width`]);return{delay:e,duration:n,easing:o,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*l};${r}: ${g*f}px;padding-${u[0]}: ${g*a}px;padding-${u[1]}: ${g*d}px;margin-${u[0]}: ${g*b}px;margin-${u[1]}: ${g*m}px;border-${u[0]}-width: ${g*c}px;border-${u[1]}-width: ${g*_}px;`}}const Kt=t=>({}),Ze=t=>({});function xe(t){let e,n,o,i;const s=t[4].default,l=we(s,t,t[3],null);return{c(){e=k("div"),l&&l.c(),h(e,"id",n=`${t[0]}-body`),h(e,"class","body svelte-klc9jx")},m(r,f){y(r,e,f),l&&l.m(e,null),i=!0},p(r,f){l&&l.p&&(!i||f&8)&&$e(l,s,r,r[3],i?ke(s,r[3],f,null):Ce(r[3]),null),(!i||f&1&&n!==(n=`${r[0]}-body`))&&h(e,"id",n)},i(r){i||($(l,r),r&&de(()=>{i&&(o||(o=Ae(e,Ye,{duration:300},!0)),o.run(1))}),i=!0)},o(r){C(l,r),r&&(o||(o=Ae(e,Ye,{duration:300},!1)),o.run(0)),i=!1},d(r){r&&v(e),l&&l.d(r),r&&o&&o.end()}}}function Qt(t){let e,n,o,i,s,l,r,f,u,p,a,d,b;const m=t[4].heading,c=we(m,t,t[3],Ze);let _=t[1]&&xe(t);return{c(){e=k("div"),n=k("button"),c&&c.c(),o=S(),i=k("div"),s=Ne("svg"),l=Ne("path"),p=S(),_&&_.c(),h(l,"d","M15 18l-6-6 6-6"),h(s,"class",r=Ve(t[1]?"rotated":"")+" svelte-klc9jx"),h(s,"xmlns","http://www.w3.org/2000/svg"),h(s,"width","24"),h(s,"height","24"),h(s,"viewBox","0 0 24 24"),h(s,"fill","none"),h(s,"stroke","currentColor"),h(s,"stroke-width","2"),h(s,"stroke-linecap","round"),h(s,"stroke-linejoin","round"),h(i,"class","arrow-container svelte-klc9jx"),h(n,"class","heading svelte-klc9jx"),h(n,"title",f=t[1]?"Collapse section":"Expand section"),h(n,"aria-expanded",t[1]),h(n,"aria-controls",u=`${t[0]}-body`),h(e,"class","section svelte-klc9jx")},m(g,T){y(g,e,T),w(e,n),c&&c.m(n,null),w(n,o),w(n,i),w(i,s),w(s,l),w(e,p),_&&_.m(e,null),a=!0,d||(b=L(n,"click",t[2]),d=!0)},p(g,[T]){c&&c.p&&(!a||T&8)&&$e(c,m,g,g[3],a?ke(m,g[3],T,Kt):Ce(g[3]),Ze),(!a||T&2&&r!==(r=Ve(g[1]?"rotated":"")+" svelte-klc9jx"))&&h(s,"class",r),(!a||T&2&&f!==(f=g[1]?"Collapse section":"Expand section"))&&h(n,"title",f),(!a||T&2)&&h(n,"aria-expanded",g[1]),(!a||T&1&&u!==(u=`${g[0]}-body`))&&h(n,"aria-controls",u),g[1]?_?(_.p(g,T),T&2&&$(_,1)):(_=xe(g),_.c(),$(_,1),_.m(e,null)):_&&(me(),C(_,1,1,()=>{_=null}),he())},i(g){a||($(c,g),$(_),a=!0)},o(g){C(c,g),C(_),a=!1},d(g){g&&v(e),c&&c.d(g),_&&_.d(),d=!1,b()}}}function Xt(t,e,n){let{$$slots:o={},$$scope:i}=e,{name:s}=e;const l=`${s}-expanded`;let r;localStorage.getItem(l)?r=localStorage.getItem(l)==String(!0):r=!0;const f=()=>{n(1,r=!r),s&&localStorage.setItem(l,String(r))};return t.$$set=u=>{"name"in u&&n(0,s=u.name),"$$scope"in u&&n(3,i=u.$$scope)},[s,r,f,i,o]}class be extends X{constructor(e){super(),Q(this,e,Xt,Qt,H,{name:0})}}function Yt(t){let e;return{c(){e=k("p"),e.textContent="Disconnected",h(e,"class","error")},m(n,o){y(n,e,o)},p:I,d(n){n&&v(e)}}}function Zt(t){let e,n,o=t[2].cameraIP+"",i;return{c(){e=k("p"),n=N("Connected to "),i=N(o),h(e,"class","success")},m(s,l){y(s,e,l),w(e,n),w(e,i)},p(s,l){l&4&&o!==(o=s[2].cameraIP+"")&&B(i,o)},d(s){s&&v(e)}}}function xt(t){let e;return{c(){e=k("p"),e.textContent="Connecting..."},m(n,o){y(n,e,o)},p:I,d(n){n&&v(e)}}}function en(t){let e,n,o,i,s,l,r,f,u,p;function a(m,c){return m[1]?xt:m[2].cameraConnected?Zt:Yt}let d=a(t),b=d(t);return{c(){e=k("label"),n=k("span"),n.textContent="IP address:",o=S(),i=k("input"),s=S(),l=k("button"),l.textContent="Connect",r=S(),b.c(),f=ie(),h(i,"placeholder","Camera IP address"),h(l,"class","inverse")},m(m,c){y(m,e,c),w(e,n),w(e,o),w(e,i),te(i,t[0]),y(m,s,c),y(m,l,c),y(m,r,c),b.m(m,c),y(m,f,c),u||(p=[L(i,"input",t[4]),L(l,"click",t[3])],u=!0)},p(m,c){c&1&&i.value!==m[0]&&te(i,m[0]),d===(d=a(m))&&b?b.p(m,c):(b.d(1),b=d(m),b&&(b.c(),b.m(f.parentNode,f)))},d(m){m&&(v(e),v(s),v(l),v(r),v(f)),b.d(m),u=!1,Y(p)}}}function tn(t){let e;return{c(){e=k("h2"),e.textContent="Connect camera",h(e,"slot","heading")},m(n,o){y(n,e,o)},p:I,d(n){n&&v(e)}}}function nn(t){let e,n;return e=new be({props:{name:"connect-camera",$$slots:{heading:[tn],default:[en]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(o,i){R(e,o,i),n=!0},p(o,[i]){const s={};i&135&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function on(t,e,n){let o,i,s;F(t,J,p=>n(5,o=p)),F(t,Ie,p=>n(6,i=p)),F(t,ne,p=>n(2,s=p));let l,r;ne.subscribe(p=>n(0,l=p.cameraIP||l)),J.subscribe(p=>n(1,r=p&&r));const f=()=>{i.send(JSON.stringify({command:"connect",cameraIP:l})),n(1,r=z(J,o=!0,o))};function u(){l=this.value,n(0,l)}return[l,r,s,f,u]}class sn extends X{constructor(e){super(),Q(this,e,on,nn,H,{})}}function ln(t){let e,n,o;return{c(){e=k("button"),e.textContent="Disconnect",h(e,"class","inverse")},m(i,s){y(i,e,s),n||(o=L(e,"click",t[5]),n=!0)},p:I,d(i){i&&v(e),n=!1,o()}}}function rn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Connect",h(e,"class","inverse")},m(i,s){y(i,e,s),n||(o=L(e,"click",t[4]),n=!0)},p:I,d(i){i&&v(e),n=!1,o()}}}function un(t){let e;return{c(){e=k("p"),e.textContent="Disconnected",h(e,"class","error")},m(n,o){y(n,e,o)},p:I,d(n){n&&v(e)}}}function fn(t){let e,n,o;return{c(){e=k("p"),n=N("Connected to "),o=N(t[3]),h(e,"class","success")},m(i,s){y(i,e,s),w(e,n),w(e,o)},p(i,s){s&8&&B(o,i[3])},d(i){i&&v(e)}}}function cn(t){let e;return{c(){e=k("p"),e.textContent="Connecting..."},m(n,o){y(n,e,o)},p:I,d(n){n&&v(e)}}}function an(t){let e,n,o,i,s,l,r,f,u;function p(_,g){return!_[2]||_[0]!=_[3]?rn:ln}let a=p(t),d=a(t);function b(_,g){return _[1]?cn:_[2]?fn:un}let m=b(t),c=m(t);return{c(){e=k("label"),n=k("span"),n.textContent="IP address:",o=S(),i=k("input"),s=S(),d.c(),l=S(),c.c(),r=ie(),h(i,"placeholder","ESP8266 IP address")},m(_,g){y(_,e,g),w(e,n),w(e,o),w(e,i),te(i,t[0]),y(_,s,g),d.m(_,g),y(_,l,g),c.m(_,g),y(_,r,g),f||(u=L(i,"input",t[6]),f=!0)},p(_,g){g&1&&i.value!==_[0]&&te(i,_[0]),a===(a=p(_))&&d?d.p(_,g):(d.d(1),d=a(_),d&&(d.c(),d.m(l.parentNode,l))),m===(m=b(_))&&c?c.p(_,g):(c.d(1),c=m(_),c&&(c.c(),c.m(r.parentNode,r)))},d(_){_&&(v(e),v(s),v(l),v(r)),d.d(_),c.d(_),f=!1,u()}}}function dn(t){let e;return{c(){e=k("h2"),e.textContent="Connect to ESP8266",h(e,"slot","heading")},m(n,o){y(n,e,o)},p:I,d(n){n&&v(e)}}}function pn(t){let e,n;return e=new be({props:{name:"connect-esp",$$slots:{heading:[dn],default:[an]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(o,i){R(e,o,i),n=!0},p(o,[i]){const s={};i&4111&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function _n(t,e,n){let o,i,s,l,r,f;F(t,Ie,c=>n(8,o=c)),F(t,Pe,c=>n(2,i=c)),F(t,J,c=>n(9,s=c)),F(t,ne,c=>n(10,l=c)),F(t,ae,c=>n(11,r=c)),F(t,Qe,c=>n(3,f=c));let u=f,p,a=0;const d=()=>{z(Qe,f=u,f),o==null||o.close(),z(Ie,o=new WebSocket(`ws://${f}:81`),o),o.addEventListener("message",c=>{a++,z(ne,l=JSON.parse(c.data),l),a==1&&z(ae,r=l.actions,r),z(J,s=!1,s)}),o.addEventListener("open",c=>{z(Pe,i=!0,i),n(1,p=!1)}),o.addEventListener("close",c=>{z(Pe,i=!1,i),n(1,p=!1)}),n(1,p=!0)},b=()=>{o==null||o.close()};d();function m(){u=this.value,n(0,u)}return[u,p,i,f,d,b,m]}class mn extends X{constructor(e){super(),Q(this,e,_n,pn,H,{})}}const Le={"Trigger shutter":{actionType:"CCAPI",staticFields:{endpointUrl:"/ver100/shooting/control/shutterbutton",httpMethod:"POST"},body:{af:!1},fields:{}},"Control shutter":{actionType:"CCAPI",staticFields:{endpointUrl:"/ver100/shooting/control/shutterbutton/manual",httpMethod:"POST"},body:{action:"full_press",af:!1},fields:{Action:{key:"action",type:"enum",options:["full_press","release"]}}},"Set ISO":{actionType:"CCAPI",staticFields:{endpointUrl:"/ver100/shooting/settings/iso",httpMethod:"PUT"},body:{value:"400"},fields:{ISO:{key:"value",type:"enum",options:["auto","100","125","160","200","250","320","400","500","640","800","1000","1250","1600","2000","2500","3200","4000","5000","6400","8000","10000","12800","16000","20000","25600"]}}},"Set aperture":{actionType:"CCAPI",staticFields:{endpointUrl:"/ver100/shooting/settings/av",httpMethod:"PUT"},body:{value:"f8.0"},fields:{Aperture:{key:"value",type:"enum",options:["f3.5","f4.0","f4.5","f5.0","f5.6","f6.3","f7.1","f8.0","f9.0","f10","f11","f13","f14","f16","f18","f20","f22"]}}},"Set shutter speed":{actionType:"CCAPI",staticFields:{endpointUrl:"/ver100/shooting/settings/tv",httpMethod:"PUT"},body:{value:"1/125"},fields:{"Shutter speed":{key:"value",type:"enum",options:["1/4000","1/3200","1/2500","1/2000","1/1600","1/1250","1/1000","1/800","1/640","1/500","1/400","1/320","1/250","1/200","1/160","1/125","1/100","1/80","1/60","1/50","1/40","1/30","1/25","1/20","1/15","1/13","1/10","1/8","1/6","1/5","1/4",'0"3','0"4','0"5','0"6','0"8','1"','1"3','1"6','2"','2"5','3"2','4"','5"','6"','8"','10"','13"','15"','20"','25"','30"',"bulb"]}}},"Set exposure compensation":{actionType:"CCAPI",staticFields:{endpointUrl:"/ver100/shooting/settings/exposure",httpMethod:"PUT"},body:{value:"+0.0"},fields:{EV:{key:"value",type:"enum",options:["-3.0","-2_2/3","-2_1/3","-2.0","-1_2/3","-1_1/3","-1.0","-0_2/3","-0_1/3","+0.0","+0_1/3","+0_2/3","+1.0","+1_1/3","+1_2/3","+2.0","+2_1/3","+2_2/3","+3.0"]}}},"Set shooting mode":{actionType:"CCAPI",staticFields:{endpointUrl:"/ver100/shooting/settings/shootingmode",httpMethod:"PUT"},body:{value:"m"},fields:{Mode:{key:"value",type:"enum",options:["m","av","tv","p","auto"]}}},"Canon IR Trigger":{actionType:"IR_TRIGGER",staticFields:{},body:{},fields:{}},"Dark frame cover":{actionType:"SERIAL",staticFields:{},body:{action:"close"},fields:{Action:{key:"action",type:"enum",options:["open","close"]}}},Loop:{actionType:"CONTROL",staticFields:{},body:{duration:0,repetitions:0},fields:{Duration:{key:"duration",type:"numerical",min:0,placeholder:"Duration in seconds",units:"seconds"},Repetitions:{key:"repetitions",type:"numerical",min:0,placeholder:"Number of repetitions",step:1}}},"End loop":{actionType:"CONTROL",staticFields:{},body:{},fields:{}}};function hn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Start",h(e,"class","inverse")},m(i,s){y(i,e,s),n||(o=L(e,"click",t[2]),n=!0)},p:I,d(i){i&&v(e),n=!1,o()}}}function gn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Stop",h(e,"class","inverse")},m(i,s){y(i,e,s),n||(o=L(e,"click",t[3]),n=!0)},p:I,d(i){i&&v(e),n=!1,o()}}}function bn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Stop immediately",h(e,"class","inverse")},m(i,s){y(i,e,s),n||(o=L(e,"click",t[3]),n=!0)},p:I,d(i){i&&v(e),n=!1,o()}}}function vn(t){let e;return{c(){e=k("p"),e.textContent="Intervalometer stopped."},m(n,o){y(n,e,o)},d(n){n&&v(e)}}}function yn(t){let e;return{c(){e=k("p"),e.textContent="Intervalometer running..."},m(n,o){y(n,e,o)},d(n){n&&v(e)}}}function wn(t){let e;return{c(){e=k("p"),e.textContent="Intervalometer stopping after last action..."},m(n,o){y(n,e,o)},d(n){n&&v(e)}}}function kn(t){let e;return{c(){e=k("p"),e.textContent="Loading..."},m(n,o){y(n,e,o)},d(n){n&&v(e)}}}function $n(t){let e,n;function o(u,p){return u[1].isStopping?bn:u[1].isRunning?gn:hn}let i=o(t),s=i(t);function l(u,p){return u[0]?kn:u[1].isStopping?wn:u[1].isRunning?yn:vn}let r=l(t),f=r(t);return{c(){s.c(),e=S(),f.c(),n=ie()},m(u,p){s.m(u,p),y(u,e,p),f.m(u,p),y(u,n,p)},p(u,p){i===(i=o(u))&&s?s.p(u,p):(s.d(1),s=i(u),s&&(s.c(),s.m(e.parentNode,e))),r!==(r=l(u))&&(f.d(1),f=r(u),f&&(f.c(),f.m(n.parentNode,n)))},d(u){u&&(v(e),v(n)),s.d(u),f.d(u)}}}function Cn(t){let e;return{c(){e=k("h2"),e.textContent="Intervalometer",h(e,"slot","heading")},m(n,o){y(n,e,o)},p:I,d(n){n&&v(e)}}}function Sn(t){let e,n;return e=new be({props:{name:"intervalometer",$$slots:{heading:[Cn],default:[$n]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(o,i){R(e,o,i),n=!0},p(o,[i]){const s={};i&131&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function In(t,e,n){let o,i,s,l;F(t,J,p=>n(4,o=p)),F(t,Ie,p=>n(5,i=p)),F(t,ae,p=>n(6,s=p)),F(t,ne,p=>n(1,l=p));let r;return J.subscribe(p=>n(0,r=p&&r)),[r,l,()=>{const p=[];for(const a of s){const d=Le[a.action],b=JSON.parse(JSON.stringify(d.body));for(const m in a.fields)b[d.fields[m].key]=a.fields[m];p.push({actionName:a.action,actionType:d.actionType,time:a.time,timeMode:a.timeMode,body:b,...d.staticFields})}i.send(JSON.stringify({command:"start",sequence:p,actions:s})),n(0,r=z(J,o=!0,o))},()=>{i.send(JSON.stringify({command:"stop"})),n(0,r=z(J,o=!0,o))}]}class Tn extends X{constructor(e){super(),Q(this,e,In,Sn,H,{})}}function Pn(t,e={enabled:!0}){let{enabled:n,eventType:o,nodeForEvent:i,options:s,capture:l}=et(e);function r(f){f.target&&t&&!t.contains(f.target)&&!f.defaultPrevented&&t.dispatchEvent(new CustomEvent("clickoutside",{detail:f}))}return e.enabled!==!1&&i.addEventListener(o,r,s),{update(f){i.removeEventListener(o,r,l),{enabled:n,eventType:o,nodeForEvent:i,options:s,capture:l}=et(f),n&&i.addEventListener(o,r,s)},destroy(){i.removeEventListener(o,r,l)}}}function et(t={}){var e,n;return{enabled:t.enabled??!0,nodeForEvent:((e=t.limit)==null?void 0:e.parent)??document,eventType:t.event??"click",options:t.options,capture:typeof t.options=="object"?(n=t.options)==null?void 0:n.capture:t.options}}const Nn=t=>({}),tt=t=>({toggleDropdown:t[4]}),On=t=>({}),nt=t=>({toggleDropdown:t[4]});function ot(t){let e,n,o,i;const s=t[7].buttons,l=we(s,t,t[6],tt);return{c(){e=k("div"),n=k("div"),l&&l.c(),h(n,"class","options-menu svelte-azbhie"),Z(n,"width",t[2]?"100%":void 0),Z(n,"background-color",t[3]?"var(--gray-85)":"var(--gray-90)"),h(e,"class","menu-container svelte-azbhie"),Z(e,"top",t[1]==="top"?"0.5rem":"100%"),Z(e,"width",t[2]?"100%":void 0)},m(r,f){y(r,e,f),w(e,n),l&&l.m(n,null),i=!0},p(r,f){l&&l.p&&(!i||f&64)&&$e(l,s,r,r[6],i?ke(s,r[6],f,Nn):Ce(r[6]),tt),f&4&&Z(n,"width",r[2]?"100%":void 0),f&8&&Z(n,"background-color",r[3]?"var(--gray-85)":"var(--gray-90)"),f&2&&Z(e,"top",r[1]==="top"?"0.5rem":"100%"),f&4&&Z(e,"width",r[2]?"100%":void 0)},i(r){i||($(l,r),r&&de(()=>{i&&(o||(o=Ae(e,Xe,{duration:100},!0)),o.run(1))}),i=!0)},o(r){C(l,r),r&&(o||(o=Ae(e,Xe,{duration:100},!1)),o.run(0)),i=!1},d(r){r&&v(e),l&&l.d(r),r&&o&&o.end()}}}function En(t){let e,n,o,i,s,l;const r=t[7].button,f=we(r,t,t[6],nt);let u=t[0]&&ot(t);const p=t[7].default,a=we(p,t,t[6],null);return{c(){e=k("div"),f&&f.c(),n=S(),u&&u.c(),o=S(),a&&a.c(),h(e,"class","options-container svelte-azbhie"),Z(e,"flex",t[2]?"1":void 0)},m(d,b){y(d,e,b),f&&f.m(e,null),w(e,n),u&&u.m(e,null),w(e,o),a&&a.m(e,null),i=!0,s||(l=[It(Pn.call(null,e)),L(e,"clickoutside",t[8])],s=!0)},p(d,[b]){f&&f.p&&(!i||b&64)&&$e(f,r,d,d[6],i?ke(r,d[6],b,On):Ce(d[6]),nt),d[0]?u?(u.p(d,b),b&1&&$(u,1)):(u=ot(d),u.c(),$(u,1),u.m(e,o)):u&&(me(),C(u,1,1,()=>{u=null}),he()),a&&a.p&&(!i||b&64)&&$e(a,p,d,d[6],i?ke(p,d[6],b,null):Ce(d[6]),null),b&4&&Z(e,"flex",d[2]?"1":void 0)},i(d){i||($(f,d),$(u),$(a,d),i=!0)},o(d){C(f,d),C(u),C(a,d),i=!1},d(d){d&&v(e),f&&f.d(d),u&&u.d(),a&&a.d(d),s=!1,Y(l)}}}function Mn(t,e,n){let{$$slots:o={},$$scope:i}=e,{closeCondition:s=!1}=e,{align:l="bottom"}=e,{showOptions:r=!1}=e,{fullWidth:f=!1}=e,{lighter:u=!1}=e;const p=()=>n(0,r=!r),a=()=>n(0,r=!1);return t.$$set=d=>{"closeCondition"in d&&n(5,s=d.closeCondition),"align"in d&&n(1,l=d.align),"showOptions"in d&&n(0,r=d.showOptions),"fullWidth"in d&&n(2,f=d.fullWidth),"lighter"in d&&n(3,u=d.lighter),"$$scope"in d&&n(6,i=d.$$scope)},t.$$.update=()=>{t.$$.dirty&33&&n(0,r=!s&&r)},[r,l,f,u,p,s,i,o,a]}class An extends X{constructor(e){super(),Q(this,e,Mn,En,H,{closeCondition:5,align:1,showOptions:0,fullWidth:2,lighter:3})}}function it(t,e,n){const o=t.slice();return o[7]=e[n],o}function Ln(t){let e,n,o,i,s,l,r;return{c(){e=k("button"),n=N(t[0]),o=S(),i=Ne("svg"),s=Ne("path"),h(s,"d","M6 9l6 6 6-6"),h(i,"xmlns","http://www.w3.org/2000/svg"),h(i,"width","1.3em"),h(i,"height","1.3em"),h(i,"viewBox","0 0 24 24"),h(i,"fill","none"),h(i,"stroke","currentColor"),h(i,"stroke-width","2"),h(i,"stroke-linecap","round"),h(i,"stroke-linejoin","round"),h(e,"slot","button"),h(e,"title",t[2]),h(e,"class","select-dropdown-button svelte-1w71hwl"),e.disabled=t[3]},m(f,u){y(f,e,u),w(e,n),w(e,o),w(e,i),w(i,s),l||(r=L(e,"click",function(){_e(t[6])&&t[6].apply(this,arguments)}),l=!0)},p(f,u){t=f,u&1&&B(n,t[0]),u&4&&h(e,"title",t[2]),u&8&&(e.disabled=t[3])},d(f){f&&v(e),l=!1,r()}}}function st(t){let e,n=t[7]+"",o,i,s;function l(){return t[5](t[7],t[6])}return{c(){e=k("button"),o=N(n)},m(r,f){y(r,e,f),w(e,o),i||(s=L(e,"click",l),i=!0)},p(r,f){t=r,f&16&&n!==(n=t[7]+"")&&B(o,n)},d(r){r&&v(e),i=!1,s()}}}function lt(t){let e,n=t[0]!==t[7]&&st(t);return{c(){n&&n.c(),e=ie()},m(o,i){n&&n.m(o,i),y(o,e,i)},p(o,i){o[0]!==o[7]?n?n.p(o,i):(n=st(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(o){o&&v(e),n&&n.d(o)}}}function Fn(t){let e,n=pe(t[4]),o=[];for(let i=0;i<n.length;i+=1)o[i]=lt(it(t,n,i));return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=ie()},m(i,s){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,s);y(i,e,s)},p(i,s){if(s&81){n=pe(i[4]);let l;for(l=0;l<n.length;l+=1){const r=it(i,n,l);o[l]?o[l].p(r,s):(o[l]=lt(r),o[l].c(),o[l].m(e.parentNode,e))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(i){i&&v(e),bt(o,i)}}}function Rn(t){let e,n,o,i,s;return i=new An({props:{fullWidth:!0,lighter:!0,$$slots:{buttons:[Fn,({toggleDropdown:l})=>({6:l}),({toggleDropdown:l})=>l?64:0],button:[Ln,({toggleDropdown:l})=>({6:l}),({toggleDropdown:l})=>l?64:0]},$$scope:{ctx:t}}}),{c(){e=k("div"),n=N(t[1]),o=N(`:\r
  `),D(i.$$.fragment),h(e,"class","select-dropdown svelte-1w71hwl")},m(l,r){y(l,e,r),w(e,n),w(e,o),R(i,e,null),s=!0},p(l,[r]){(!s||r&2)&&B(n,l[1]);const f={};r&1117&&(f.$$scope={dirty:r,ctx:l}),i.$set(f)},i(l){s||($(i.$$.fragment,l),s=!0)},o(l){C(i.$$.fragment,l),s=!1},d(l){l&&v(e),j(i)}}}function jn(t,e,n){let{label:o}=e,{buttonTitle:i}=e,{disabled:s=!1}=e,{value:l}=e,{options:r}=e;const f=(u,p)=>{n(0,l=u),p()};return t.$$set=u=>{"label"in u&&n(1,o=u.label),"buttonTitle"in u&&n(2,i=u.buttonTitle),"disabled"in u&&n(3,s=u.disabled),"value"in u&&n(0,l=u.value),"options"in u&&n(4,r=u.options)},[l,o,i,s,r,f]}class Be extends X{constructor(e){super(),Q(this,e,jn,Rn,H,{label:1,buttonTitle:2,disabled:3,value:0,options:4})}}function rt(t,e,n){const o=t.slice();return o[8]=e[n],o[9]=e,o[10]=n,o}function Dn(t){let e,n=t[8]+"",o,i,s,l,r,f,u,p,a=(t[3].fields[t[8]].units??"")+"",d,b,m;function c(){t[7].call(s,t[8])}return{c(){e=k("label"),o=N(n),i=S(),s=k("input"),p=S(),d=N(a),h(s,"type","number"),h(s,"step",l=t[3].fields[t[8]].step??"any"),h(s,"min",r=t[3].fields[t[8]].min),h(s,"max",f=t[3].fields[t[8]].max),h(s,"placeholder",u=t[3].fields[t[8]].placeholder),h(e,"class","svelte-z1q96p")},m(_,g){y(_,e,g),w(e,o),w(e,i),w(e,s),te(s,t[0].fields[t[8]]),w(e,p),w(e,d),b||(m=L(s,"input",c),b=!0)},p(_,g){t=_,g&1&&n!==(n=t[8]+"")&&B(o,n),g&1&&l!==(l=t[3].fields[t[8]].step??"any")&&h(s,"step",l),g&1&&r!==(r=t[3].fields[t[8]].min)&&h(s,"min",r),g&1&&f!==(f=t[3].fields[t[8]].max)&&h(s,"max",f),g&1&&u!==(u=t[3].fields[t[8]].placeholder)&&h(s,"placeholder",u),g&1&&Oe(s.value)!==t[0].fields[t[8]]&&te(s,t[0].fields[t[8]]),g&1&&a!==(a=(t[3].fields[t[8]].units??"")+"")&&B(d,a)},i:I,o:I,d(_){_&&v(e),b=!1,m()}}}function Un(t){let e,n,o;function i(l){t[6](l,t[8])}let s={label:t[8],buttonTitle:"Choose value for"+t[8],options:t[3].fields[t[8]].options};return t[0].fields[t[8]]!==void 0&&(s.value=t[0].fields[t[8]]),e=new Be({props:s}),Se.push(()=>We(e,"value",i)),{c(){D(e.$$.fragment)},m(l,r){R(e,l,r),o=!0},p(l,r){t=l;const f={};r&1&&(f.label=t[8]),r&1&&(f.buttonTitle="Choose value for"+t[8]),r&1&&(f.options=t[3].fields[t[8]].options),!n&&r&1&&(n=!0,f.value=t[0].fields[t[8]],Je(()=>n=!1)),e.$set(f)},i(l){o||($(e.$$.fragment,l),o=!0)},o(l){C(e.$$.fragment,l),o=!1},d(l){j(e,l)}}}function ut(t){let e,n,o,i,s;const l=[Un,Dn],r=[];function f(u,p){return u[3].fields[u[8]].type==="enum"?0:u[3].fields[u[8]].type==="numerical"?1:-1}return~(n=f(t))&&(o=r[n]=l[n](t)),{c(){e=k("div"),o&&o.c(),i=S()},m(u,p){y(u,e,p),~n&&r[n].m(e,null),w(e,i),s=!0},p(u,p){let a=n;n=f(u),n===a?~n&&r[n].p(u,p):(o&&(me(),C(r[a],1,1,()=>{r[a]=null}),he()),~n?(o=r[n],o?o.p(u,p):(o=r[n]=l[n](u),o.c()),$(o,1),o.m(e,i)):o=null)},i(u){s||($(o),s=!0)},o(u){C(o),s=!1},d(u){u&&v(e),~n&&r[n].d()}}}function qn(t){let e,n,o,i=t[1]+1+"",s,l,r=t[0].action+"",f,u,p,a,d,b,m,c,_,g,T,P,E,W,x,A;function V(O){t[5](O)}let G={label:"Offset",buttonTitle:"Choose time offset mode",options:["from start","after previous"]};t[0].timeMode!==void 0&&(G.value=t[0].timeMode),T=new Be({props:G}),Se.push(()=>We(T,"value",V));let K=pe(Object.keys(t[0].fields)),M=[];for(let O=0;O<K.length;O+=1)M[O]=ut(rt(t,K,O));const yt=O=>C(M[O],1,1,()=>{M[O]=null});return{c(){e=k("div"),n=k("div"),o=k("h3"),s=N(i),l=N(". "),f=N(r),u=S(),p=k("button"),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',a=S(),d=k("label"),b=N(`Time:\r
    `),m=k("input"),c=N(`\r
    seconds`),_=S(),g=k("div"),D(T.$$.fragment),E=S();for(let O=0;O<M.length;O+=1)M[O].c();h(p,"class","delete-container svelte-z1q96p"),h(n,"class","heading svelte-z1q96p"),h(m,"type","number"),h(m,"step","any"),h(m,"min","0"),h(m,"placeholder","Time offset in seconds"),h(d,"class","svelte-z1q96p"),h(e,"class","container svelte-z1q96p")},m(O,U){y(O,e,U),w(e,n),w(n,o),w(o,s),w(o,l),w(o,f),w(n,u),w(n,p),w(e,a),w(e,d),w(d,b),w(d,m),te(m,t[0].time),w(d,c),w(e,_),w(e,g),R(T,g,null),w(e,E);for(let oe=0;oe<M.length;oe+=1)M[oe]&&M[oe].m(e,null);W=!0,x||(A=[L(p,"click",function(){_e(t[2])&&t[2].apply(this,arguments)}),L(m,"input",t[4])],x=!0)},p(O,[U]){t=O,(!W||U&2)&&i!==(i=t[1]+1+"")&&B(s,i),(!W||U&1)&&r!==(r=t[0].action+"")&&B(f,r),U&1&&Oe(m.value)!==t[0].time&&te(m,t[0].time);const oe={};if(!P&&U&1&&(P=!0,oe.value=t[0].timeMode,Je(()=>P=!1)),T.$set(oe),U&9){K=pe(Object.keys(t[0].fields));let q;for(q=0;q<K.length;q+=1){const Ge=rt(t,K,q);M[q]?(M[q].p(Ge,U),$(M[q],1)):(M[q]=ut(Ge),M[q].c(),$(M[q],1),M[q].m(e,null))}for(me(),q=K.length;q<M.length;q+=1)yt(q);he()}},i(O){if(!W){$(T.$$.fragment,O);for(let U=0;U<K.length;U+=1)$(M[U]);W=!0}},o(O){C(T.$$.fragment,O),M=M.filter(Boolean);for(let U=0;U<M.length;U+=1)C(M[U]);W=!1},d(O){O&&v(e),j(T),bt(M,O),x=!1,Y(A)}}}function zn(t,e,n){let{action:o}=e,{index:i}=e,{deleteAction:s}=e;const l=Le[o.action];function r(){o.time=Oe(this.value),n(0,o)}function f(a){t.$$.not_equal(o.timeMode,a)&&(o.timeMode=a,n(0,o))}function u(a,d){t.$$.not_equal(o.fields[d],a)&&(o.fields[d]=a,n(0,o))}function p(a){o.fields[a]=Oe(this.value),n(0,o)}return t.$$set=a=>{"action"in a&&n(0,o=a.action),"index"in a&&n(1,i=a.index),"deleteAction"in a&&n(2,s=a.deleteAction)},[o,i,s,l,r,f,u,p]}class Jn extends X{constructor(e){super(),Q(this,e,zn,qn,H,{action:0,index:1,deleteAction:2})}}function ft(t,e,n){const o=t.slice();return o[5]=e[n],o[7]=n,o}function ct(t,e){let n,o,i;function s(){return e[3](e[5])}return o=new Jn({props:{action:e[5],index:e[7],deleteAction:s}}),{key:t,first:null,c(){n=ie(),D(o.$$.fragment),this.first=n},m(l,r){y(l,n,r),R(o,l,r),i=!0},p(l,r){e=l;const f={};r&2&&(f.action=e[5]),r&2&&(f.index=e[7]),r&2&&(f.deleteAction=s),o.$set(f)},i(l){i||($(o.$$.fragment,l),i=!0)},o(l){C(o.$$.fragment,l),i=!1},d(l){l&&v(n),j(o,l)}}}function Wn(t){let e=[],n=new Map,o,i,s,l,r,f,u,p,a=pe(t[1]);const d=c=>c[5];for(let c=0;c<a.length;c+=1){let _=ft(t,a,c),g=d(_);n.set(g,e[c]=ct(g,_))}function b(c){t[4](c)}let m={label:"New action",buttonTitle:"Choose new action type",options:Object.keys(Le)};return t[0]!==void 0&&(m.value=t[0]),i=new Be({props:m}),Se.push(()=>We(i,"value",b)),{c(){for(let c=0;c<e.length;c+=1)e[c].c();o=S(),D(i.$$.fragment),l=S(),r=k("button"),r.textContent="Add action",h(r,"class","inverse")},m(c,_){for(let g=0;g<e.length;g+=1)e[g]&&e[g].m(c,_);y(c,o,_),R(i,c,_),y(c,l,_),y(c,r,_),f=!0,u||(p=L(r,"click",t[2]),u=!0)},p(c,_){_&2&&(a=pe(c[1]),me(),e=Bt(e,_,d,1,c,a,n,o.parentNode,Wt,ct,o,ft),he());const g={};!s&&_&1&&(s=!0,g.value=c[0],Je(()=>s=!1)),i.$set(g)},i(c){if(!f){for(let _=0;_<a.length;_+=1)$(e[_]);$(i.$$.fragment,c),f=!0}},o(c){for(let _=0;_<e.length;_+=1)C(e[_]);C(i.$$.fragment,c),f=!1},d(c){c&&(v(o),v(l),v(r));for(let _=0;_<e.length;_+=1)e[_].d(c);j(i,c),u=!1,p()}}}function Bn(t){let e;return{c(){e=k("h2"),e.textContent="Sequence",h(e,"slot","heading")},m(n,o){y(n,e,o)},p:I,d(n){n&&v(e)}}}function Gn(t){let e,n;return e=new be({props:{name:"sequence",$$slots:{heading:[Bn],default:[Wn]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(o,i){R(e,o,i),n=!0},p(o,[i]){const s={};i&259&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function Hn(t,e,n){let o;F(t,ae,f=>n(1,o=f));let i="Trigger shutter";const s=()=>{const f=Le[i];o.push({action:i,fields:Object.fromEntries(Object.entries(f.fields).map(([u,p])=>[u,f.body[p.key]])),time:0,timeMode:"after previous"}),ae.set(o)},l=f=>{z(ae,o=o.filter(u=>u!==f),o)};function r(f){i=f,n(0,i)}return[i,o,s,l,r]}class Vn extends X{constructor(e){super(),Q(this,e,Hn,Gn,H,{})}}function Kn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Press shutter",h(e,"class","inverse")},m(i,s){y(i,e,s),n||(o=L(e,"click",t[3]),n=!0)},p:I,d(i){i&&v(e),n=!1,o()}}}function Qn(t){let e,n,o;return{c(){e=k("button"),e.textContent="Release shutter",h(e,"class","inverse")},m(i,s){y(i,e,s),n||(o=L(e,"click",t[4]),n=!0)},p:I,d(i){i&&v(e),n=!1,o()}}}function Xn(t){let e;return{c(){e=k("p"),e.textContent="Shutter is not pressed."},m(n,o){y(n,e,o)},d(n){n&&v(e)}}}function Yn(t){let e;return{c(){e=k("p"),e.textContent="Shutter is pressed..."},m(n,o){y(n,e,o)},d(n){n&&v(e)}}}function Zn(t){let e;return{c(){e=k("p"),e.textContent="Loading..."},m(n,o){y(n,e,o)},d(n){n&&v(e)}}}function xn(t){let e,n,o,i,s,l,r,f;function u(c,_){return c[1].shutterIsPressed?Qn:Kn}let p=u(t),a=p(t);function d(c,_){return c[0]?Zn:c[1].shutterIsPressed?Yn:Xn}let b=d(t),m=b(t);return{c(){e=k("button"),e.textContent="Trigger shutter",n=S(),a.c(),o=S(),i=k("button"),i.textContent="Trigger IR release",s=S(),m.c(),l=ie(),h(e,"class","inverse"),h(i,"class","inverse")},m(c,_){y(c,e,_),y(c,n,_),a.m(c,_),y(c,o,_),y(c,i,_),y(c,s,_),m.m(c,_),y(c,l,_),r||(f=[L(e,"click",t[2]),L(i,"click",t[5])],r=!0)},p(c,_){p===(p=u(c))&&a?a.p(c,_):(a.d(1),a=p(c),a&&(a.c(),a.m(o.parentNode,o))),b!==(b=d(c))&&(m.d(1),m=b(c),m&&(m.c(),m.m(l.parentNode,l)))},d(c){c&&(v(e),v(n),v(o),v(i),v(s),v(l)),a.d(c),m.d(c),r=!1,Y(f)}}}function eo(t){let e;return{c(){e=k("h2"),e.textContent="Shutter",h(e,"slot","heading")},m(n,o){y(n,e,o)},p:I,d(n){n&&v(e)}}}function to(t){let e,n;return e=new be({props:{name:"shutter",$$slots:{heading:[eo],default:[xn]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(o,i){R(e,o,i),n=!0},p(o,[i]){const s={};i&259&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function no(t,e,n){let o,i,s;F(t,J,a=>n(6,o=a)),F(t,Ie,a=>n(7,i=a)),F(t,ne,a=>n(1,s=a));let l;return J.subscribe(a=>n(0,l=a&&l)),[l,s,()=>{i.send(JSON.stringify({command:"triggerShutter"})),n(0,l=z(J,o=!0,o))},()=>{i.send(JSON.stringify({command:"pressShutter"})),n(0,l=z(J,o=!0,o))},()=>{i.send(JSON.stringify({command:"releaseShutter"})),n(0,l=z(J,o=!0,o))},()=>{i.send(JSON.stringify({command:"triggerIR"})),n(0,l=z(J,o=!0,o))}]}class oo extends X{constructor(e){super(),Q(this,e,no,to,H,{})}}function io(t){let e,n,o=t[1].statusCode+"",i,s,l=t[1].statusMsg+"",r,f,u,p,a=(t[1].actionIndex==-1?1:t[1].actionIndex+1)+"",d,b,m=t[1].actions.length+"",c,_,g=t[0].toFixed(1)+"",T;return{c(){e=k("p"),n=N("Status code: "),i=N(o),s=N(`\r
    Status message: `),r=N(l),f=S(),u=k("p"),p=N("Next action index: "),d=N(a),b=N("/"),c=N(m),_=N(`\r
    Time until next action: `),T=N(g),se(e,"success",t[1].statusCode==200),se(e,"warning",t[1].statusCode==0),se(e,"error",t[1].statusCode!=200&&t[1].statusCode!=0)},m(P,E){y(P,e,E),w(e,n),w(e,i),w(e,s),w(e,r),y(P,f,E),y(P,u,E),w(u,p),w(u,d),w(u,b),w(u,c),w(u,_),w(u,T)},p(P,E){E&2&&o!==(o=P[1].statusCode+"")&&B(i,o),E&2&&l!==(l=P[1].statusMsg+"")&&B(r,l),E&2&&se(e,"success",P[1].statusCode==200),E&2&&se(e,"warning",P[1].statusCode==0),E&2&&se(e,"error",P[1].statusCode!=200&&P[1].statusCode!=0),E&2&&a!==(a=(P[1].actionIndex==-1?1:P[1].actionIndex+1)+"")&&B(d,a),E&2&&m!==(m=P[1].actions.length+"")&&B(c,m),E&1&&g!==(g=P[0].toFixed(1)+"")&&B(T,g)},d(P){P&&(v(e),v(f),v(u))}}}function so(t){let e;return{c(){e=k("h2"),e.textContent="Status",h(e,"slot","heading")},m(n,o){y(n,e,o)},p:I,d(n){n&&v(e)}}}function lo(t){let e,n;return e=new be({props:{name:"status",$$slots:{heading:[so],default:[io]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(o,i){R(e,o,i),n=!0},p(o,[i]){const s={};i&19&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function ro(t,e,n){let o;F(t,ne,r=>n(1,o=r));let i=Date.now(),s=0,l;return ne.subscribe(r=>{i=Date.now(),clearInterval(l),r.isRunning?l=setInterval(()=>{n(0,s=(o.timeUntilNext-(Date.now()-i))/1e3)},100):n(0,s=0)}),[s,o]}class uo extends X{constructor(e){super(),Q(this,e,ro,lo,H,{})}}function fo(t){let e,n,o;return{c(){e=k("button"),e.innerHTML='<img src="/icon.svg" alt="Crescent icon"/>',h(e,"title","Switch theme"),h(e,"class","svelte-1oalwmk")},m(i,s){y(i,e,s),n||(o=L(e,"click",t[0]),n=!0)},p:I,i:I,o:I,d(i){i&&v(e),n=!1,o()}}}function co(t,e,n){let{theme:o=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}=e;const i=()=>{const l=window.document.documentElement.classList;o=="dark"?l.add("dark"):l.remove("dark")},s=()=>{n(1,o=o=="light"?"dark":"light"),localStorage.setItem("theme",o),i()};return i(),t.$$set=l=>{"theme"in l&&n(1,o=l.theme)},[s,o]}class ao extends X{constructor(e){super(),Q(this,e,co,fo,H,{theme:1})}}function at(t){let e,n,o,i,s,l,r,f;return e=new sn({}),o=new Tn({}),s=new Vn({}),r=new oo({}),{c(){D(e.$$.fragment),n=S(),D(o.$$.fragment),i=S(),D(s.$$.fragment),l=S(),D(r.$$.fragment)},m(u,p){R(e,u,p),y(u,n,p),R(o,u,p),y(u,i,p),R(s,u,p),y(u,l,p),R(r,u,p),f=!0},i(u){f||($(e.$$.fragment,u),$(o.$$.fragment,u),$(s.$$.fragment,u),$(r.$$.fragment,u),f=!0)},o(u){C(e.$$.fragment,u),C(o.$$.fragment,u),C(s.$$.fragment,u),C(r.$$.fragment,u),f=!1},d(u){u&&(v(n),v(i),v(l)),j(e,u),j(o,u),j(s,u),j(r,u)}}}function po(t){let e,n,o,i,s,l,r,f,u,p,a;s=new ao({}),r=new uo({}),u=new mn({});let d=t[0]&&at();return{c(){e=k("main"),n=k("div"),o=k("h1"),o.textContent="ESP8266 Intervalometer",i=S(),D(s.$$.fragment),l=S(),D(r.$$.fragment),f=S(),D(u.$$.fragment),p=S(),d&&d.c(),h(n,"class","svelte-p108mq"),h(e,"class","svelte-p108mq")},m(b,m){y(b,e,m),w(e,n),w(n,o),w(n,i),R(s,n,null),w(e,l),R(r,e,null),w(e,f),R(u,e,null),w(e,p),d&&d.m(e,null),a=!0},p(b,[m]){b[0]?d?m&1&&$(d,1):(d=at(),d.c(),$(d,1),d.m(e,null)):d&&(me(),C(d,1,1,()=>{d=null}),he())},i(b){a||($(s.$$.fragment,b),$(r.$$.fragment,b),$(u.$$.fragment,b),$(d),a=!0)},o(b){C(s.$$.fragment,b),C(r.$$.fragment,b),C(u.$$.fragment,b),C(d),a=!1},d(b){b&&v(e),j(s),j(r),j(u),d&&d.d()}}}function _o(t,e,n){let o;return F(t,Pe,i=>n(0,o=i)),[o]}class mo extends X{constructor(e){super(),Q(this,e,_o,po,H,{})}}new mo({target:document.getElementById("app")});</script>
    <style>:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;font-size:16px;box-sizing:border-box;color:var(--gray-5);background-color:var(--gray-95);transition:background-color .2s,color .2s}*,*:before,*:after{box-sizing:inherit}body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:400}ol,ul{list-style:none}img{max-width:100%;height:auto}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex}:root{--black: #121212;--white: #f0f0f0;--dark: #4c4c4c;--light: #acacac;--darker: #2d2d2d;--darkest: #1e1e1e;--lighter: #d1d1d1;--lightest: #e0e0e0;--medium: #888888;--light-red: #ff8484;--dark-red: #b70000;--light-green: #87ff85;--dark-green: #028100;--light-yellow: #fffd85;--dark-yellow: #768500}:root:not(.dark){--gray-5: var(--black);--gray-10: var(--darkest);--gray-15: var(--darker);--gray-35: var(--dark);--gray-50: var(--medium);--gray-65: var(--light);--gray-85: var(--lighter);--gray-90: var(--lightest);--gray-95: var(--white);--green-5: var(--dark-green);--green-95: var(--light-green);--red-5: var(--dark-red);--red-95: var(--light-red);--yellow-5: var(--dark-yellow);--yellow-95: var(--light-yellow)}:root.dark{--gray-5: var(--white);--gray-10: var(--lightest);--gray-15: var(--lighter);--gray-35: var(--light);--gray-50: var(--medium);--gray-65: var(--dark);--gray-85: var(--darker);--gray-90: var(--darkest);--gray-95: var(--black);--green-5: var(--light-green);--green-95: var(--dark-green);--red-5: var(--light-red);--red-95: var(--dark-red);--yellow-5: var(--light-yellow);--yellow-95: var(--dark-yellow)}#app{width:100%;max-width:480px;margin:0 auto;padding:2rem}button{border-radius:.5rem;border:1px solid transparent;padding:.6em 1.2rem;font-size:1rem;font-weight:500;font-family:inherit;color:var(--gray-5);background-color:transparent;cursor:pointer;transition:background-color .2s,color .2s}button:hover:not(:disabled){background-color:var(--gray-65)}button:disabled{color:var(--gray-50);cursor:not-allowed}button.inverse{color:var(--gray-95);background-color:var(--gray-5)}button.inverse:hover:not(:disabled){background-color:var(--gray-35)}button.inverse:disabled{background-color:var(--gray-50);cursor:not-allowed}label{display:flex;align-items:center;gap:16px;background-color:var(--gray-90);padding:10px 16px;border-radius:8px;transition:background-color .2s}label>span{flex-shrink:0}input{border-width:2px;border-color:transparent;border-style:solid;border-radius:8px;padding:.6em;outline:none;font-size:inherit;font-family:inherit;color:var(--gray-5);background-color:var(--gray-85);transition:background-color .2s,color .2s,border-color .2s;width:100%}input:hover{border-color:var(--gray-65)}input:focus{border-color:var(--gray-50)}input:disabled{border-color:transparent;color:var(--gray-50);cursor:not-allowed}.success{color:var(--green-5)}.warning{color:var(--yellow-5)}.error{color:var(--red-5)}p{white-space:pre-line;overflow-wrap:break-word}.section.svelte-klc9jx{border-style:solid;border-width:2px;border-color:var(--gray-50);border-radius:16px;display:flex;flex-direction:column;padding:16px 16px 0;transition:border-color .2s}.body.svelte-klc9jx{display:flex;flex-direction:column;row-gap:16px;padding-bottom:16px}.heading.svelte-klc9jx{all:unset;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-bottom:16px}.heading.svelte-klc9jx:hover{background-color:transparent}.arrow-container.svelte-klc9jx{transition:background-color .2s;background-color:transparent;border-radius:8px;padding:4px;display:flex;align-items:center}.arrow-container.svelte-klc9jx:hover{background-color:var(--gray-65)}svg.svelte-klc9jx{transition:transform .3s;color:inherit}svg.rotated.svelte-klc9jx{transform:rotate(-90deg)}.options-container.svelte-azbhie{position:relative}.menu-container.svelte-azbhie{position:absolute;left:0;z-index:1;white-space:pre}.options-menu.svelte-azbhie{display:inline-flex;flex-direction:column;padding:.5rem;border-radius:.7rem;border:var(--border-style);box-shadow:0 10px 15px -3px var(--shadow),0 4px 6px -4px var(--shadow)}.options-menu.svelte-azbhie>button{font-size:1.2rem;padding:.3rem;text-align:start}.select-dropdown.svelte-1w71hwl{display:flex;align-items:center;gap:.5rem}.select-dropdown.svelte-1w71hwl:has(button:disabled){cursor:not-allowed;color:var(--gray-50)}.select-dropdown-button.svelte-1w71hwl{background-color:var(--gray-85);padding:.6rem;display:flex;gap:.4rem;width:100%;justify-content:space-between}.heading.svelte-z1q96p{all:unset;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.container.svelte-z1q96p{display:flex;flex-direction:column;gap:12px;background-color:var(--gray-90);padding:10px 16px;border-radius:8px;transition:background-color .2s}.delete-container.svelte-z1q96p{padding:4px;display:flex;align-items:center}label.svelte-z1q96p{padding:0}button.svelte-1oalwmk{background-color:transparent;padding:8px;min-width:48px;display:flex;align-items:center}button.svelte-1oalwmk:hover{background-color:var(--gray-65)}div.svelte-p108mq{display:flex;flex-direction:row;justify-content:space-between;column-gap:8px}main.svelte-p108mq{display:flex;flex-direction:column;row-gap:32px}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
)rawliteral";

const char iconSvg[] PROGMEM = R"rawliteral(
<svg class="iconify iconify--logos" width="32" height="32" aria-hidden="true" preserveAspectRatio="xMidYMid" role="img" version="1.1" viewBox="0 0 256.96 257" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient id="radialGradient9277" cx="128.48" cy="128.5" r="96.375" gradientUnits="userSpaceOnUse"><stop stop-color="#e6e6e6" offset="0"/><stop stop-color="#c6c6c6" offset=".67716"/><stop stop-color="#a5a5a5" offset="1"/></radialGradient><clipPath id="clipPath10832"><circle cx="128.48" cy="128.5" r="128.5" fill="none" style="paint-order:normal"/></clipPath></defs><g clip-path="url(#clipPath10832)"><rect x="-.01819" width="257" height="257" fill="#121212" style="paint-order:normal"/><circle cx="128.48" cy="128.5" r="96.375" fill="url(#radialGradient9277)" style="paint-order:normal"/><circle cx="96.357" cy="160.62" r="96.375" fill="#121212" style="paint-order:normal"/></g></svg>
)rawliteral";