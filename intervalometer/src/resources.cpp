#include "resources.h"

const char indexHtml[] PROGMEM = R"rawliteral(
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESP8266 Intervalometer</title>
    <script type="module">var $t=Object.defineProperty;var Ct=(t,e,n)=>e in t?$t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ue=(t,e,n)=>(Ct(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function M(){}const _t=t=>t;function St(t,e){for(const n in e)t[n]=e[n];return t}function mt(t){return t()}function He(){return Object.create(null)}function Y(t){t.forEach(mt)}function me(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function It(t){return Object.keys(t).length===0}function Tt(t,...e){if(t==null){for(const o of e)o(void 0);return M}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function q(t,e,n){t.$$.on_destroy.push(Tt(e,n))}function we(t,e,n,o){if(t){const i=ht(t,e,n,o);return t[0](i)}}function ht(t,e,n,o){return t[1]&&o?St(n.ctx.slice(),t[1](o(e))):n.ctx}function ye(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],l=Math.max(e.dirty.length,i.length);for(let r=0;r<l;r+=1)s[r]=e.dirty[r]|i[r];return s}return e.dirty|i}return e.dirty}function ke(t,e,n,o,i,s){if(i){const l=ht(e,n,o,s);t.p(l,i)}}function $e(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function Ve(t){return t??""}function H(t,e,n){return t.set(n),e}function Pt(t){return t&&me(t.destroy)?t.destroy:M}const gt=typeof window<"u";let Nt=gt?()=>window.performance.now():()=>Date.now(),Fe=gt?t=>requestAnimationFrame(t):M;const ce=new Set;function bt(t){ce.forEach(e=>{e.c(t)||(ce.delete(e),e.f())}),ce.size!==0&&Fe(bt)}function Ot(t){let e;return ce.size===0&&Fe(bt),{promise:new Promise(n=>{ce.add(e={c:t,f:n})}),abort(){ce.delete(e)}}}function k(t,e){t.appendChild(e)}function vt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Et(t){const e=$("style");return e.textContent="/* empty */",Mt(vt(t),e),e.sheet}function Mt(t,e){return k(t.head||t,e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode&&t.parentNode.removeChild(t)}function wt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function Oe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t){return document.createTextNode(t)}function O(){return N(" ")}function se(){return N("")}function U(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function oe(t){return t===""?null:+t}function At(t){return Array.from(t.childNodes)}function V(t,e){e=""+e,t.data!==e&&(t.data=e)}function X(t,e){t.value=e??""}function ee(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function le(t,e,n){t.classList.toggle(e,!!n)}function Lt(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}const Ee=new Map;let Me=0;function Ut(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function jt(t,e){const n={stylesheet:Et(e),rules:{}};return Ee.set(t,n),n}function Ke(t,e,n,o,i,s,l,r=0){const f=16.666/o;let u=`{
`;for(let a=0;a<=1;a+=f){const h=e+(n-e)*s(a);u+=a*100+`%{${l(h,1-h)}}
`}const p=u+`100% {${l(n,1-n)}}
}`,_=`__svelte_${Ut(p)}_${r}`,d=vt(t),{stylesheet:b,rules:m}=Ee.get(d)||jt(d,t);m[_]||(m[_]=!0,b.insertRule(`@keyframes ${_} ${p}`,b.cssRules.length));const c=t.style.animation||"";return t.style.animation=`${c?`${c}, `:""}${_} ${o}ms linear ${i}ms 1 both`,Me+=1,_}function Dt(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=n.length-o.length;i&&(t.style.animation=o.join(", "),Me-=i,Me||Rt())}function Rt(){Fe(()=>{Me||(Ee.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&v(e)}),Ee.clear())})}let ze;function ve(t){ze=t}const fe=[],Ce=[];let ae=[];const Re=[],qt=Promise.resolve();let qe=!1;function Ft(){qe||(qe=!0,qt.then(yt))}function pe(t){ae.push(t)}function Je(t){Re.push(t)}const je=new Set;let re=0;function yt(){if(re!==0)return;const t=ze;do{try{for(;re<fe.length;){const e=fe[re];re++,ve(e),zt(e.$$)}}catch(e){throw fe.length=0,re=0,e}for(ve(null),fe.length=0,re=0;Ce.length;)Ce.pop()();for(let e=0;e<ae.length;e+=1){const n=ae[e];je.has(n)||(je.add(n),n())}ae.length=0}while(fe.length);for(;Re.length;)Re.pop()();qe=!1,je.clear(),ve(t)}function zt(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pe)}}function Jt(t){const e=[],n=[];ae.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),ae=e}let be;function Wt(){return be||(be=Promise.resolve(),be.then(()=>{be=null})),be}function De(t,e,n){t.dispatchEvent(Lt(`${e?"intro":"outro"}${n}`))}const Pe=new Set;let te;function Ie(){te={r:0,c:[],p:te}}function Te(){te.r||Y(te.c),te=te.p}function T(t,e){t&&t.i&&(Pe.delete(t),t.i(e))}function E(t,e,n,o){if(t&&t.o){if(Pe.has(t))return;Pe.add(t),te.c.push(()=>{Pe.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}const Bt={duration:0};function Ae(t,e,n,o){let s=e(t,n,{direction:"both"}),l=o?0:1,r=null,f=null,u=null,p;function _(){u&&Dt(t,u)}function d(m,c){const a=m.b-l;return c*=Math.abs(a),{a:l,b:m.b,d:a,duration:c,start:m.start,end:m.start+c,group:m.group}}function b(m){const{delay:c=0,duration:a=300,easing:h=_t,tick:S=M,css:R}=s||Bt,j={start:Nt()+c,b:m};m||(j.group=te,te.r+=1),"inert"in t&&(m?p!==void 0&&(t.inert=p):(p=t.inert,t.inert=!0)),r||f?f=j:(R&&(_(),u=Ke(t,l,m,a,c,h,R)),m&&S(0,1),r=d(j,a),pe(()=>De(t,m,"start")),Ot(A=>{if(f&&A>f.start&&(r=d(f,a),f=null,De(t,r.b,"start"),R&&(_(),u=Ke(t,l,r.b,r.duration,0,h,s.css))),r){if(A>=r.end)S(l=r.b,1-l),De(t,r.b,"end"),f||(r.b?_():--r.group.r||Y(r.group.c)),r=null;else if(A>=r.start){const B=A-r.start;l=r.a+r.d*h(B/r.duration),S(l,1-l)}}return!!(r||f)}))}return{run(m){me(s)?Wt().then(()=>{s=s({direction:m?"in":"out"}),b(m)}):b(m)},end(){_(),r=f=null}}}function _e(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Gt(t,e){E(t,1,1,()=>{e.delete(t.key)})}function Ht(t,e,n,o,i,s,l,r,f,u,p,_){let d=t.length,b=s.length,m=d;const c={};for(;m--;)c[t[m].key]=m;const a=[],h=new Map,S=new Map,R=[];for(m=b;m--;){const I=_(i,s,m),P=n(I);let y=l.get(P);y?o&&R.push(()=>y.p(I,e)):(y=u(P,I),y.c()),h.set(P,a[m]=y),P in c&&S.set(P,Math.abs(m-c[P]))}const j=new Set,A=new Set;function B(I){T(I,1),I.m(r,p),l.set(I.key,I),p=I.first,b--}for(;d&&b;){const I=a[b-1],P=t[d-1],y=I.key,C=P.key;I===P?(p=I.first,d--,b--):h.has(C)?!l.has(y)||j.has(y)?B(I):A.has(C)?d--:S.get(y)>S.get(C)?(A.add(y),B(I)):(j.add(C),d--):(f(P,l),d--)}for(;d--;){const I=t[d];h.has(I.key)||f(I,l)}for(;b;)B(a[b-1]);return Y(R),a}function We(t,e,n){const o=t.$$.props[e];o!==void 0&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function J(t){t&&t.c()}function F(t,e,n){const{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),pe(()=>{const s=t.$$.on_mount.map(mt).filter(me);t.$$.on_destroy?t.$$.on_destroy.push(...s):Y(s),t.$$.on_mount=[]}),i.forEach(pe)}function z(t,e){const n=t.$$;n.fragment!==null&&(Jt(n.after_update),Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Vt(t,e){t.$$.dirty[0]===-1&&(fe.push(t),Ft(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(t,e,n,o,i,s,l=null,r=[-1]){const f=ze;ve(t);const u=t.$$={fragment:null,ctx:[],props:s,update:M,not_equal:i,bound:He(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:He(),dirty:r,skip_bound:!1,root:e.target||f.$$.root};l&&l(u.root);let p=!1;if(u.ctx=n?n(t,e.props||{},(_,d,...b)=>{const m=b.length?b[0]:d;return u.ctx&&i(u.ctx[_],u.ctx[_]=m)&&(!u.skip_bound&&u.bound[_]&&u.bound[_](m),p&&Vt(t,_)),d}):[],u.update(),p=!0,Y(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const _=At(e.target);u.fragment&&u.fragment.l(_),_.forEach(v)}else u.fragment&&u.fragment.c();e.intro&&T(t.$$.fragment),F(t,e.target,e.anchor),yt()}ve(f)}class x{constructor(){Ue(this,"$$");Ue(this,"$$set")}$destroy(){z(this,1),this.$destroy=M}$on(e,n){if(!me(n))return M;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(e){this.$$set&&!It(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Kt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kt);const ue=[];function he(t,e=M){let n;const o=new Set;function i(r){if(Q(t,r)&&(t=r,n)){const f=!ue.length;for(const u of o)u[1](),ue.push(u,t);if(f){for(let u=0;u<ue.length;u+=2)ue[u][0](ue[u+1]);ue.length=0}}}function s(r){i(r(t))}function l(r,f=M){const u=[r,f];return o.add(u),o.size===1&&(n=e(i,s)||M),r(t),()=>{o.delete(u),o.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:l}}const Ne=he(!1),Qe=he("192.168.4.1"),ne=he({statusCode:0,statusMsg:"Page loaded.",sec:0,ms:0,cameraConnected:!1,intervalSec:35,isRunning:!1,isStopping:!1,cameraIP:"192.168.4.7",numShots:0,timeUntilNext:0,duration:0,repetitions:0,timeUntilCompletion:0,shutterIsPressed:!1,actions:[],actionIndex:0}),K=he(!1),Se=he(),de=he([{action:"Trigger shutter",fields:{},time:0,timeMode:"from start"}]);function Qt(t){const e=t-1;return e*e*e+1}function Xe(t,{delay:e=0,duration:n=400,easing:o=_t}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:s=>`opacity: ${s*i}`}}function Ye(t,{delay:e=0,duration:n=400,easing:o=Qt,axis:i="y"}={}){const s=getComputedStyle(t),l=+s.opacity,r=i==="y"?"height":"width",f=parseFloat(s[r]),u=i==="y"?["top","bottom"]:["left","right"],p=u.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),_=parseFloat(s[`padding${p[0]}`]),d=parseFloat(s[`padding${p[1]}`]),b=parseFloat(s[`margin${p[0]}`]),m=parseFloat(s[`margin${p[1]}`]),c=parseFloat(s[`border${p[0]}Width`]),a=parseFloat(s[`border${p[1]}Width`]);return{delay:e,duration:n,easing:o,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*l};${r}: ${h*f}px;padding-${u[0]}: ${h*_}px;padding-${u[1]}: ${h*d}px;margin-${u[0]}: ${h*b}px;margin-${u[1]}: ${h*m}px;border-${u[0]}-width: ${h*c}px;border-${u[1]}-width: ${h*a}px;`}}const Xt=t=>({}),Ze=t=>({});function xe(t){let e,n,o,i;const s=t[4].default,l=we(s,t,t[3],null);return{c(){e=$("div"),l&&l.c(),g(e,"id",n=`${t[0]}-body`),g(e,"class","body svelte-klc9jx")},m(r,f){w(r,e,f),l&&l.m(e,null),i=!0},p(r,f){l&&l.p&&(!i||f&8)&&ke(l,s,r,r[3],i?ye(s,r[3],f,null):$e(r[3]),null),(!i||f&1&&n!==(n=`${r[0]}-body`))&&g(e,"id",n)},i(r){i||(T(l,r),r&&pe(()=>{i&&(o||(o=Ae(e,Ye,{duration:300},!0)),o.run(1))}),i=!0)},o(r){E(l,r),r&&(o||(o=Ae(e,Ye,{duration:300},!1)),o.run(0)),i=!1},d(r){r&&v(e),l&&l.d(r),r&&o&&o.end()}}}function Yt(t){let e,n,o,i,s,l,r,f,u,p,_,d,b;const m=t[4].heading,c=we(m,t,t[3],Ze);let a=t[1]&&xe(t);return{c(){e=$("div"),n=$("button"),c&&c.c(),o=O(),i=$("div"),s=Oe("svg"),l=Oe("path"),p=O(),a&&a.c(),g(l,"d","M15 18l-6-6 6-6"),g(s,"class",r=Ve(t[1]?"rotated":"")+" svelte-klc9jx"),g(s,"xmlns","http://www.w3.org/2000/svg"),g(s,"width","24"),g(s,"height","24"),g(s,"viewBox","0 0 24 24"),g(s,"fill","none"),g(s,"stroke","currentColor"),g(s,"stroke-width","2"),g(s,"stroke-linecap","round"),g(s,"stroke-linejoin","round"),g(i,"class","arrow-container svelte-klc9jx"),g(n,"class","heading svelte-klc9jx"),g(n,"title",f=t[1]?"Collapse section":"Expand section"),g(n,"aria-expanded",t[1]),g(n,"aria-controls",u=`${t[0]}-body`),g(e,"class","section svelte-klc9jx")},m(h,S){w(h,e,S),k(e,n),c&&c.m(n,null),k(n,o),k(n,i),k(i,s),k(s,l),k(e,p),a&&a.m(e,null),_=!0,d||(b=U(n,"click",t[2]),d=!0)},p(h,[S]){c&&c.p&&(!_||S&8)&&ke(c,m,h,h[3],_?ye(m,h[3],S,Xt):$e(h[3]),Ze),(!_||S&2&&r!==(r=Ve(h[1]?"rotated":"")+" svelte-klc9jx"))&&g(s,"class",r),(!_||S&2&&f!==(f=h[1]?"Collapse section":"Expand section"))&&g(n,"title",f),(!_||S&2)&&g(n,"aria-expanded",h[1]),(!_||S&1&&u!==(u=`${h[0]}-body`))&&g(n,"aria-controls",u),h[1]?a?(a.p(h,S),S&2&&T(a,1)):(a=xe(h),a.c(),T(a,1),a.m(e,null)):a&&(Ie(),E(a,1,1,()=>{a=null}),Te())},i(h){_||(T(c,h),T(a),_=!0)},o(h){E(c,h),E(a),_=!1},d(h){h&&v(e),c&&c.d(h),a&&a.d(),d=!1,b()}}}function Zt(t,e,n){let{$$slots:o={},$$scope:i}=e,{name:s}=e;const l=`${s}-expanded`;let r;localStorage.getItem(l)?r=localStorage.getItem(l)==String(!0):r=!0;const f=()=>{n(1,r=!r),s&&localStorage.setItem(l,String(r))};return t.$$set=u=>{"name"in u&&n(0,s=u.name),"$$scope"in u&&n(3,i=u.$$scope)},[s,r,f,i,o]}class ge extends x{constructor(e){super(),Z(this,e,Zt,Yt,Q,{name:0})}}function xt(t){let e;return{c(){e=$("p"),e.textContent="Disconnected",g(e,"class","error")},m(n,o){w(n,e,o)},p:M,d(n){n&&v(e)}}}function en(t){let e,n,o=t[2].cameraIP+"",i;return{c(){e=$("p"),n=N("Connected to "),i=N(o),g(e,"class","success")},m(s,l){w(s,e,l),k(e,n),k(e,i)},p(s,l){l&4&&o!==(o=s[2].cameraIP+"")&&V(i,o)},d(s){s&&v(e)}}}function tn(t){let e;return{c(){e=$("p"),e.textContent="Connecting..."},m(n,o){w(n,e,o)},p:M,d(n){n&&v(e)}}}function nn(t){let e,n,o,i,s,l,r,f,u,p;function _(m,c){return m[1]?tn:m[2].cameraConnected?en:xt}let d=_(t),b=d(t);return{c(){e=$("label"),n=$("span"),n.textContent="IP address:",o=O(),i=$("input"),s=O(),l=$("button"),l.textContent="Connect",r=O(),b.c(),f=se(),g(i,"placeholder","Camera IP address"),g(l,"class","inverse")},m(m,c){w(m,e,c),k(e,n),k(e,o),k(e,i),X(i,t[0]),w(m,s,c),w(m,l,c),w(m,r,c),b.m(m,c),w(m,f,c),u||(p=[U(i,"input",t[4]),U(l,"click",t[3])],u=!0)},p(m,c){c&1&&i.value!==m[0]&&X(i,m[0]),d===(d=_(m))&&b?b.p(m,c):(b.d(1),b=d(m),b&&(b.c(),b.m(f.parentNode,f)))},d(m){m&&(v(e),v(s),v(l),v(r),v(f)),b.d(m),u=!1,Y(p)}}}function on(t){let e;return{c(){e=$("h2"),e.textContent="Connect camera",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:M,d(n){n&&v(e)}}}function sn(t){let e,n;return e=new ge({props:{name:"connect-camera",$$slots:{heading:[on],default:[nn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,[i]){const s={};i&135&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function ln(t,e,n){let o,i,s;q(t,K,p=>n(5,o=p)),q(t,Se,p=>n(6,i=p)),q(t,ne,p=>n(2,s=p));let l,r;ne.subscribe(p=>n(0,l=p.cameraIP||l)),K.subscribe(p=>n(1,r=p&&r));const f=()=>{i.send(JSON.stringify({command:"connect",cameraIP:l})),n(1,r=H(K,o=!0,o))};function u(){l=this.value,n(0,l)}return[l,r,s,f,u]}class rn extends x{constructor(e){super(),Z(this,e,ln,sn,Q,{})}}function un(t){let e,n,o;return{c(){e=$("button"),e.textContent="Disconnect",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=U(e,"click",t[5]),n=!0)},p:M,d(i){i&&v(e),n=!1,o()}}}function fn(t){let e,n,o;return{c(){e=$("button"),e.textContent="Connect",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=U(e,"click",t[4]),n=!0)},p:M,d(i){i&&v(e),n=!1,o()}}}function cn(t){let e;return{c(){e=$("p"),e.textContent="Disconnected",g(e,"class","error")},m(n,o){w(n,e,o)},p:M,d(n){n&&v(e)}}}function an(t){let e,n,o;return{c(){e=$("p"),n=N("Connected to "),o=N(t[3]),g(e,"class","success")},m(i,s){w(i,e,s),k(e,n),k(e,o)},p(i,s){s&8&&V(o,i[3])},d(i){i&&v(e)}}}function dn(t){let e;return{c(){e=$("p"),e.textContent="Connecting..."},m(n,o){w(n,e,o)},p:M,d(n){n&&v(e)}}}function pn(t){let e,n,o,i,s,l,r,f,u;function p(a,h){return!a[2]||a[0]!=a[3]?fn:un}let _=p(t),d=_(t);function b(a,h){return a[1]?dn:a[2]?an:cn}let m=b(t),c=m(t);return{c(){e=$("label"),n=$("span"),n.textContent="IP address:",o=O(),i=$("input"),s=O(),d.c(),l=O(),c.c(),r=se(),g(i,"placeholder","ESP8266 IP address")},m(a,h){w(a,e,h),k(e,n),k(e,o),k(e,i),X(i,t[0]),w(a,s,h),d.m(a,h),w(a,l,h),c.m(a,h),w(a,r,h),f||(u=U(i,"input",t[6]),f=!0)},p(a,h){h&1&&i.value!==a[0]&&X(i,a[0]),_===(_=p(a))&&d?d.p(a,h):(d.d(1),d=_(a),d&&(d.c(),d.m(l.parentNode,l))),m===(m=b(a))&&c?c.p(a,h):(c.d(1),c=m(a),c&&(c.c(),c.m(r.parentNode,r)))},d(a){a&&(v(e),v(s),v(l),v(r)),d.d(a),c.d(a),f=!1,u()}}}function _n(t){let e;return{c(){e=$("h2"),e.textContent="Connect to ESP8266",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:M,d(n){n&&v(e)}}}function mn(t){let e,n;return e=new ge({props:{name:"connect-esp",$$slots:{heading:[_n],default:[pn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,[i]){const s={};i&4111&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function hn(t,e,n){let o,i,s,l,r,f;q(t,Se,c=>n(8,o=c)),q(t,Ne,c=>n(2,i=c)),q(t,K,c=>n(9,s=c)),q(t,ne,c=>n(10,l=c)),q(t,de,c=>n(11,r=c)),q(t,Qe,c=>n(3,f=c));let u=f,p,_=0;const d=()=>{H(Qe,f=u,f),o==null||o.close(),H(Se,o=new WebSocket(`ws://${f}:81`),o),o.addEventListener("message",c=>{_++,H(ne,l=JSON.parse(c.data),l),_==1&&H(de,r=l.actions,r),H(K,s=!1,s)}),o.addEventListener("open",c=>{H(Ne,i=!0,i),n(1,p=!1)}),o.addEventListener("close",c=>{H(Ne,i=!1,i),n(1,p=!1)}),n(1,p=!0)},b=()=>{o==null||o.close()};d();function m(){u=this.value,n(0,u)}return[u,p,i,f,d,b,m]}class gn extends x{constructor(e){super(),Z(this,e,hn,mn,Q,{})}}const Le={"Trigger shutter":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/control/shutterbutton",httpMethod:"POST",body:{af:!1},fields:{}},"Control shutter":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/control/shutterbutton/manual",httpMethod:"POST",body:{action:"full_press",af:!1},fields:{Action:{key:"action",options:["full_press","release"]}}},"Set ISO":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/settings/iso",httpMethod:"PUT",body:{value:"400"},fields:{ISO:{key:"value",options:["auto","100","125","160","200","250","320","400","500","640","800","1000","1250","1600","2000","2500","3200","4000","5000","6400","8000","10000","12800","16000","20000","25600"]}}},"Set aperture":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/settings/av",httpMethod:"PUT",body:{value:"f8.0"},fields:{Aperture:{key:"value",options:["f3.5","f4.0","f4.5","f5.0","f5.6","f6.3","f7.1","f8.0","f9.0","f10","f11","f13","f14","f16","f18","f20","f22"]}}},"Set shutter speed":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/settings/tv",httpMethod:"PUT",body:{value:"1/125"},fields:{"Shutter speed":{key:"value",options:["1/4000","1/3200","1/2500","1/2000","1/1600","1/1250","1/1000","1/800","1/640","1/500","1/400","1/320","1/250","1/200","1/160","1/125","1/100","1/80","1/60","1/50","1/40","1/30","1/25","1/20","1/15","1/13","1/10","1/8","1/6","1/5","1/4",'0"3','0"4','0"5','0"6','0"8','1"','1"3','1"6','2"','2"5','3"2','4"','5"','6"','8"','10"','13"','15"','20"','25"','30"',"bulb"]}}},"Set exposure compensation":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/settings/exposure",httpMethod:"PUT",body:{value:"+0.0"},fields:{EV:{key:"value",options:["-3.0","-2_2/3","-2_1/3","-2.0","-1_2/3","-1_1/3","-1.0","-0_2/3","-0_1/3","+0.0","+0_1/3","+0_2/3","+1.0","+1_1/3","+1_2/3","+2.0","+2_1/3","+2_2/3","+3.0"]}}},"Set shooting mode":{actionType:"CCAPI",endpointUrl:"/ver100/shooting/settings/shootingmode",httpMethod:"PUT",body:{value:"m"},fields:{Mode:{key:"value",options:["m","av","tv","p","auto"]}}},"Canon IR Trigger":{actionType:"IR_TRIGGER",body:{},fields:{}}};function bn(t){let e,n,o;return{c(){e=$("button"),e.textContent="Start",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=U(e,"click",t[5]),n=!0)},p:M,d(i){i&&v(e),n=!1,o()}}}function vn(t){let e,n,o;return{c(){e=$("button"),e.textContent="Stop",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=U(e,"click",t[6]),n=!0)},p:M,d(i){i&&v(e),n=!1,o()}}}function wn(t){let e,n,o;return{c(){e=$("button"),e.textContent="Stop immediately",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=U(e,"click",t[6]),n=!0)},p:M,d(i){i&&v(e),n=!1,o()}}}function yn(t){let e;return{c(){e=$("p"),e.textContent="Intervalometer stopped."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function kn(t){let e;return{c(){e=$("p"),e.textContent="Intervalometer running..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function $n(t){let e;return{c(){e=$("p"),e.textContent="Intervalometer stopping after last action..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Cn(t){let e;return{c(){e=$("p"),e.textContent="Loading..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Sn(t){let e,n,o,i,s,l,r,f,u,p,_,d,b,m,c,a,h,S;function R(y,C){return y[4].isStopping?wn:y[4].isRunning?vn:bn}let j=R(t),A=j(t);function B(y,C){return y[1]?Cn:y[4].isStopping?$n:y[4].isRunning?kn:yn}let I=B(t),P=I(t);return{c(){e=$("label"),n=N(`Interval:\r
    `),o=$("input"),i=N(`\r
    seconds`),s=O(),l=$("label"),r=N(`Duration:\r
    `),f=$("input"),u=N(`\r
    seconds`),p=O(),_=$("label"),d=N(`Repetitions:\r
    `),b=$("input"),m=O(),A.c(),c=O(),P.c(),a=se(),g(o,"type","number"),g(o,"step","any"),g(o,"min","1"),g(o,"placeholder","Interval in seconds"),g(f,"type","number"),g(f,"step","any"),g(f,"min","0"),g(f,"placeholder","Duration in seconds"),g(b,"type","number"),g(b,"step","any"),g(b,"min","0"),g(b,"placeholder","Number of repetitions")},m(y,C){w(y,e,C),k(e,n),k(e,o),X(o,t[0]),k(e,i),w(y,s,C),w(y,l,C),k(l,r),k(l,f),X(f,t[2]),k(l,u),w(y,p,C),w(y,_,C),k(_,d),k(_,b),X(b,t[3]),w(y,m,C),A.m(y,C),w(y,c,C),P.m(y,C),w(y,a,C),h||(S=[U(o,"input",t[7]),U(f,"input",t[8]),U(b,"input",t[9])],h=!0)},p(y,C){C&1&&oe(o.value)!==y[0]&&X(o,y[0]),C&4&&oe(f.value)!==y[2]&&X(f,y[2]),C&8&&oe(b.value)!==y[3]&&X(b,y[3]),j===(j=R(y))&&A?A.p(y,C):(A.d(1),A=j(y),A&&(A.c(),A.m(c.parentNode,c))),I!==(I=B(y))&&(P.d(1),P=I(y),P&&(P.c(),P.m(a.parentNode,a)))},d(y){y&&(v(e),v(s),v(l),v(p),v(_),v(m),v(c),v(a)),A.d(y),P.d(y),h=!1,Y(S)}}}function In(t){let e;return{c(){e=$("h2"),e.textContent="Intervalometer",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:M,d(n){n&&v(e)}}}function Tn(t){let e,n;return e=new ge({props:{name:"intervalometer",$$slots:{heading:[In],default:[Sn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,[i]){const s={};i&8223&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function Pn(t,e,n){let o,i,s,l;q(t,K,a=>n(10,o=a)),q(t,Se,a=>n(11,i=a)),q(t,de,a=>n(12,s=a)),q(t,ne,a=>n(4,l=a));let r,f,u,p;ne.subscribe(a=>{n(0,r=a.intervalSec||r),n(2,u=a.duration||u),n(3,p=a.repetitions||p)}),K.subscribe(a=>n(1,f=a&&f));const _=()=>{const a=[];for(const h of s){const S=Le[h.action],R=JSON.parse(JSON.stringify(S.body));for(const j in h.fields)R[S.fields[j].key]=h.fields[j];S.actionType==="CCAPI"?a.push({name:h.action,actionType:S.actionType,time:h.time,timeMode:h.timeMode,endpointUrl:S.endpointUrl,httpMethod:S.httpMethod,body:JSON.stringify(R)}):a.push({name:h.action,actionType:S.actionType,time:h.time,timeMode:h.timeMode,body:JSON.stringify(R)})}i.send(JSON.stringify({command:"start",intervalSec:r,duration:u,repetitions:p,sequence:a,actions:s})),n(1,f=H(K,o=!0,o))},d=()=>{i.send(JSON.stringify({command:"stop"})),n(1,f=H(K,o=!0,o))};function b(){r=oe(this.value),n(0,r)}function m(){u=oe(this.value),n(2,u)}function c(){p=oe(this.value),n(3,p)}return[r,f,u,p,l,_,d,b,m,c]}class Nn extends x{constructor(e){super(),Z(this,e,Pn,Tn,Q,{})}}function On(t,e={enabled:!0}){let{enabled:n,eventType:o,nodeForEvent:i,options:s,capture:l}=et(e);function r(f){f.target&&t&&!t.contains(f.target)&&!f.defaultPrevented&&t.dispatchEvent(new CustomEvent("clickoutside",{detail:f}))}return e.enabled!==!1&&i.addEventListener(o,r,s),{update(f){i.removeEventListener(o,r,l),{enabled:n,eventType:o,nodeForEvent:i,options:s,capture:l}=et(f),n&&i.addEventListener(o,r,s)},destroy(){i.removeEventListener(o,r,l)}}}function et(t={}){var e,n;return{enabled:t.enabled??!0,nodeForEvent:((e=t.limit)==null?void 0:e.parent)??document,eventType:t.event??"click",options:t.options,capture:typeof t.options=="object"?(n=t.options)==null?void 0:n.capture:t.options}}const En=t=>({}),tt=t=>({toggleDropdown:t[4]}),Mn=t=>({}),nt=t=>({toggleDropdown:t[4]});function ot(t){let e,n,o,i;const s=t[7].buttons,l=we(s,t,t[6],tt);return{c(){e=$("div"),n=$("div"),l&&l.c(),g(n,"class","options-menu svelte-azbhie"),ee(n,"width",t[2]?"100%":void 0),ee(n,"background-color",t[3]?"var(--gray-85)":"var(--gray-90)"),g(e,"class","menu-container svelte-azbhie"),ee(e,"top",t[1]==="top"?"0.5rem":"100%"),ee(e,"width",t[2]?"100%":void 0)},m(r,f){w(r,e,f),k(e,n),l&&l.m(n,null),i=!0},p(r,f){l&&l.p&&(!i||f&64)&&ke(l,s,r,r[6],i?ye(s,r[6],f,En):$e(r[6]),tt),f&4&&ee(n,"width",r[2]?"100%":void 0),f&8&&ee(n,"background-color",r[3]?"var(--gray-85)":"var(--gray-90)"),f&2&&ee(e,"top",r[1]==="top"?"0.5rem":"100%"),f&4&&ee(e,"width",r[2]?"100%":void 0)},i(r){i||(T(l,r),r&&pe(()=>{i&&(o||(o=Ae(e,Xe,{duration:100},!0)),o.run(1))}),i=!0)},o(r){E(l,r),r&&(o||(o=Ae(e,Xe,{duration:100},!1)),o.run(0)),i=!1},d(r){r&&v(e),l&&l.d(r),r&&o&&o.end()}}}function An(t){let e,n,o,i,s,l;const r=t[7].button,f=we(r,t,t[6],nt);let u=t[0]&&ot(t);const p=t[7].default,_=we(p,t,t[6],null);return{c(){e=$("div"),f&&f.c(),n=O(),u&&u.c(),o=O(),_&&_.c(),g(e,"class","options-container svelte-azbhie"),ee(e,"flex",t[2]?"1":void 0)},m(d,b){w(d,e,b),f&&f.m(e,null),k(e,n),u&&u.m(e,null),k(e,o),_&&_.m(e,null),i=!0,s||(l=[Pt(On.call(null,e)),U(e,"clickoutside",t[8])],s=!0)},p(d,[b]){f&&f.p&&(!i||b&64)&&ke(f,r,d,d[6],i?ye(r,d[6],b,Mn):$e(d[6]),nt),d[0]?u?(u.p(d,b),b&1&&T(u,1)):(u=ot(d),u.c(),T(u,1),u.m(e,o)):u&&(Ie(),E(u,1,1,()=>{u=null}),Te()),_&&_.p&&(!i||b&64)&&ke(_,p,d,d[6],i?ye(p,d[6],b,null):$e(d[6]),null),b&4&&ee(e,"flex",d[2]?"1":void 0)},i(d){i||(T(f,d),T(u),T(_,d),i=!0)},o(d){E(f,d),E(u),E(_,d),i=!1},d(d){d&&v(e),f&&f.d(d),u&&u.d(),_&&_.d(d),s=!1,Y(l)}}}function Ln(t,e,n){let{$$slots:o={},$$scope:i}=e,{closeCondition:s=!1}=e,{align:l="bottom"}=e,{showOptions:r=!1}=e,{fullWidth:f=!1}=e,{lighter:u=!1}=e;const p=()=>n(0,r=!r),_=()=>n(0,r=!1);return t.$$set=d=>{"closeCondition"in d&&n(5,s=d.closeCondition),"align"in d&&n(1,l=d.align),"showOptions"in d&&n(0,r=d.showOptions),"fullWidth"in d&&n(2,f=d.fullWidth),"lighter"in d&&n(3,u=d.lighter),"$$scope"in d&&n(6,i=d.$$scope)},t.$$.update=()=>{t.$$.dirty&33&&n(0,r=!s&&r)},[r,l,f,u,p,s,i,o,_]}class Un extends x{constructor(e){super(),Z(this,e,Ln,An,Q,{closeCondition:5,align:1,showOptions:0,fullWidth:2,lighter:3})}}function it(t,e,n){const o=t.slice();return o[7]=e[n],o}function jn(t){let e,n,o,i,s,l,r;return{c(){e=$("button"),n=N(t[0]),o=O(),i=Oe("svg"),s=Oe("path"),g(s,"d","M6 9l6 6 6-6"),g(i,"xmlns","http://www.w3.org/2000/svg"),g(i,"width","1.3em"),g(i,"height","1.3em"),g(i,"viewBox","0 0 24 24"),g(i,"fill","none"),g(i,"stroke","currentColor"),g(i,"stroke-width","2"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(e,"slot","button"),g(e,"title",t[2]),g(e,"class","select-dropdown-button svelte-1w71hwl"),e.disabled=t[3]},m(f,u){w(f,e,u),k(e,n),k(e,o),k(e,i),k(i,s),l||(r=U(e,"click",function(){me(t[6])&&t[6].apply(this,arguments)}),l=!0)},p(f,u){t=f,u&1&&V(n,t[0]),u&4&&g(e,"title",t[2]),u&8&&(e.disabled=t[3])},d(f){f&&v(e),l=!1,r()}}}function st(t){let e,n=t[7]+"",o,i,s;function l(){return t[5](t[7],t[6])}return{c(){e=$("button"),o=N(n)},m(r,f){w(r,e,f),k(e,o),i||(s=U(e,"click",l),i=!0)},p(r,f){t=r,f&16&&n!==(n=t[7]+"")&&V(o,n)},d(r){r&&v(e),i=!1,s()}}}function lt(t){let e,n=t[0]!==t[7]&&st(t);return{c(){n&&n.c(),e=se()},m(o,i){n&&n.m(o,i),w(o,e,i)},p(o,i){o[0]!==o[7]?n?n.p(o,i):(n=st(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(o){o&&v(e),n&&n.d(o)}}}function Dn(t){let e,n=_e(t[4]),o=[];for(let i=0;i<n.length;i+=1)o[i]=lt(it(t,n,i));return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=se()},m(i,s){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,s);w(i,e,s)},p(i,s){if(s&81){n=_e(i[4]);let l;for(l=0;l<n.length;l+=1){const r=it(i,n,l);o[l]?o[l].p(r,s):(o[l]=lt(r),o[l].c(),o[l].m(e.parentNode,e))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(i){i&&v(e),wt(o,i)}}}function Rn(t){let e,n,o,i,s;return i=new Un({props:{fullWidth:!0,lighter:!0,$$slots:{buttons:[Dn,({toggleDropdown:l})=>({6:l}),({toggleDropdown:l})=>l?64:0],button:[jn,({toggleDropdown:l})=>({6:l}),({toggleDropdown:l})=>l?64:0]},$$scope:{ctx:t}}}),{c(){e=$("div"),n=N(t[1]),o=N(`:\r
  `),J(i.$$.fragment),g(e,"class","select-dropdown svelte-1w71hwl")},m(l,r){w(l,e,r),k(e,n),k(e,o),F(i,e,null),s=!0},p(l,[r]){(!s||r&2)&&V(n,l[1]);const f={};r&1117&&(f.$$scope={dirty:r,ctx:l}),i.$set(f)},i(l){s||(T(i.$$.fragment,l),s=!0)},o(l){E(i.$$.fragment,l),s=!1},d(l){l&&v(e),z(i)}}}function qn(t,e,n){let{label:o}=e,{buttonTitle:i}=e,{disabled:s=!1}=e,{value:l}=e,{options:r}=e;const f=(u,p)=>{n(0,l=u),p()};return t.$$set=u=>{"label"in u&&n(1,o=u.label),"buttonTitle"in u&&n(2,i=u.buttonTitle),"disabled"in u&&n(3,s=u.disabled),"value"in u&&n(0,l=u.value),"options"in u&&n(4,r=u.options)},[l,o,i,s,r,f]}class Be extends x{constructor(e){super(),Z(this,e,qn,Rn,Q,{label:1,buttonTitle:2,disabled:3,value:0,options:4})}}function rt(t,e,n){const o=t.slice();return o[7]=e[n],o[8]=e,o[9]=n,o}function ut(t){let e,n,o,i,s;function l(f){t[6](f,t[7])}let r={label:t[7],buttonTitle:"Choose value for"+t[7],options:t[3].fields[t[7]].options};return t[0].fields[t[7]]!==void 0&&(r.value=t[0].fields[t[7]]),n=new Be({props:r}),Ce.push(()=>We(n,"value",l)),{c(){e=$("div"),J(n.$$.fragment),i=O()},m(f,u){w(f,e,u),F(n,e,null),k(e,i),s=!0},p(f,u){t=f;const p={};u&1&&(p.label=t[7]),u&1&&(p.buttonTitle="Choose value for"+t[7]),u&1&&(p.options=t[3].fields[t[7]].options),!o&&u&1&&(o=!0,p.value=t[0].fields[t[7]],Je(()=>o=!1)),n.$set(p)},i(f){s||(T(n.$$.fragment,f),s=!0)},o(f){E(n.$$.fragment,f),s=!1},d(f){f&&v(e),z(n)}}}function Fn(t){let e,n,o,i=t[1]+1+"",s,l,r=t[0].action+"",f,u,p,_,d,b,m,c,a,h,S,R,j,A,B,I;function P(L){t[5](L)}let y={label:"Offset",buttonTitle:"Choose time offset mode",options:["from start","after previous"]};t[0].timeMode!==void 0&&(y.value=t[0].timeMode),S=new Be({props:y}),Ce.push(()=>We(S,"value",P));let C=_e(Object.keys(t[0].fields)),D=[];for(let L=0;L<C.length;L+=1)D[L]=ut(rt(t,C,L));const kt=L=>E(D[L],1,1,()=>{D[L]=null});return{c(){e=$("div"),n=$("div"),o=$("h3"),s=N(i),l=N(". "),f=N(r),u=O(),p=$("button"),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',_=O(),d=$("label"),b=N(`Time:\r
    `),m=$("input"),c=N(`\r
    seconds`),a=O(),h=$("div"),J(S.$$.fragment),j=O();for(let L=0;L<D.length;L+=1)D[L].c();g(p,"class","delete-container svelte-z1q96p"),g(n,"class","heading svelte-z1q96p"),g(m,"type","number"),g(m,"step","any"),g(m,"min","0"),g(m,"placeholder","Time offset in seconds"),g(d,"class","svelte-z1q96p"),g(e,"class","container svelte-z1q96p")},m(L,W){w(L,e,W),k(e,n),k(n,o),k(o,s),k(o,l),k(o,f),k(n,u),k(n,p),k(e,_),k(e,d),k(d,b),k(d,m),X(m,t[0].time),k(d,c),k(e,a),k(e,h),F(S,h,null),k(e,j);for(let ie=0;ie<D.length;ie+=1)D[ie]&&D[ie].m(e,null);A=!0,B||(I=[U(p,"click",function(){me(t[2])&&t[2].apply(this,arguments)}),U(m,"input",t[4])],B=!0)},p(L,[W]){t=L,(!A||W&2)&&i!==(i=t[1]+1+"")&&V(s,i),(!A||W&1)&&r!==(r=t[0].action+"")&&V(f,r),W&1&&oe(m.value)!==t[0].time&&X(m,t[0].time);const ie={};if(!R&&W&1&&(R=!0,ie.value=t[0].timeMode,Je(()=>R=!1)),S.$set(ie),W&9){C=_e(Object.keys(t[0].fields));let G;for(G=0;G<C.length;G+=1){const Ge=rt(t,C,G);D[G]?(D[G].p(Ge,W),T(D[G],1)):(D[G]=ut(Ge),D[G].c(),T(D[G],1),D[G].m(e,null))}for(Ie(),G=C.length;G<D.length;G+=1)kt(G);Te()}},i(L){if(!A){T(S.$$.fragment,L);for(let W=0;W<C.length;W+=1)T(D[W]);A=!0}},o(L){E(S.$$.fragment,L),D=D.filter(Boolean);for(let W=0;W<D.length;W+=1)E(D[W]);A=!1},d(L){L&&v(e),z(S),wt(D,L),B=!1,Y(I)}}}function zn(t,e,n){let{action:o}=e,{index:i}=e,{deleteAction:s}=e;const l=Le[o.action];function r(){o.time=oe(this.value),n(0,o)}function f(p){t.$$.not_equal(o.timeMode,p)&&(o.timeMode=p,n(0,o))}function u(p,_){t.$$.not_equal(o.fields[_],p)&&(o.fields[_]=p,n(0,o))}return t.$$set=p=>{"action"in p&&n(0,o=p.action),"index"in p&&n(1,i=p.index),"deleteAction"in p&&n(2,s=p.deleteAction)},[o,i,s,l,r,f,u]}class Jn extends x{constructor(e){super(),Z(this,e,zn,Fn,Q,{action:0,index:1,deleteAction:2})}}function ft(t,e,n){const o=t.slice();return o[5]=e[n],o[7]=n,o}function ct(t,e){let n,o,i;function s(){return e[3](e[5])}return o=new Jn({props:{action:e[5],index:e[7],deleteAction:s}}),{key:t,first:null,c(){n=se(),J(o.$$.fragment),this.first=n},m(l,r){w(l,n,r),F(o,l,r),i=!0},p(l,r){e=l;const f={};r&2&&(f.action=e[5]),r&2&&(f.index=e[7]),r&2&&(f.deleteAction=s),o.$set(f)},i(l){i||(T(o.$$.fragment,l),i=!0)},o(l){E(o.$$.fragment,l),i=!1},d(l){l&&v(n),z(o,l)}}}function Wn(t){let e=[],n=new Map,o,i,s,l,r,f,u,p,_=_e(t[1]);const d=c=>c[5];for(let c=0;c<_.length;c+=1){let a=ft(t,_,c),h=d(a);n.set(h,e[c]=ct(h,a))}function b(c){t[4](c)}let m={label:"New action",buttonTitle:"Choose new action type",options:Object.keys(Le)};return t[0]!==void 0&&(m.value=t[0]),i=new Be({props:m}),Ce.push(()=>We(i,"value",b)),{c(){for(let c=0;c<e.length;c+=1)e[c].c();o=O(),J(i.$$.fragment),l=O(),r=$("button"),r.textContent="Add action",g(r,"class","inverse")},m(c,a){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(c,a);w(c,o,a),F(i,c,a),w(c,l,a),w(c,r,a),f=!0,u||(p=U(r,"click",t[2]),u=!0)},p(c,a){a&2&&(_=_e(c[1]),Ie(),e=Ht(e,a,d,1,c,_,n,o.parentNode,Gt,ct,o,ft),Te());const h={};!s&&a&1&&(s=!0,h.value=c[0],Je(()=>s=!1)),i.$set(h)},i(c){if(!f){for(let a=0;a<_.length;a+=1)T(e[a]);T(i.$$.fragment,c),f=!0}},o(c){for(let a=0;a<e.length;a+=1)E(e[a]);E(i.$$.fragment,c),f=!1},d(c){c&&(v(o),v(l),v(r));for(let a=0;a<e.length;a+=1)e[a].d(c);z(i,c),u=!1,p()}}}function Bn(t){let e;return{c(){e=$("h2"),e.textContent="Sequence",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:M,d(n){n&&v(e)}}}function Gn(t){let e,n;return e=new ge({props:{name:"sequence",$$slots:{heading:[Bn],default:[Wn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,[i]){const s={};i&259&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function Hn(t,e,n){let o;q(t,de,f=>n(1,o=f));let i="Trigger shutter";const s=()=>{const f=Le[i];o.push({action:i,fields:Object.fromEntries(Object.entries(f.fields).map(([u,p])=>[u,f.body[p.key]])),time:0,timeMode:"after previous"}),de.set(o)},l=f=>{H(de,o=o.filter(u=>u!==f),o)};function r(f){i=f,n(0,i)}return[i,o,s,l,r]}class Vn extends x{constructor(e){super(),Z(this,e,Hn,Gn,Q,{})}}function Kn(t){let e,n,o;return{c(){e=$("button"),e.textContent="Press shutter",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=U(e,"click",t[3]),n=!0)},p:M,d(i){i&&v(e),n=!1,o()}}}function Qn(t){let e,n,o;return{c(){e=$("button"),e.textContent="Release shutter",g(e,"class","inverse")},m(i,s){w(i,e,s),n||(o=U(e,"click",t[4]),n=!0)},p:M,d(i){i&&v(e),n=!1,o()}}}function Xn(t){let e;return{c(){e=$("p"),e.textContent="Shutter is not pressed."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Yn(t){let e;return{c(){e=$("p"),e.textContent="Shutter is pressed..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function Zn(t){let e;return{c(){e=$("p"),e.textContent="Loading..."},m(n,o){w(n,e,o)},d(n){n&&v(e)}}}function xn(t){let e,n,o,i,s,l,r,f;function u(c,a){return c[1].shutterIsPressed?Qn:Kn}let p=u(t),_=p(t);function d(c,a){return c[0]?Zn:c[1].shutterIsPressed?Yn:Xn}let b=d(t),m=b(t);return{c(){e=$("button"),e.textContent="Trigger shutter",n=O(),_.c(),o=O(),i=$("button"),i.textContent="Trigger IR release",s=O(),m.c(),l=se(),g(e,"class","inverse"),g(i,"class","inverse")},m(c,a){w(c,e,a),w(c,n,a),_.m(c,a),w(c,o,a),w(c,i,a),w(c,s,a),m.m(c,a),w(c,l,a),r||(f=[U(e,"click",t[2]),U(i,"click",t[5])],r=!0)},p(c,a){p===(p=u(c))&&_?_.p(c,a):(_.d(1),_=p(c),_&&(_.c(),_.m(o.parentNode,o))),b!==(b=d(c))&&(m.d(1),m=b(c),m&&(m.c(),m.m(l.parentNode,l)))},d(c){c&&(v(e),v(n),v(o),v(i),v(s),v(l)),_.d(c),m.d(c),r=!1,Y(f)}}}function eo(t){let e;return{c(){e=$("h2"),e.textContent="Shutter",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:M,d(n){n&&v(e)}}}function to(t){let e,n;return e=new ge({props:{name:"shutter",$$slots:{heading:[eo],default:[xn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,[i]){const s={};i&259&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function no(t,e,n){let o,i,s;q(t,K,_=>n(6,o=_)),q(t,Se,_=>n(7,i=_)),q(t,ne,_=>n(1,s=_));let l;return K.subscribe(_=>n(0,l=_&&l)),[l,s,()=>{i.send(JSON.stringify({command:"triggerShutter"})),n(0,l=H(K,o=!0,o))},()=>{i.send(JSON.stringify({command:"pressShutter"})),n(0,l=H(K,o=!0,o))},()=>{i.send(JSON.stringify({command:"releaseShutter"})),n(0,l=H(K,o=!0,o))},()=>{i.send(JSON.stringify({command:"triggerIR"})),n(0,l=H(K,o=!0,o))}]}class oo extends x{constructor(e){super(),Z(this,e,no,to,Q,{})}}function at(t){let e,n=t[2].repetitions+"",o;return{c(){e=N("/"),o=N(n)},m(i,s){w(i,e,s),w(i,o,s)},p(i,s){s&4&&n!==(n=i[2].repetitions+"")&&V(o,n)},d(i){i&&(v(e),v(o))}}}function dt(t){let e,n,o=t[1].toFixed(1)+"",i;return{c(){e=$("br"),n=N("Time until completion: "),i=N(o)},m(s,l){w(s,e,l),w(s,n,l),w(s,i,l)},p(s,l){l&2&&o!==(o=s[1].toFixed(1)+"")&&V(i,o)},d(s){s&&(v(e),v(n),v(i))}}}function io(t){let e,n,o=t[2].statusCode+"",i,s,l=t[2].statusMsg+"",r,f,u,p,_=t[2].numShots+"",d,b,m=(t[2].actionIndex==-1?1:t[2].actionIndex+1)+"",c,a,h=t[2].actions.length+"",S,R,j=t[0].toFixed(1)+"",A,B,I=t[2].repetitions>0&&at(t),P=t[1]>0&&dt(t);return{c(){e=$("p"),n=N("Status code: "),i=N(o),s=N(`\r
    Status message: `),r=N(l),f=O(),u=$("p"),p=N("Completed repetitions: "),d=N(_),I&&I.c(),b=N(`\r
    Next action index: `),c=N(m),a=N("/"),S=N(h),R=N(`\r
    Time until next action: `),A=N(j),B=O(),P&&P.c(),le(e,"success",t[2].statusCode==200),le(e,"warning",t[2].statusCode==0),le(e,"error",t[2].statusCode!=200&&t[2].statusCode!=0)},m(y,C){w(y,e,C),k(e,n),k(e,i),k(e,s),k(e,r),w(y,f,C),w(y,u,C),k(u,p),k(u,d),I&&I.m(u,null),k(u,b),k(u,c),k(u,a),k(u,S),k(u,R),k(u,A),k(u,B),P&&P.m(u,null)},p(y,C){C&4&&o!==(o=y[2].statusCode+"")&&V(i,o),C&4&&l!==(l=y[2].statusMsg+"")&&V(r,l),C&4&&le(e,"success",y[2].statusCode==200),C&4&&le(e,"warning",y[2].statusCode==0),C&4&&le(e,"error",y[2].statusCode!=200&&y[2].statusCode!=0),C&4&&_!==(_=y[2].numShots+"")&&V(d,_),y[2].repetitions>0?I?I.p(y,C):(I=at(y),I.c(),I.m(u,b)):I&&(I.d(1),I=null),C&4&&m!==(m=(y[2].actionIndex==-1?1:y[2].actionIndex+1)+"")&&V(c,m),C&4&&h!==(h=y[2].actions.length+"")&&V(S,h),C&1&&j!==(j=y[0].toFixed(1)+"")&&V(A,j),y[1]>0?P?P.p(y,C):(P=dt(y),P.c(),P.m(u,null)):P&&(P.d(1),P=null)},d(y){y&&(v(e),v(f),v(u)),I&&I.d(),P&&P.d()}}}function so(t){let e;return{c(){e=$("h2"),e.textContent="Status",g(e,"slot","heading")},m(n,o){w(n,e,o)},p:M,d(n){n&&v(e)}}}function lo(t){let e,n;return e=new ge({props:{name:"status",$$slots:{heading:[so],default:[io]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,[i]){const s={};i&39&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){z(e,o)}}}function ro(t,e,n){let o;q(t,ne,f=>n(2,o=f));let i=Date.now(),s=0,l=0,r;return ne.subscribe(f=>{i=Date.now(),clearInterval(r),f.isRunning?r=setInterval(()=>{n(0,s=(o.timeUntilNext-(Date.now()-i))/1e3),n(1,l=(o.timeUntilCompletion-(Date.now()-i))/1e3)},100):(n(0,s=0),n(1,l=0))}),[s,l,o]}class uo extends x{constructor(e){super(),Z(this,e,ro,lo,Q,{})}}function fo(t){let e,n,o;return{c(){e=$("button"),e.innerHTML='<img src="/icon.svg" alt="Crescent icon"/>',g(e,"title","Switch theme"),g(e,"class","svelte-1oalwmk")},m(i,s){w(i,e,s),n||(o=U(e,"click",t[0]),n=!0)},p:M,i:M,o:M,d(i){i&&v(e),n=!1,o()}}}function co(t,e,n){let{theme:o=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}=e;const i=()=>{const l=window.document.documentElement.classList;o=="dark"?l.add("dark"):l.remove("dark")},s=()=>{n(1,o=o=="light"?"dark":"light"),localStorage.setItem("theme",o),i()};return i(),t.$$set=l=>{"theme"in l&&n(1,o=l.theme)},[s,o]}class ao extends x{constructor(e){super(),Z(this,e,co,fo,Q,{theme:1})}}function pt(t){let e,n,o,i,s,l,r,f;return e=new rn({}),o=new Nn({}),s=new Vn({}),r=new oo({}),{c(){J(e.$$.fragment),n=O(),J(o.$$.fragment),i=O(),J(s.$$.fragment),l=O(),J(r.$$.fragment)},m(u,p){F(e,u,p),w(u,n,p),F(o,u,p),w(u,i,p),F(s,u,p),w(u,l,p),F(r,u,p),f=!0},i(u){f||(T(e.$$.fragment,u),T(o.$$.fragment,u),T(s.$$.fragment,u),T(r.$$.fragment,u),f=!0)},o(u){E(e.$$.fragment,u),E(o.$$.fragment,u),E(s.$$.fragment,u),E(r.$$.fragment,u),f=!1},d(u){u&&(v(n),v(i),v(l)),z(e,u),z(o,u),z(s,u),z(r,u)}}}function po(t){let e,n,o,i,s,l,r,f,u,p,_;s=new ao({}),r=new uo({}),u=new gn({});let d=t[0]&&pt();return{c(){e=$("main"),n=$("div"),o=$("h1"),o.textContent="ESP8266 Intervalometer",i=O(),J(s.$$.fragment),l=O(),J(r.$$.fragment),f=O(),J(u.$$.fragment),p=O(),d&&d.c(),g(n,"class","svelte-p108mq"),g(e,"class","svelte-p108mq")},m(b,m){w(b,e,m),k(e,n),k(n,o),k(n,i),F(s,n,null),k(e,l),F(r,e,null),k(e,f),F(u,e,null),k(e,p),d&&d.m(e,null),_=!0},p(b,[m]){b[0]?d?m&1&&T(d,1):(d=pt(),d.c(),T(d,1),d.m(e,null)):d&&(Ie(),E(d,1,1,()=>{d=null}),Te())},i(b){_||(T(s.$$.fragment,b),T(r.$$.fragment,b),T(u.$$.fragment,b),T(d),_=!0)},o(b){E(s.$$.fragment,b),E(r.$$.fragment,b),E(u.$$.fragment,b),E(d),_=!1},d(b){b&&v(e),z(s),z(r),z(u),d&&d.d()}}}function _o(t,e,n){let o;return q(t,Ne,i=>n(0,o=i)),[o]}class mo extends x{constructor(e){super(),Z(this,e,_o,po,Q,{})}}new mo({target:document.getElementById("app")});</script>
    <style>:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;font-size:16px;box-sizing:border-box;color:var(--gray-5);background-color:var(--gray-95);transition:background-color .2s,color .2s}*,*:before,*:after{box-sizing:inherit}body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:400}ol,ul{list-style:none}img{max-width:100%;height:auto}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex}:root{--black: #121212;--white: #f0f0f0;--dark: #4c4c4c;--light: #acacac;--darker: #2d2d2d;--darkest: #1e1e1e;--lighter: #d1d1d1;--lightest: #e0e0e0;--medium: #888888;--light-red: #ff8484;--dark-red: #b70000;--light-green: #87ff85;--dark-green: #028100;--light-yellow: #fffd85;--dark-yellow: #768500}:root:not(.dark){--gray-5: var(--black);--gray-10: var(--darkest);--gray-15: var(--darker);--gray-35: var(--dark);--gray-50: var(--medium);--gray-65: var(--light);--gray-85: var(--lighter);--gray-90: var(--lightest);--gray-95: var(--white);--green-5: var(--dark-green);--green-95: var(--light-green);--red-5: var(--dark-red);--red-95: var(--light-red);--yellow-5: var(--dark-yellow);--yellow-95: var(--light-yellow)}:root.dark{--gray-5: var(--white);--gray-10: var(--lightest);--gray-15: var(--lighter);--gray-35: var(--light);--gray-50: var(--medium);--gray-65: var(--dark);--gray-85: var(--darker);--gray-90: var(--darkest);--gray-95: var(--black);--green-5: var(--light-green);--green-95: var(--dark-green);--red-5: var(--light-red);--red-95: var(--dark-red);--yellow-5: var(--light-yellow);--yellow-95: var(--dark-yellow)}#app{width:100%;max-width:480px;margin:0 auto;padding:2rem}button{border-radius:.5rem;border:1px solid transparent;padding:.6em 1.2rem;font-size:1rem;font-weight:500;font-family:inherit;color:var(--gray-5);background-color:transparent;cursor:pointer;transition:background-color .2s,color .2s}button:hover:not(:disabled){background-color:var(--gray-65)}button:disabled{color:var(--gray-50);cursor:not-allowed}button.inverse{color:var(--gray-95);background-color:var(--gray-5)}button.inverse:hover:not(:disabled){background-color:var(--gray-35)}button.inverse:disabled{background-color:var(--gray-50);cursor:not-allowed}label{display:flex;align-items:center;gap:16px;background-color:var(--gray-90);padding:10px 16px;border-radius:8px;transition:background-color .2s}label>span{flex-shrink:0}input{border-width:2px;border-color:transparent;border-style:solid;border-radius:8px;padding:.6em;outline:none;font-size:inherit;font-family:inherit;color:var(--gray-5);background-color:var(--gray-85);transition:background-color .2s,color .2s,border-color .2s;width:100%}input:hover{border-color:var(--gray-65)}input:focus{border-color:var(--gray-50)}input:disabled{border-color:transparent;color:var(--gray-50);cursor:not-allowed}.success{color:var(--green-5)}.warning{color:var(--yellow-5)}.error{color:var(--red-5)}p{white-space:pre-line;overflow-wrap:break-word}.section.svelte-klc9jx{border-style:solid;border-width:2px;border-color:var(--gray-50);border-radius:16px;display:flex;flex-direction:column;padding:16px 16px 0;transition:border-color .2s}.body.svelte-klc9jx{display:flex;flex-direction:column;row-gap:16px;padding-bottom:16px}.heading.svelte-klc9jx{all:unset;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-bottom:16px}.heading.svelte-klc9jx:hover{background-color:transparent}.arrow-container.svelte-klc9jx{transition:background-color .2s;background-color:transparent;border-radius:8px;padding:4px;display:flex;align-items:center}.arrow-container.svelte-klc9jx:hover{background-color:var(--gray-65)}svg.svelte-klc9jx{transition:transform .3s;color:inherit}svg.rotated.svelte-klc9jx{transform:rotate(-90deg)}.options-container.svelte-azbhie{position:relative}.menu-container.svelte-azbhie{position:absolute;left:0;z-index:1;white-space:pre}.options-menu.svelte-azbhie{display:inline-flex;flex-direction:column;padding:.5rem;border-radius:.7rem;border:var(--border-style);box-shadow:0 10px 15px -3px var(--shadow),0 4px 6px -4px var(--shadow)}.options-menu.svelte-azbhie>button{font-size:1.2rem;padding:.3rem;text-align:start}.select-dropdown.svelte-1w71hwl{display:flex;align-items:center;gap:.5rem}.select-dropdown.svelte-1w71hwl:has(button:disabled){cursor:not-allowed;color:var(--gray-50)}.select-dropdown-button.svelte-1w71hwl{background-color:var(--gray-85);padding:.6rem;display:flex;gap:.4rem;width:100%;justify-content:space-between}.heading.svelte-z1q96p{all:unset;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.container.svelte-z1q96p{display:flex;flex-direction:column;gap:12px;background-color:var(--gray-90);padding:10px 16px;border-radius:8px;transition:background-color .2s}.delete-container.svelte-z1q96p{padding:4px;display:flex;align-items:center}label.svelte-z1q96p{padding:0}button.svelte-1oalwmk{background-color:transparent;padding:8px;min-width:48px;display:flex;align-items:center}button.svelte-1oalwmk:hover{background-color:var(--gray-65)}div.svelte-p108mq{display:flex;flex-direction:row;justify-content:space-between;column-gap:8px}main.svelte-p108mq{display:flex;flex-direction:column;row-gap:32px}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
)rawliteral";

const char iconSvg[] PROGMEM = R"rawliteral(
<svg class="iconify iconify--logos" width="32" height="32" aria-hidden="true" preserveAspectRatio="xMidYMid" role="img" version="1.1" viewBox="0 0 256.96 257" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient id="radialGradient9277" cx="128.48" cy="128.5" r="96.375" gradientUnits="userSpaceOnUse"><stop stop-color="#e6e6e6" offset="0"/><stop stop-color="#c6c6c6" offset=".67716"/><stop stop-color="#a5a5a5" offset="1"/></radialGradient><clipPath id="clipPath10832"><circle cx="128.48" cy="128.5" r="128.5" fill="none" style="paint-order:normal"/></clipPath></defs><g clip-path="url(#clipPath10832)"><rect x="-.01819" width="257" height="257" fill="#121212" style="paint-order:normal"/><circle cx="128.48" cy="128.5" r="96.375" fill="url(#radialGradient9277)" style="paint-order:normal"/><circle cx="96.357" cy="160.62" r="96.375" fill="#121212" style="paint-order:normal"/></g></svg>
)rawliteral";